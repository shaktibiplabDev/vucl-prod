<?php
$code = base64_decode('PD9waHAKLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0rCi8vIEZpbGUgbmFtZSAgIDogdGNwZGZfZm9udHMucGhwCi8vIFZlcnNpb24gICAgIDogMS4xLjEKLy8gQmVnaW4gICAgICAgOiAyMDA4LTAxLTAxCi8vIExhc3QgVXBkYXRlIDogMjAyNC0xMi0yMwovLyBBdXRob3IgICAgICA6IE5pY29sYSBBc3VuaSAtIFRlY25pY2suY29tIExURCAtIHd3dy50ZWNuaWNrLmNvbSAtIGluZm9AdGVjbmljay5jb20KLy8gTGljZW5zZSAgICAgOiBHTlUtTEdQTCB2MyAoaHR0cDovL3d3dy5nbnUub3JnL2NvcHlsZWZ0L2xlc3Nlci5odG1sKQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIENvcHlyaWdodCAoQykgMjAwOC0yMDI1IE5pY29sYSBBc3VuaSAtIFRlY25pY2suY29tIExURAovLwovLyBUaGlzIGZpbGUgaXMgcGFydCBvZiBUQ1BERiBzb2Z0d2FyZSBsaWJyYXJ5LgovLwovLyBUQ1BERiBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0Ci8vIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzCi8vIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZQovLyBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgovLwovLyBUQ1BERiBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQKLy8gV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgovLyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuCi8vIFNlZSB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCi8vCi8vIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQovLyBhbG9uZyB3aXRoIFRDUERGLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgovLwovLyBTZWUgTElDRU5TRS5UWFQgZmlsZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLwovLyBEZXNjcmlwdGlvbiA6Rm9udCBtZXRob2RzIGZvciBUQ1BERiBsaWJyYXJ5LgovLwovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSsKCi8qKgogKiBAZmlsZQogKiBVbmljb2RlIGRhdGEgYW5kIGZvbnQgbWV0aG9kcyBmb3IgVENQREYgbGlicmFyeS4KICogQGF1dGhvciBOaWNvbGEgQXN1bmkKICogQHBhY2thZ2UgY29tLnRlY25pY2sudGNwZGYKICovCgovKioKICogQGNsYXNzIFRDUERGX0ZPTlRTCiAqIEZvbnQgbWV0aG9kcyBmb3IgVENQREYgbGlicmFyeS4KICogQHBhY2thZ2UgY29tLnRlY25pY2sudGNwZGYKICogQHZlcnNpb24gMS4xLjEKICogQGF1dGhvciBOaWNvbGEgQXN1bmkgLSBpbmZvQHRlY25pY2suY29tCiAqLwpjbGFzcyBUQ1BERl9GT05UUyB7CgoJLyoqCgkgKiBTdGF0aWMgY2FjaGUgdXNlZCBmb3Igc3BlZWQgdXAgdW5pb3JkIHBlcmZvcm1hbmNlcwoJICogQHByb3RlY3RlZAoJICovCglwcm90ZWN0ZWQgc3RhdGljICRjYWNoZV91bmlvcmQgPSBhcnJheSgpOwoKCS8qKgoJICogQ29udmVydCBhbmQgYWRkIHRoZSBzZWxlY3RlZCBUcnVlVHlwZSBvciBUeXBlMSBmb250IHRvIHRoZSBmb250cyBmb2xkZXIgKHRoYXQgbXVzdCBiZSB3cml0ZWFibGUpLgoJICogQHBhcmFtIHN0cmluZyAkZm9udGZpbGUgRm9udCBmaWxlIChmdWxsIHBhdGgpLgoJICogQHBhcmFtIHN0cmluZyAkZm9udHR5cGUgRm9udCB0eXBlLiBMZWF2ZSBlbXB0eSBmb3IgYXV0b2RldGVjdCBtb2RlLiBWYWxpZCB2YWx1ZXMgYXJlOiBUcnVlVHlwZVVuaWNvZGUsIFRydWVUeXBlLCBUeXBlMSwgQ0lEMEpQID0gQ0lELTAgSmFwYW5lc2UsIENJRDBLUiA9IENJRC0wIEtvcmVhbiwgQ0lEMENTID0gQ0lELTAgQ2hpbmVzZSBTaW1wbGlmaWVkLCBDSUQwQ1QgPSBDSUQtMCBDaGluZXNlIFRyYWRpdGlvbmFsLgoJICogQHBhcmFtIHN0cmluZyAkZW5jIE5hbWUgb2YgdGhlIGVuY29kaW5nIHRhYmxlIHRvIHVzZS4gTGVhdmUgZW1wdHkgZm9yIGRlZmF1bHQgbW9kZS4gT21pdCB0aGlzIHBhcmFtZXRlciBmb3IgVHJ1ZVR5cGUgVW5pY29kZSBhbmQgc3ltYm9saWMgZm9udHMgbGlrZSBTeW1ib2wgb3IgWmFwZkRpbmdCYXRzLgoJICogQHBhcmFtIGludCAkZmxhZ3MgVW5zaWduZWQgMzItYml0IGludGVnZXIgY29udGFpbmluZyBmbGFncyBzcGVjaWZ5aW5nIHZhcmlvdXMgY2hhcmFjdGVyaXN0aWNzIG9mIHRoZSBmb250IChQREYzMjAwMDoyMDA4IC0gOS44LjIgRm9udCBEZXNjcmlwdG9yIEZsYWdzKTogKzEgZm9yIGZpeGVkIGZvbnQ7ICs0IGZvciBzeW1ib2wgb3IgKzMyIGZvciBub24tc3ltYm9sOyArNjQgZm9yIGl0YWxpYy4gRml4ZWQgYW5kIEl0YWxpYyBtb2RlIGFyZSBnZW5lcmFsbHkgYXV0b2RldGVjdGVkIHNvIHlvdSBoYXZlIHRvIHNldCBpdCB0byAzMiA9IG5vbi1zeW1ib2xpYyBmb250IChkZWZhdWx0KSBvciA0ID0gc3ltYm9saWMgZm9udC4KCSAqIEBwYXJhbSBzdHJpbmcgJG91dHBhdGggT3V0cHV0IHBhdGggZm9yIGdlbmVyYXRlZCBmb250IGZpbGVzIChtdXN0IGJlIHdyaXRlYWJsZSBieSB0aGUgd2ViIHNlcnZlcikuIExlYXZlIGVtcHR5IGZvciBkZWZhdWx0IGZvbnQgZm9sZGVyLgoJICogQHBhcmFtIGludCAkcGxhdGlkIFBsYXRmb3JtIElEIGZvciBDTUFQIHRhYmxlIHRvIGV4dHJhY3QgKHdoZW4gYnVpbGRpbmcgYSBVbmljb2RlIGZvbnQgZm9yIFdpbmRvd3MgdGhpcyB2YWx1ZSBzaG91bGQgYmUgMywgZm9yIE1hY2ludG9zaCBzaG91bGQgYmUgMSkuCgkgKiBAcGFyYW0gaW50ICRlbmNpZCBFbmNvZGluZyBJRCBmb3IgQ01BUCB0YWJsZSB0byBleHRyYWN0ICh3aGVuIGJ1aWxkaW5nIGEgVW5pY29kZSBmb250IGZvciBXaW5kb3dzIHRoaXMgdmFsdWUgc2hvdWxkIGJlIDEsIGZvciBNYWNpbnRvc2ggc2hvdWxkIGJlIDApLiBXaGVuIFBsYXRmb3JtIElEIGlzIDMsIGxlZ2FsIHZhbHVlcyBmb3IgRW5jb2RpbmcgSUQgYXJlOiAwPVN5bWJvbCwgMT1Vbmljb2RlLCAyPVNoaWZ0SklTLCAzPVBSQywgND1CaWc1LCA1PVdhbnN1bmcsIDY9Sm9oYWIsIDc9UmVzZXJ2ZWQsIDg9UmVzZXJ2ZWQsIDk9UmVzZXJ2ZWQsIDEwPVVDUy00LgoJICogQHBhcmFtIGJvb2xlYW4gJGFkZGNiYm94IElmIHRydWUgaW5jbHVkZXMgdGhlIGNoYXJhY3RlciBib3VuZGluZyBib3ggaW5mb3JtYXRpb24gb24gdGhlIHBocCBmb250IGZpbGUuCgkgKiBAcGFyYW0gYm9vbGVhbiAkbGluayBJZiB0cnVlIGxpbmsgdG8gc3lzdGVtIGZvbnQgaW5zdGVhZCBvZiBjb3B5aW5nIHRoZSBmb250IGRhdGEgKG5vdCB0cmFuc3BvcnRhYmxlKSAtIE5vdGU6IGRvIG5vdCB3b3JrIHdpdGggVHlwZTEgZm9udHMuCgkgKiBAcmV0dXJuIHN0cmluZ3xmYWxzZSBUQ1BERiBmb250IG5hbWUgb3IgYm9vbGVhbiBmYWxzZSBpbiBjYXNlIG9mIGVycm9yLgoJICogQGF1dGhvciBOaWNvbGEgQXN1bmkKCSAqIEBzaW5jZSA1LjkuMTIzICgyMDEwLTA5LTMwKQoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBhZGRUVEZmb250KCRmb250ZmlsZSwgJGZvbnR0eXBlPScnLCAkZW5jPScnLCAkZmxhZ3M9MzIsICRvdXRwYXRoPScnLCAkcGxhdGlkPTMsICRlbmNpZD0xLCAkYWRkY2Jib3g9ZmFsc2UsICRsaW5rPWZhbHNlKSB7CgkJaWYgKCFUQ1BERl9TVEFUSUM6OmZpbGVfZXhpc3RzKCRmb250ZmlsZSkpIHsKCQkJLy8gQ291bGQgbm90IGZpbmQgZmlsZQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCS8vIGZvbnQgbWV0cmljcwoJCSRmbWV0cmljID0gYXJyYXkoKTsKCQkvLyBidWlsZCBuZXcgZm9udCBuYW1lIGZvciBUQ1BERiBjb21wYXRpYmlsaXR5CgkJJGZvbnRfcGF0aF9wYXJ0cyA9IHBhdGhpbmZvKCRmb250ZmlsZSk7CgkJaWYgKCFpc3NldCgkZm9udF9wYXRoX3BhcnRzWydmaWxlbmFtZSddKSkgewoJCQkkZm9udF9wYXRoX3BhcnRzWydmaWxlbmFtZSddID0gc3Vic3RyKCRmb250X3BhdGhfcGFydHNbJ2Jhc2VuYW1lJ10sIDAsIC0oc3RybGVuKCRmb250X3BhdGhfcGFydHNbJ2V4dGVuc2lvbiddKSArIDEpKTsKCQl9CgkJJGZvbnRfbmFtZSA9IHN0cnRvbG93ZXIoJGZvbnRfcGF0aF9wYXJ0c1snZmlsZW5hbWUnXSk7CgkJJGZvbnRfbmFtZSA9IHByZWdfcmVwbGFjZSgnL1teYS16MC05X10vJywgJycsICRmb250X25hbWUpOwoJCSRzZWFyY2ggID0gYXJyYXkoJ2JvbGQnLCAnb2JsaXF1ZScsICdpdGFsaWMnLCAncmVndWxhcicpOwoJCSRyZXBsYWNlID0gYXJyYXkoJ2InLCAnaScsICdpJywgJycpOwoJCSRmb250X25hbWUgPSBzdHJfcmVwbGFjZSgkc2VhcmNoLCAkcmVwbGFjZSwgJGZvbnRfbmFtZSk7CgkJaWYgKGVtcHR5KCRmb250X25hbWUpKSB7CgkJCS8vIHNldCBnZW5lcmljIG5hbWUKCQkJJGZvbnRfbmFtZSA9ICd0Y3BkZmZvbnQnOwoJCX0KCQkvLyBzZXQgb3V0cHV0IHBhdGgKCQlpZiAoZW1wdHkoJG91dHBhdGgpKSB7CgkJCSRvdXRwYXRoID0gc2VsZjo6X2dldGZvbnRwYXRoKCk7CgkJfQoJCS8vIGNoZWNrIGlmIHRoaXMgZm9udCBhbHJlYWR5IGV4aXN0CgkJaWYgKEBUQ1BERl9TVEFUSUM6OmZpbGVfZXhpc3RzKCRvdXRwYXRoLiRmb250X25hbWUuJy5waHAnKSkgewoJCQkvLyB0aGlzIGZvbnQgYWxyZWFkeSBleGlzdCAoZGVsZXRlIGl0IGZyb20gZm9udHMgZm9sZGVyIHRvIHJlYnVpbGQgaXQpCgkJCXJldHVybiAkZm9udF9uYW1lOwoJCX0KCQkkZm1ldHJpY1snZmlsZSddID0gJGZvbnRfbmFtZTsKCQkkZm1ldHJpY1snY3RnJ10gPSAkZm9udF9uYW1lLicuY3RnLnonOwoJCS8vIGdldCBmb250IGRhdGEKCQkkZm9udCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRmb250ZmlsZSk7CgkJJGZtZXRyaWNbJ29yaWdpbmFsc2l6ZSddID0gc3RybGVuKCRmb250KTsKCQkvLyBhdXRvZGV0ZWN0IGZvbnQgdHlwZQoJCWlmIChlbXB0eSgkZm9udHR5cGUpKSB7CgkJCWlmIChUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgMCkgPT0gMHgxMDAwMCkgewoJCQkJLy8gVHJ1ZSBUeXBlIChVbmljb2RlIG9yIG5vdCkKCQkJCSRmb250dHlwZSA9ICdUcnVlVHlwZVVuaWNvZGUnOwoJCQl9IGVsc2VpZiAoc3Vic3RyKCRmb250LCAwLCA0KSA9PSAnT1RUTycpIHsKCQkJCS8vIE9wZW4gVHlwZSAoVW5pY29kZSBvciBub3QpCgkJCQkvL1Vuc3VwcG9ydGVkIGZvbnQgZm9ybWF0OiBPcGVuVHlwZSB3aXRoIENGRiBkYXRhCgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0gZWxzZSB7CgkJCQkvLyBUeXBlIDEKCQkJCSRmb250dHlwZSA9ICdUeXBlMSc7CgkJCX0KCQl9CgkJLy8gc2V0IGZvbnQgdHlwZQoJCXN3aXRjaCAoJGZvbnR0eXBlKSB7CgkJCWNhc2UgJ0NJRDBDVCc6CgkJCWNhc2UgJ0NJRDBDUyc6CgkJCWNhc2UgJ0NJRDBLUic6CgkJCWNhc2UgJ0NJRDBKUCc6IHsKCQkJCSRmbWV0cmljWyd0eXBlJ10gPSAnY2lkZm9udDAnOwoJCQkJYnJlYWs7CgkJCX0KCQkJY2FzZSAnVHlwZTEnOiB7CgkJCQkkZm1ldHJpY1sndHlwZSddID0gJ1R5cGUxJzsKCQkJCWlmIChlbXB0eSgkZW5jKSBBTkQgKCgkZmxhZ3MgJiA0KSA9PSAwKSkgewoJCQkJCSRlbmMgPSAnY3AxMjUyJzsKCQkJCX0KCQkJCWJyZWFrOwoJCQl9CgkJCWNhc2UgJ1RydWVUeXBlJzogewoJCQkJJGZtZXRyaWNbJ3R5cGUnXSA9ICdUcnVlVHlwZSc7CgkJCQlicmVhazsKCQkJfQoJCQljYXNlICdUcnVlVHlwZVVuaWNvZGUnOgoJCQlkZWZhdWx0OiB7CgkJCQkkZm1ldHJpY1sndHlwZSddID0gJ1RydWVUeXBlVW5pY29kZSc7CgkJCQlicmVhazsKCQkJfQoJCX0KCQkvLyBzZXQgZW5jb2RpbmcgbWFwcyAoaWYgYW55KQoJCSRmbWV0cmljWydlbmMnXSA9IHByZWdfcmVwbGFjZSgnL1teQS1aYS16MC05X1wtXS8nLCAnJywgJGVuYyk7CgkJJGZtZXRyaWNbJ2RpZmYnXSA9ICcnOwoJCWlmICgoJGZtZXRyaWNbJ3R5cGUnXSA9PSAnVHJ1ZVR5cGUnKSBPUiAoJGZtZXRyaWNbJ3R5cGUnXSA9PSAnVHlwZTEnKSkgewoJCQlpZiAoIWVtcHR5KCRlbmMpIEFORCAoJGVuYyAhPSAnY3AxMjUyJykgQU5EIGlzc2V0KFRDUERGX0ZPTlRfREFUQTo6JGVuY21hcFskZW5jXSkpIHsKCQkJCS8vIGJ1aWxkIGRpZmZlcmVuY2VzIGZyb20gcmVmZXJlbmNlIGVuY29kaW5nCgkJCQkkZW5jX3JlZiA9IFRDUERGX0ZPTlRfREFUQTo6JGVuY21hcFsnY3AxMjUyJ107CgkJCQkkZW5jX3RhcmdldCA9IFRDUERGX0ZPTlRfREFUQTo6JGVuY21hcFskZW5jXTsKCQkJCSRsYXN0ID0gMDsKCQkJCWZvciAoJGkgPSAzMjsgJGkgPD0gMjU1OyArKyRpKSB7CgkJCQkJaWYgKCRlbmNfdGFyZ2V0WyRpXSAhPSAkZW5jX3JlZlskaV0pIHsKCQkJCQkJaWYgKCRpICE9ICgkbGFzdCArIDEpKSB7CgkJCQkJCQkkZm1ldHJpY1snZGlmZiddIC49ICRpLicgJzsKCQkJCQkJfQoJCQkJCQkkbGFzdCA9ICRpOwoJCQkJCQkkZm1ldHJpY1snZGlmZiddIC49ICcvJy4kZW5jX3RhcmdldFskaV0uJyAnOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkvLyBwYXJzZSB0aGUgZm9udCBieSB0eXBlCgkJaWYgKCRmbWV0cmljWyd0eXBlJ10gPT0gJ1R5cGUxJykgewoJCQkvLyAtLS0tLS0tLS0tIFRZUEUgMSAtLS0tLS0tLS0tCgkJCS8vIHJlYWQgZmlyc3Qgc2VnbWVudAoJCQkkYSA9IHVucGFjaygnQ21hcmtlci9DdHlwZS9Wc2l6ZScsIHN1YnN0cigkZm9udCwgMCwgNikpOwoJCQlpZiAoJGFbJ21hcmtlciddICE9IDEyOCkgewoJCQkJLy8gRm9udCBmaWxlIGlzIG5vdCBhIHZhbGlkIGJpbmFyeSBUeXBlMQoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCSRmbWV0cmljWydzaXplMSddID0gJGFbJ3NpemUnXTsKCQkJJGRhdGEgPSBzdWJzdHIoJGZvbnQsIDYsICRmbWV0cmljWydzaXplMSddKTsKCQkJLy8gcmVhZCBzZWNvbmQgc2VnbWVudAoJCQkkYSA9IHVucGFjaygnQ21hcmtlci9DdHlwZS9Wc2l6ZScsIHN1YnN0cigkZm9udCwgKDYgKyAkZm1ldHJpY1snc2l6ZTEnXSksIDYpKTsKCQkJaWYgKCRhWydtYXJrZXInXSAhPSAxMjgpIHsKCQkJCS8vIEZvbnQgZmlsZSBpcyBub3QgYSB2YWxpZCBiaW5hcnkgVHlwZTEKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCQkkZm1ldHJpY1snc2l6ZTInXSA9ICRhWydzaXplJ107CgkJCSRlbmNyeXB0ZWQgPSBzdWJzdHIoJGZvbnQsICgxMiArICRmbWV0cmljWydzaXplMSddKSwgJGZtZXRyaWNbJ3NpemUyJ10pOwoJCQkkZGF0YSAuPSAkZW5jcnlwdGVkOwoJCQkvLyBzdG9yZSBjb21wcmVzc2VkIGZvbnQKCQkJJGZtZXRyaWNbJ2ZpbGUnXSAuPSAnLnonOwoJCQkkZnAgPSBUQ1BERl9TVEFUSUM6OmZvcGVuTG9jYWwoJG91dHBhdGguJGZtZXRyaWNbJ2ZpbGUnXSwgJ3diJyk7CgkJCWZ3cml0ZSgkZnAsIGd6Y29tcHJlc3MoJGRhdGEpKTsKCQkJZmNsb3NlKCRmcCk7CgkJCS8vIGdldCBmb250IGluZm8KCQkJJGZtZXRyaWNbJ0ZsYWdzJ10gPSAkZmxhZ3M7CgkJCXByZWdfbWF0Y2ggKCcjL0Z1bGxOYW1lW1xzXSorXCgoW15cKV0qKykjJywgJGZvbnQsICRtYXRjaGVzKTsKCQkJJGZtZXRyaWNbJ25hbWUnXSA9IHByZWdfcmVwbGFjZSgnL1teYS16QS1aMC05X1wtXS8nLCAnJywgJG1hdGNoZXNbMV0pOwoJCQlwcmVnX21hdGNoKCcjL0ZvbnRCQm94W1xzXSoreyhbXn1dKispIycsICRmb250LCAkbWF0Y2hlcyk7CgkJCSRyYXdidmwgPSBleHBsb2RlKCcgJywgdHJpbSgkbWF0Y2hlc1sxXSkpOwoJCQkkYnZsID0gWyhpbnQpICRyYXdidmxbMF0sIChpbnQpICRyYXdidmxbMV0sIChpbnQpICRyYXdidmxbMl0sIChpbnQpICRyYXdidmxbM11dOwoJCQkkZm1ldHJpY1snYmJveCddID0gaW1wbG9kZSgnICcsICRidmwpOwoJCQkkZm1ldHJpY1snQXNjZW50J10gPSAkYnZsWzNdOwoJCQkkZm1ldHJpY1snRGVzY2VudCddID0gJGJ2bFsxXTsKCQkJcHJlZ19tYXRjaCgnIy9JdGFsaWNBbmdsZVtcc10qKyhbMC05XCtcLV0qKykjJywgJGZvbnQsICRtYXRjaGVzKTsKCQkJJGZtZXRyaWNbJ2l0YWxpY0FuZ2xlJ10gPSBpbnR2YWwoJG1hdGNoZXNbMV0pOwoJCQlpZiAoJGZtZXRyaWNbJ2l0YWxpY0FuZ2xlJ10gIT0gMCkgewoJCQkJJGZtZXRyaWNbJ0ZsYWdzJ10gfD0gNjQ7CgkJCX0KCQkJcHJlZ19tYXRjaCgnIy9VbmRlcmxpbmVQb3NpdGlvbltcc10qKyhbMC05XCtcLV0qKykjJywgJGZvbnQsICRtYXRjaGVzKTsKCQkJJGZtZXRyaWNbJ3VuZGVybGluZVBvc2l0aW9uJ10gPSBpbnR2YWwoJG1hdGNoZXNbMV0pOwoJCQlwcmVnX21hdGNoKCcjL1VuZGVybGluZVRoaWNrbmVzc1tcc10qKyhbMC05XCtcLV0qKykjJywgJGZvbnQsICRtYXRjaGVzKTsKCQkJJGZtZXRyaWNbJ3VuZGVybGluZVRoaWNrbmVzcyddID0gaW50dmFsKCRtYXRjaGVzWzFdKTsKCQkJcHJlZ19tYXRjaCgnIy9pc0ZpeGVkUGl0Y2hbXHNdKisoW15cc10qKykjJywgJGZvbnQsICRtYXRjaGVzKTsKCQkJaWYgKCRtYXRjaGVzWzFdID09ICd0cnVlJykgewoJCQkJJGZtZXRyaWNbJ0ZsYWdzJ10gfD0gMTsKCQkJfQoJCQkvLyBnZXQgaW50ZXJuYWwgbWFwCgkJCSRpbWFwID0gYXJyYXkoKTsKCQkJaWYgKHByZWdfbWF0Y2hfYWxsKCcjZHVwW1xzXShbMC05XSspW1xzXSorLyhbXlxzXSorKVtcc11wdXQjc1UnLCAkZm9udCwgJGZtYXAsIFBSRUdfU0VUX09SREVSKSA+IDApIHsKCQkJCWZvcmVhY2ggKCRmbWFwIGFzICR2KSB7CgkJCQkJJGltYXBbJHZbMl1dID0gJHZbMV07CgkJCQl9CgkJCX0KCQkJLy8gZGVjcnlwdCBlZXhlYyBlbmNyeXB0ZWQgcGFydAoJCQkkciA9IDU1NjY1OyAvLyBlZXhlYyBlbmNyeXB0aW9uIGNvbnN0YW50CgkJCSRjMSA9IDUyODQ1OwoJCQkkYzIgPSAyMjcxOTsKCQkJJGVsZW4gPSBzdHJsZW4oJGVuY3J5cHRlZCk7CgkJCSRlcGxhaW4gPSAnJzsKCQkJZm9yICgkaSA9IDA7ICRpIDwgJGVsZW47ICsrJGkpIHsKCQkJCSRjaHIgPSBvcmQoJGVuY3J5cHRlZFskaV0pOwoJCQkJJGVwbGFpbiAuPSBjaHIoJGNociBeICgkciA+PiA4KSk7CgkJCQkkciA9ICgoKCRjaHIgKyAkcikgKiAkYzEgKyAkYzIpICUgNjU1MzYpOwoJCQl9CgkJCWlmIChwcmVnX21hdGNoKCcjL0ZvcmNlQm9sZFtcc10qKyhbXlxzXSorKSMnLCAkZXBsYWluLCAkbWF0Y2hlcykgPiAwKSB7CgkJCQlpZiAoJG1hdGNoZXNbMV0gPT0gJ3RydWUnKSB7CgkJCQkJJGZtZXRyaWNbJ0ZsYWdzJ10gfD0gMHg0MDAwMDsKCQkJCX0KCQkJfQoJCQlpZiAocHJlZ19tYXRjaCgnIy9TdGRWV1tcc10qK1xbKFteXF1dKispIycsICRlcGxhaW4sICRtYXRjaGVzKSA+IDApIHsKCQkJCSRmbWV0cmljWydTdGVtViddID0gaW50dmFsKCRtYXRjaGVzWzFdKTsKCQkJfSBlbHNlIHsKCQkJCSRmbWV0cmljWydTdGVtViddID0gNzA7CgkJCX0KCQkJaWYgKHByZWdfbWF0Y2goJyMvU3RkSFdbXHNdKitcWyhbXlxdXSorKSMnLCAkZXBsYWluLCAkbWF0Y2hlcykgPiAwKSB7CgkJCQkkZm1ldHJpY1snU3RlbUgnXSA9IGludHZhbCgkbWF0Y2hlc1sxXSk7CgkJCX0gZWxzZSB7CgkJCQkkZm1ldHJpY1snU3RlbUgnXSA9IDMwOwoJCQl9CgkJCWlmIChwcmVnX21hdGNoKCcjL0JsdWVWYWx1ZXNbXHNdKitcWyhbXlxdXSorKSMnLCAkZXBsYWluLCAkbWF0Y2hlcykgPiAwKSB7CgkJCQkkYnYgPSBleHBsb2RlKCcgJywgJG1hdGNoZXNbMV0pOwoJCQkJaWYgKGNvdW50KCRidikgPj0gNikgewoJCQkJCSR2MSA9IGludHZhbCgkYnZbMl0pOwoJCQkJCSR2MiA9IGludHZhbCgkYnZbNF0pOwoJCQkJCWlmICgkdjEgPD0gJHYyKSB7CgkJCQkJCSRmbWV0cmljWydYSGVpZ2h0J10gPSAkdjE7CgkJCQkJCSRmbWV0cmljWydDYXBIZWlnaHQnXSA9ICR2MjsKCQkJCQl9IGVsc2UgewoJCQkJCQkkZm1ldHJpY1snWEhlaWdodCddID0gJHYyOwoJCQkJCQkkZm1ldHJpY1snQ2FwSGVpZ2h0J10gPSAkdjE7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQkkZm1ldHJpY1snWEhlaWdodCddID0gNDUwOwoJCQkJCSRmbWV0cmljWydDYXBIZWlnaHQnXSA9IDcwMDsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCSRmbWV0cmljWydYSGVpZ2h0J10gPSA0NTA7CgkJCQkkZm1ldHJpY1snQ2FwSGVpZ2h0J10gPSA3MDA7CgkJCX0KCQkJLy8gZ2V0IHRoZSBudW1iZXIgb2YgcmFuZG9tIGJ5dGVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgY2hhcnN0cmluZ3MKCQkJaWYgKHByZWdfbWF0Y2goJyMvbGVuSVZbXHNdKisoW1xkXSorKSMnLCAkZXBsYWluLCAkbWF0Y2hlcykgPiAwKSB7CgkJCQkkbGVuSVYgPSBpbnR2YWwoJG1hdGNoZXNbMV0pOwoJCQl9IGVsc2UgewoJCQkJJGxlbklWID0gNDsKCQkJfQoJCQkkZm1ldHJpY1snTGVhZGluZyddID0gMDsKCQkJLy8gZ2V0IGNoYXJzdHJpbmcgZGF0YQoJCQkkZXBsYWluID0gc3Vic3RyKCRlcGxhaW4sIChzdHJwb3MoJGVwbGFpbiwgJy9DaGFyU3RyaW5ncycpICsgMSkpOwoJCQlwcmVnX21hdGNoX2FsbCgnIy8oW0EtWmEtejAtOVwuXSorKVtcc11bMC05XStbXHNdUkRbXHNdKC4qKVtcc11ORCNzVScsICRlcGxhaW4sICRtYXRjaGVzLCBQUkVHX1NFVF9PUkRFUik7CgkJCWlmICghZW1wdHkoJGVuYykgQU5EIGlzc2V0KFRDUERGX0ZPTlRfREFUQTo6JGVuY21hcFskZW5jXSkpIHsKCQkJCSRlbmNfbWFwID0gVENQREZfRk9OVF9EQVRBOjokZW5jbWFwWyRlbmNdOwoJCQl9IGVsc2UgewoJCQkJJGVuY19tYXAgPSBmYWxzZTsKCQkJfQoJCQkkZm1ldHJpY1snY3cnXSA9ICcnOwoJCQkkZm1ldHJpY1snTWF4V2lkdGgnXSA9IDA7CgkJCSRjd2lkdGhzID0gYXJyYXkoKTsKCQkJZm9yZWFjaCAoJG1hdGNoZXMgYXMgJGsgPT4gJHYpIHsKCQkJCSRjaWQgPSAwOwoJCQkJaWYgKGlzc2V0KCRpbWFwWyR2WzFdXSkpIHsKCQkJCQkkY2lkID0gJGltYXBbJHZbMV1dOwoJCQkJfSBlbHNlaWYgKCRlbmNfbWFwICE9PSBmYWxzZSkgewoJCQkJCSRjaWQgPSBhcnJheV9zZWFyY2goJHZbMV0sICRlbmNfbWFwKTsKCQkJCQlpZiAoJGNpZCA9PT0gZmFsc2UpIHsKCQkJCQkJJGNpZCA9IDA7CgkJCQkJfSBlbHNlaWYgKCRjaWQgPiAxMDAwKSB7CgkJCQkJCSRjaWQgLT0gMTAwMDsKCQkJCQl9CgkJCQl9CgkJCQkvLyBkZWNyeXB0IGNoYXJzdHJpbmcgZW5jcnlwdGVkIHBhcnQKCQkJCSRyID0gNDMzMDsgLy8gY2hhcnN0cmluZyBlbmNyeXB0aW9uIGNvbnN0YW50CgkJCQkkYzEgPSA1Mjg0NTsKCQkJCSRjMiA9IDIyNzE5OwoJCQkJJGNkID0gJHZbMl07CgkJCQkkY2xlbiA9IHN0cmxlbigkY2QpOwoJCQkJJGNjb20gPSBhcnJheSgpOwoJCQkJZm9yICgkaSA9IDA7ICRpIDwgJGNsZW47ICsrJGkpIHsKCQkJCQkkY2hyID0gb3JkKCRjZFskaV0pOwoJCQkJCSRjY29tW10gPSAoJGNociBeICgkciA+PiA4KSk7CgkJCQkJJHIgPSAoKCgkY2hyICsgJHIpICogJGMxICsgJGMyKSAlIDY1NTM2KTsKCQkJCX0KCQkJCS8vIGRlY29kZSBudW1iZXJzCgkJCQkkY2RlYyA9IGFycmF5KCk7CgkJCQkkY2sgPSAwOwoJCQkJJGkgPSAkbGVuSVY7CgkJCQl3aGlsZSAoJGkgPCAkY2xlbikgewoJCQkJCWlmICgkY2NvbVskaV0gPCAzMikgewoJCQkJCQkkY2RlY1skY2tdID0gJGNjb21bJGldOwoJCQkJCQlpZiAoKCRjayA+IDApIEFORCAoJGNkZWNbJGNrXSA9PSAxMykpIHsKCQkJCQkJCS8vIGhzYncgY29tbWFuZDogdXBkYXRlIHdpZHRoCgkJCQkJCQkkY3dpZHRoc1skY2lkXSA9ICRjZGVjWygkY2sgLSAxKV07CgkJCQkJCX0KCQkJCQkJKyskaTsKCQkJCQl9IGVsc2VpZiAoKCRjY29tWyRpXSA+PSAzMikgQU5EICgkY2NvbVskaV0gPD0gMjQ2KSkgewoJCQkJCQkkY2RlY1skY2tdID0gKCRjY29tWyRpXSAtIDEzOSk7CgkJCQkJCSsrJGk7CgkJCQkJfSBlbHNlaWYgKCgkY2NvbVskaV0gPj0gMjQ3KSBBTkQgKCRjY29tWyRpXSA8PSAyNTApKSB7CgkJCQkJCSRjZGVjWyRja10gPSAoKCgkY2NvbVskaV0gLSAyNDcpICogMjU2KSArICRjY29tWygkaSArIDEpXSArIDEwOCk7CgkJCQkJCSRpICs9IDI7CgkJCQkJfSBlbHNlaWYgKCgkY2NvbVskaV0gPj0gMjUxKSBBTkQgKCRjY29tWyRpXSA8PSAyNTQpKSB7CgkJCQkJCSRjZGVjWyRja10gPSAoKC0oJGNjb21bJGldIC0gMjUxKSAqIDI1NikgLSAkY2NvbVsoJGkgKyAxKV0gLSAxMDgpOwoJCQkJCQkkaSArPSAyOwoJCQkJCX0gZWxzZWlmICgkY2NvbVskaV0gPT0gMjU1KSB7CgkJCQkJCSRzdmFsID0gY2hyKCRjY29tWygkaSArIDEpXSkuY2hyKCRjY29tWygkaSArIDIpXSkuY2hyKCRjY29tWygkaSArIDMpXSkuY2hyKCRjY29tWygkaSArIDQpXSk7CgkJCQkJCSR2c3ZhbCA9IHVucGFjaygnbGknLCAkc3ZhbCk7CgkJCQkJCSRjZGVjWyRja10gPSAkdnN2YWxbJ2knXTsKCQkJCQkJJGkgKz0gNTsKCQkJCQl9CgkJCQkJKyskY2s7CgkJCQl9CgkJCX0gLy8gZW5kIGZvciBlYWNoIG1hdGNoZXMKCQkJJGZtZXRyaWNbJ01pc3NpbmdXaWR0aCddID0gJGN3aWR0aHNbMF07CgkJCSRmbWV0cmljWydNYXhXaWR0aCddID0gJGZtZXRyaWNbJ01pc3NpbmdXaWR0aCddOwoJCQkkZm1ldHJpY1snQXZnV2lkdGgnXSA9IDA7CgkJCS8vIHNldCBjaGFycyB3aWR0aHMKCQkJZm9yICgkY2lkID0gMDsgJGNpZCA8PSAyNTU7ICsrJGNpZCkgewoJCQkJaWYgKGlzc2V0KCRjd2lkdGhzWyRjaWRdKSkgewoJCQkJCWlmICgkY3dpZHRoc1skY2lkXSA+ICRmbWV0cmljWydNYXhXaWR0aCddKSB7CgkJCQkJCSRmbWV0cmljWydNYXhXaWR0aCddID0gJGN3aWR0aHNbJGNpZF07CgkJCQkJfQoJCQkJCSRmbWV0cmljWydBdmdXaWR0aCddICs9ICRjd2lkdGhzWyRjaWRdOwoJCQkJCSRmbWV0cmljWydjdyddIC49ICcsJy4kY2lkLic9PicuJGN3aWR0aHNbJGNpZF07CgkJCQl9IGVsc2UgewoJCQkJCSRmbWV0cmljWydjdyddIC49ICcsJy4kY2lkLic9PicuJGZtZXRyaWNbJ01pc3NpbmdXaWR0aCddOwoJCQkJfQoJCQl9CgkJCSRmbWV0cmljWydBdmdXaWR0aCddID0gcm91bmQoJGZtZXRyaWNbJ0F2Z1dpZHRoJ10gLyBjb3VudCgkY3dpZHRocykpOwoJCX0gZWxzZSB7CgkJCS8vIC0tLS0tLS0tLS0gVFJVRSBUWVBFIC0tLS0tLS0tLS0KCQkJJG9mZnNldCA9IDA7IC8vIG9mZnNldCBwb3NpdGlvbiBvZiB0aGUgZm9udCBkYXRhCgkJCWlmIChUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCkgIT0gMHgxMDAwMCkgewoJCQkJLy8gc2ZudCB2ZXJzaW9uIG11c3QgYmUgMHgwMDAxMDAwMCBmb3IgVHJ1ZVR5cGUgdmVyc2lvbiAxLjAuCgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJaWYgKCRmbWV0cmljWyd0eXBlJ10gIT0gJ2NpZGZvbnQwJykgewoJCQkJaWYgKCRsaW5rKSB7CgkJCQkJLy8gY3JlYXRlcyBhIHN5bWJvbGljIGxpbmsgdG8gdGhlIGV4aXN0aW5nIGZvbnQKCQkJCQlzeW1saW5rKCRmb250ZmlsZSwgJG91dHBhdGguJGZtZXRyaWNbJ2ZpbGUnXSk7CgkJCQl9IGVsc2UgewoJCQkJCS8vIHN0b3JlIGNvbXByZXNzZWQgZm9udAoJCQkJCSRmbWV0cmljWydmaWxlJ10gLj0gJy56JzsKCQkJCQkkZnAgPSBUQ1BERl9TVEFUSUM6OmZvcGVuTG9jYWwoJG91dHBhdGguJGZtZXRyaWNbJ2ZpbGUnXSwgJ3diJyk7CgkJCQkJZndyaXRlKCRmcCwgZ3pjb21wcmVzcygkZm9udCkpOwoJCQkJCWZjbG9zZSgkZnApOwoJCQkJfQoJCQl9CgkJCSRvZmZzZXQgKz0gNDsKCQkJLy8gZ2V0IG51bWJlciBvZiB0YWJsZXMKCQkJJG51bVRhYmxlcyA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJLy8gc2tpcCBzZWFyY2hSYW5nZSwgZW50cnlTZWxlY3RvciBhbmQgcmFuZ2VTaGlmdAoJCQkkb2Zmc2V0ICs9IDY7CgkJCS8vIHRhYmxlcyBhcnJheQoJCQkkdGFibGUgPSBhcnJheSgpOwoJCQkvLyAtLS0tLS0tLS0tIGdldCB0YWJsZXMgLS0tLS0tLS0tLQoJCQlmb3IgKCRpID0gMDsgJGkgPCAkbnVtVGFibGVzOyArKyRpKSB7CgkJCQkvLyBnZXQgdGFibGUgaW5mbwoJCQkJJHRhZyA9IHN1YnN0cigkZm9udCwgJG9mZnNldCwgNCk7CgkJCQkkb2Zmc2V0ICs9IDQ7CgkJCQkkdGFibGVbJHRhZ10gPSBhcnJheSgpOwoJCQkJJHRhYmxlWyR0YWddWydjaGVja1N1bSddID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJJG9mZnNldCArPSA0OwoJCQkJJHRhYmxlWyR0YWddWydvZmZzZXQnXSA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJCSRvZmZzZXQgKz0gNDsKCQkJCSR0YWJsZVskdGFnXVsnbGVuZ3RoJ10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkkb2Zmc2V0ICs9IDQ7CgkJCX0KCQkJLy8gY2hlY2sgbWFnaWNOdW1iZXIKCQkJJG9mZnNldCA9ICR0YWJsZVsnaGVhZCddWydvZmZzZXQnXSArIDEyOwoJCQlpZiAoVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpICE9IDB4NUYwRjNDRjUpIHsKCQkJCS8vIG1hZ2ljTnVtYmVyIG11c3QgYmUgMHg1RjBGM0NGNQoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCSRvZmZzZXQgKz0gNDsKCQkJJG9mZnNldCArPSAyOyAvLyBza2lwIGZsYWdzCgkJCS8vIGdldCBGVW5pdHMKCQkJJGZtZXRyaWNbJ3VuaXRzUGVyRW0nXSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJLy8gdW5pdHMgcmF0aW8gY29uc3RhbnQKCQkJJHVyayA9ICgxMDAwIC8gJGZtZXRyaWNbJ3VuaXRzUGVyRW0nXSk7CgkJCSRvZmZzZXQgKz0gMTY7IC8vIHNraXAgY3JlYXRlZCwgbW9kaWZpZWQKCQkJJHhNaW4gPSByb3VuZChUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCkgKiAkdXJrKTsKCQkJJG9mZnNldCArPSAyOwoJCQkkeU1pbiA9IHJvdW5kKFRDUERGX1NUQVRJQzo6X2dldEZXT1JEKCRmb250LCAkb2Zmc2V0KSAqICR1cmspOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCSR4TWF4ID0gcm91bmQoVENQREZfU1RBVElDOjpfZ2V0RldPUkQoJGZvbnQsICRvZmZzZXQpICogJHVyayk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJJHlNYXggPSByb3VuZChUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCkgKiAkdXJrKTsKCQkJJG9mZnNldCArPSAyOwoJCQkkZm1ldHJpY1snYmJveCddID0gJycuJHhNaW4uJyAnLiR5TWluLicgJy4keE1heC4nICcuJHlNYXguJyc7CgkJCSRtYWNTdHlsZSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJLy8gUERGIGZvbnQgZmxhZ3MKCQkJJGZtZXRyaWNbJ0ZsYWdzJ10gPSAkZmxhZ3M7CgkJCWlmICgoJG1hY1N0eWxlICYgMikgPT0gMikgewoJCQkJLy8gaXRhbGljIGZsYWcKCQkJCSRmbWV0cmljWydGbGFncyddIHw9IDY0OwoJCQl9CgkJCS8vIGdldCBvZmZzZXQgbW9kZSAoaW5kZXhUb0xvY0Zvcm1hdCA6IDAgPSBzaG9ydCwgMSA9IGxvbmcpCgkJCSRvZmZzZXQgPSAkdGFibGVbJ2hlYWQnXVsnb2Zmc2V0J10gKyA1MDsKCQkJJHNob3J0X29mZnNldCA9IChUQ1BERl9TVEFUSUM6Ol9nZXRTSE9SVCgkZm9udCwgJG9mZnNldCkgPT0gMCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJLy8gZ2V0IHRoZSBvZmZzZXRzIHRvIHRoZSBsb2NhdGlvbnMgb2YgdGhlIGdseXBocyBpbiB0aGUgZm9udCwgcmVsYXRpdmUgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgZ2x5cGhEYXRhIHRhYmxlCgkJCSRpbmRleFRvTG9jID0gYXJyYXkoKTsKCQkJJG9mZnNldCA9ICR0YWJsZVsnbG9jYSddWydvZmZzZXQnXTsKCQkJaWYgKCRzaG9ydF9vZmZzZXQpIHsKCQkJCS8vIHNob3J0IHZlcnNpb24KCQkJCSR0b3RfbnVtX2dseXBocyA9IGZsb29yKCR0YWJsZVsnbG9jYSddWydsZW5ndGgnXSAvIDIpOyAvLyBudW1HbHlwaHMgKyAxCgkJCQlmb3IgKCRpID0gMDsgJGkgPCAkdG90X251bV9nbHlwaHM7ICsrJGkpIHsKCQkJCQkkaW5kZXhUb0xvY1skaV0gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpICogMjsKCQkJCQlpZiAoaXNzZXQoJGluZGV4VG9Mb2NbKCRpIC0gMSldKSAmJiAoJGluZGV4VG9Mb2NbJGldID09ICRpbmRleFRvTG9jWygkaSAtIDEpXSkpIHsKCQkJCQkJLy8gdGhlIGxhc3QgZ2x5cGggZGlkbid0IGhhdmUgYW4gb3V0bGluZQoJCQkJCQl1bnNldCgkaW5kZXhUb0xvY1soJGkgLSAxKV0pOwoJCQkJCX0KCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQkvLyBsb25nIHZlcnNpb24KCQkJCSR0b3RfbnVtX2dseXBocyA9IGZsb29yKCR0YWJsZVsnbG9jYSddWydsZW5ndGgnXSAvIDQpOyAvLyBudW1HbHlwaHMgKyAxCgkJCQlmb3IgKCRpID0gMDsgJGkgPCAkdG90X251bV9nbHlwaHM7ICsrJGkpIHsKCQkJCQkkaW5kZXhUb0xvY1skaV0gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJaWYgKGlzc2V0KCRpbmRleFRvTG9jWygkaSAtIDEpXSkgJiYgKCRpbmRleFRvTG9jWyRpXSA9PSAkaW5kZXhUb0xvY1soJGkgLSAxKV0pKSB7CgkJCQkJCS8vIHRoZSBsYXN0IGdseXBoIGRpZG4ndCBoYXZlIGFuIG91dGxpbmUKCQkJCQkJdW5zZXQoJGluZGV4VG9Mb2NbKCRpIC0gMSldKTsKCQkJCQl9CgkJCQkJJG9mZnNldCArPSA0OwoJCQkJfQoJCQl9CgkJCS8vIGdldCBnbHlwaHMgaW5kZXhlcyBvZiBjaGFycyBmcm9tIGNtYXAgdGFibGUKCQkJJG9mZnNldCA9ICR0YWJsZVsnY21hcCddWydvZmZzZXQnXSArIDI7CgkJCSRudW1FbmNvZGluZ1RhYmxlcyA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJJGVuY29kaW5nVGFibGVzID0gYXJyYXkoKTsKCQkJZm9yICgkaSA9IDA7ICRpIDwgJG51bUVuY29kaW5nVGFibGVzOyArKyRpKSB7CgkJCQkkZW5jb2RpbmdUYWJsZXNbJGldWydwbGF0Zm9ybUlEJ10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJJG9mZnNldCArPSAyOwoJCQkJJGVuY29kaW5nVGFibGVzWyRpXVsnZW5jb2RpbmdJRCddID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCSRvZmZzZXQgKz0gMjsKCQkJCSRlbmNvZGluZ1RhYmxlc1skaV1bJ29mZnNldCddID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJJG9mZnNldCArPSA0OwoJCQl9CgkJCS8vIC0tLS0tLS0tLS0gZ2V0IG9zLzIgbWV0cmljcyAtLS0tLS0tLS0tCgkJCSRvZmZzZXQgPSAkdGFibGVbJ09TLzInXVsnb2Zmc2V0J107CgkJCSRvZmZzZXQgKz0gMjsgLy8gc2tpcCB2ZXJzaW9uCgkJCS8vIHhBdmdDaGFyV2lkdGgKCQkJJGZtZXRyaWNbJ0F2Z1dpZHRoJ10gPSByb3VuZChUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCkgKiAkdXJrKTsKCQkJJG9mZnNldCArPSAyOwoJCQkvLyB1c1dlaWdodENsYXNzCgkJCSR1c1dlaWdodENsYXNzID0gcm91bmQoVENQREZfU1RBVElDOjpfZ2V0VUZXT1JEKCRmb250LCAkb2Zmc2V0KSAqICR1cmspOwoJCQkvLyBlc3RpbWF0ZSBTdGVtViBhbmQgU3RlbUggKDQwMCA9IHVzV2VpZ2h0Q2xhc3MgZm9yIE5vcm1hbCAtIFJlZ3VsYXIgZm9udCkKCQkJJGZtZXRyaWNbJ1N0ZW1WJ10gPSByb3VuZCgoNzAgKiAkdXNXZWlnaHRDbGFzcykgLyA0MDApOwoJCQkkZm1ldHJpY1snU3RlbUgnXSA9IHJvdW5kKCgzMCAqICR1c1dlaWdodENsYXNzKSAvIDQwMCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJJG9mZnNldCArPSAyOyAvLyB1c1dpZHRoQ2xhc3MKCQkJJGZzVHlwZSA9IFRDUERGX1NUQVRJQzo6X2dldFNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJJG9mZnNldCArPSAyOwoJCQlpZiAoJGZzVHlwZSA9PSAyKSB7CgkJCQkvLyBUaGlzIEZvbnQgY2Fubm90IGJlIG1vZGlmaWVkLCBlbWJlZGRlZCBvciBleGNoYW5nZWQgaW4gYW55IG1hbm5lciB3aXRob3V0IGZpcnN0IG9idGFpbmluZyBwZXJtaXNzaW9uIG9mIHRoZSBsZWdhbCBvd25lci4KCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCQkvLyAtLS0tLS0tLS0tIGdldCBmb250IG5hbWUgLS0tLS0tLS0tLQoJCQkkZm1ldHJpY1snbmFtZSddID0gJyc7CgkJCSRvZmZzZXQgPSAkdGFibGVbJ25hbWUnXVsnb2Zmc2V0J107CgkJCSRvZmZzZXQgKz0gMjsgLy8gc2tpcCBGb3JtYXQgc2VsZWN0b3IgKD0wKS4KCQkJLy8gTnVtYmVyIG9mIE5hbWVSZWNvcmRzIHRoYXQgZm9sbG93IG4uCgkJCSRudW1OYW1lUmVjb3JkcyA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJLy8gT2Zmc2V0IHRvIHN0YXJ0IG9mIHN0cmluZyBzdG9yYWdlIChmcm9tIHN0YXJ0IG9mIHRhYmxlKS4KCQkJJHN0cmluZ1N0b3JhZ2VPZmZzZXQgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCWZvciAoJGkgPSAwOyAkaSA8ICRudW1OYW1lUmVjb3JkczsgKyskaSkgewoJCQkJJG9mZnNldCArPSA2OyAvLyBza2lwIFBsYXRmb3JtIElELCBQbGF0Zm9ybS1zcGVjaWZpYyBlbmNvZGluZyBJRCwgTGFuZ3VhZ2UgSUQuCgkJCQkvLyBOYW1lIElELgoJCQkJJG5hbWVJRCA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkkb2Zmc2V0ICs9IDI7CgkJCQlpZiAoJG5hbWVJRCA9PSA2KSB7CgkJCQkJLy8gU3RyaW5nIGxlbmd0aCAoaW4gYnl0ZXMpLgoJCQkJCSRzdHJpbmdMZW5ndGggPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkvLyBTdHJpbmcgb2Zmc2V0IGZyb20gc3RhcnQgb2Ygc3RvcmFnZSBhcmVhIChpbiBieXRlcykuCgkJCQkJJHN0cmluZ09mZnNldCA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJJG9mZnNldCArPSAyOwoJCQkJCSRvZmZzZXQgPSAoJHRhYmxlWyduYW1lJ11bJ29mZnNldCddICsgJHN0cmluZ1N0b3JhZ2VPZmZzZXQgKyAkc3RyaW5nT2Zmc2V0KTsKCQkJCQkkZm1ldHJpY1snbmFtZSddID0gc3Vic3RyKCRmb250LCAkb2Zmc2V0LCAkc3RyaW5nTGVuZ3RoKTsKCQkJCQkkZm1ldHJpY1snbmFtZSddID0gcHJlZ19yZXBsYWNlKCcvW15hLXpBLVowLTlfXC1dLycsICcnLCAkZm1ldHJpY1snbmFtZSddKTsKCQkJCQlicmVhazsKCQkJCX0gZWxzZSB7CgkJCQkJJG9mZnNldCArPSA0OyAvLyBza2lwIFN0cmluZyBsZW5ndGgsIFN0cmluZyBvZmZzZXQKCQkJCX0KCQkJfQoJCQlpZiAoZW1wdHkoJGZtZXRyaWNbJ25hbWUnXSkpIHsKCQkJCSRmbWV0cmljWyduYW1lJ10gPSAkZm9udF9uYW1lOwoJCQl9CgkJCS8vIC0tLS0tLS0tLS0gZ2V0IHBvc3QgZGF0YSAtLS0tLS0tLS0tCgkJCSRvZmZzZXQgPSAkdGFibGVbJ3Bvc3QnXVsnb2Zmc2V0J107CgkJCSRvZmZzZXQgKz0gNDsgLy8gc2tpcCBGb3JtYXQgVHlwZQoJCQkkZm1ldHJpY1snaXRhbGljQW5nbGUnXSA9IFRDUERGX1NUQVRJQzo6X2dldEZJWEVEKCRmb250LCAkb2Zmc2V0KTsKCQkJJG9mZnNldCArPSA0OwoJCQkkZm1ldHJpY1sndW5kZXJsaW5lUG9zaXRpb24nXSA9IHJvdW5kKFRDUERGX1NUQVRJQzo6X2dldEZXT1JEKCRmb250LCAkb2Zmc2V0KSAqICR1cmspOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCSRmbWV0cmljWyd1bmRlcmxpbmVUaGlja25lc3MnXSA9IHJvdW5kKFRDUERGX1NUQVRJQzo6X2dldEZXT1JEKCRmb250LCAkb2Zmc2V0KSAqICR1cmspOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCSRpc0ZpeGVkUGl0Y2ggPSAoVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpID09IDApID8gZmFsc2UgOiB0cnVlOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCWlmICgkaXNGaXhlZFBpdGNoKSB7CgkJCQkkZm1ldHJpY1snRmxhZ3MnXSB8PSAxOwoJCQl9CgkJCS8vIC0tLS0tLS0tLS0gZ2V0IGhoZWEgZGF0YSAtLS0tLS0tLS0tCgkJCSRvZmZzZXQgPSAkdGFibGVbJ2hoZWEnXVsnb2Zmc2V0J107CgkJCSRvZmZzZXQgKz0gNDsgLy8gc2tpcCBUYWJsZSB2ZXJzaW9uIG51bWJlcgoJCQkvLyBBc2NlbmRlcgoJCQkkZm1ldHJpY1snQXNjZW50J10gPSByb3VuZChUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCkgKiAkdXJrKTsKCQkJJG9mZnNldCArPSAyOwoJCQkvLyBEZXNjZW5kZXIKCQkJJGZtZXRyaWNbJ0Rlc2NlbnQnXSA9IHJvdW5kKFRDUERGX1NUQVRJQzo6X2dldEZXT1JEKCRmb250LCAkb2Zmc2V0KSAqICR1cmspOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCS8vIExpbmVHYXAKCQkJJGZtZXRyaWNbJ0xlYWRpbmcnXSA9IHJvdW5kKFRDUERGX1NUQVRJQzo6X2dldEZXT1JEKCRmb250LCAkb2Zmc2V0KSAqICR1cmspOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCS8vIGFkdmFuY2VXaWR0aE1heAoJCQkkZm1ldHJpY1snTWF4V2lkdGgnXSA9IHJvdW5kKFRDUERGX1NUQVRJQzo6X2dldFVGV09SRCgkZm9udCwgJG9mZnNldCkgKiAkdXJrKTsKCQkJJG9mZnNldCArPSAyOwoJCQkkb2Zmc2V0ICs9IDIyOyAvLyBza2lwIHNvbWUgdmFsdWVzCgkJCS8vIGdldCB0aGUgbnVtYmVyIG9mIGhNZXRyaWMgZW50cmllcyBpbiBobXR4IHRhYmxlCgkJCSRudW1iZXJPZkhNZXRyaWNzID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJLy8gLS0tLS0tLS0tLSBnZXQgbWF4cCBkYXRhIC0tLS0tLS0tLS0KCQkJJG9mZnNldCA9ICR0YWJsZVsnbWF4cCddWydvZmZzZXQnXTsKCQkJJG9mZnNldCArPSA0OyAvLyBza2lwIFRhYmxlIHZlcnNpb24gbnVtYmVyCgkJCS8vIGdldCB0aGUgdGhlIG51bWJlciBvZiBnbHlwaHMgaW4gdGhlIGZvbnQuCgkJCSRudW1HbHlwaHMgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkvLyAtLS0tLS0tLS0tIGdldCBDSURUb0dJRE1hcCAtLS0tLS0tLS0tCgkJCSRjdGcgPSBhcnJheSgpOwoJCQkkYyA9IDA7CgkJCWZvcmVhY2ggKCRlbmNvZGluZ1RhYmxlcyBhcyAkZW5jdGFibGUpIHsKCQkJCS8vIGdldCBvbmx5IHNwZWNpZmllZCBQbGF0Zm9ybSBJRCBhbmQgRW5jb2RpbmcgSUQKCQkJCWlmICgoJGVuY3RhYmxlWydwbGF0Zm9ybUlEJ10gPT0gJHBsYXRpZCkgQU5EICgkZW5jdGFibGVbJ2VuY29kaW5nSUQnXSA9PSAkZW5jaWQpKSB7CgkJCQkJJG9mZnNldCA9ICR0YWJsZVsnY21hcCddWydvZmZzZXQnXSArICRlbmN0YWJsZVsnb2Zmc2V0J107CgkJCQkJJGZvcm1hdCA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJJG9mZnNldCArPSAyOwoJCQkJCXN3aXRjaCAoJGZvcm1hdCkgewoJCQkJCQljYXNlIDA6IHsgLy8gRm9ybWF0IDA6IEJ5dGUgZW5jb2RpbmcgdGFibGUKCQkJCQkJCSRvZmZzZXQgKz0gNDsgLy8gc2tpcCBsZW5ndGggYW5kIHZlcnNpb24vbGFuZ3VhZ2UKCQkJCQkJCWZvciAoJGMgPSAwOyAkYyA8IDI1NjsgKyskYykgewoJCQkJCQkJCSRnID0gVENQREZfU1RBVElDOjpfZ2V0QllURSgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJJGN0Z1skY10gPSAkZzsKCQkJCQkJCQkrKyRvZmZzZXQ7CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCQljYXNlIDI6IHsgLy8gRm9ybWF0IDI6IEhpZ2gtYnl0ZSBtYXBwaW5nIHRocm91Z2ggdGFibGUKCQkJCQkJCSRvZmZzZXQgKz0gNDsgLy8gc2tpcCBsZW5ndGggYW5kIHZlcnNpb24vbGFuZ3VhZ2UKCQkJCQkJCSRudW1TdWJIZWFkZXJzID0gMDsKCQkJCQkJCWZvciAoJGkgPSAwOyAkaSA8IDI1NjsgKyskaSkgewoJCQkJCQkJCS8vIEFycmF5IHRoYXQgbWFwcyBoaWdoIGJ5dGVzIHRvIHN1YkhlYWRlcnM6IHZhbHVlIGlzIHN1YkhlYWRlciBpbmRleCAqIDguCgkJCQkJCQkJJHN1YkhlYWRlcktleXNbJGldID0gKFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCkgLyA4KTsKCQkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQkJaWYgKCRudW1TdWJIZWFkZXJzIDwgJHN1YkhlYWRlcktleXNbJGldKSB7CgkJCQkJCQkJCSRudW1TdWJIZWFkZXJzID0gJHN1YkhlYWRlcktleXNbJGldOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCS8vIHRoZSBudW1iZXIgb2Ygc3ViSGVhZGVycyBpcyBlcXVhbCB0byB0aGUgbWF4IG9mIHN1YkhlYWRlcktleXMgKyAxCgkJCQkJCQkrKyRudW1TdWJIZWFkZXJzOwoJCQkJCQkJLy8gcmVhZCBzdWJIZWFkZXIgc3RydWN0dXJlcwoJCQkJCQkJJHN1YkhlYWRlcnMgPSBhcnJheSgpOwoJCQkJCQkJJG51bUdseXBoSW5kZXhBcnJheSA9IDA7CgkJCQkJCQlmb3IgKCRrID0gMDsgJGsgPCAkbnVtU3ViSGVhZGVyczsgKyskaykgewoJCQkJCQkJCSRzdWJIZWFkZXJzWyRrXVsnZmlyc3RDb2RlJ10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCQkkc3ViSGVhZGVyc1ska11bJ2VudHJ5Q291bnQnXSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCQkJCSRzdWJIZWFkZXJzWyRrXVsnaWREZWx0YSddID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQkJJHN1YkhlYWRlcnNbJGtdWydpZFJhbmdlT2Zmc2V0J10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCQkkc3ViSGVhZGVyc1ska11bJ2lkUmFuZ2VPZmZzZXQnXSAtPSAoMiArICgoJG51bVN1YkhlYWRlcnMgLSAkayAtIDEpICogOCkpOwoJCQkJCQkJCSRzdWJIZWFkZXJzWyRrXVsnaWRSYW5nZU9mZnNldCddIC89IDI7CgkJCQkJCQkJJG51bUdseXBoSW5kZXhBcnJheSArPSAkc3ViSGVhZGVyc1ska11bJ2VudHJ5Q291bnQnXTsKCQkJCQkJCX0KCQkJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRudW1HbHlwaEluZGV4QXJyYXk7ICsrJGspIHsKCQkJCQkJCQkkZ2x5cGhJbmRleEFycmF5WyRrXSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCQkJfQoJCQkJCQkJZm9yICgkaSA9IDA7ICRpIDwgMjU2OyArKyRpKSB7CgkJCQkJCQkJJGsgPSAkc3ViSGVhZGVyS2V5c1skaV07CgkJCQkJCQkJaWYgKCRrID09IDApIHsKCQkJCQkJCQkJLy8gb25lIGJ5dGUgY29kZQoJCQkJCQkJCQkkYyA9ICRpOwoJCQkJCQkJCQkkZyA9ICRnbHlwaEluZGV4QXJyYXlbMF07CgkJCQkJCQkJCSRjdGdbJGNdID0gJGc7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJLy8gdHdvIGJ5dGVzIGNvZGUKCQkJCQkJCQkJJHN0YXJ0X2J5dGUgPSAkc3ViSGVhZGVyc1ska11bJ2ZpcnN0Q29kZSddOwoJCQkJCQkJCQkkZW5kX2J5dGUgPSAkc3RhcnRfYnl0ZSArICRzdWJIZWFkZXJzWyRrXVsnZW50cnlDb3VudCddOwoJCQkJCQkJCQlmb3IgKCRqID0gJHN0YXJ0X2J5dGU7ICRqIDwgJGVuZF9ieXRlOyArKyRqKSB7CgkJCQkJCQkJCQkvLyBjb21iaW5lIGhpZ2ggYW5kIGxvdyBieXRlcwoJCQkJCQkJCQkJJGMgPSAoKCRpIDw8IDgpICsgJGopOwoJCQkJCQkJCQkJJGlkUmFuZ2VPZmZzZXQgPSAoJHN1YkhlYWRlcnNbJGtdWydpZFJhbmdlT2Zmc2V0J10gKyAkaiAtICRzdWJIZWFkZXJzWyRrXVsnZmlyc3RDb2RlJ10pOwoJCQkJCQkJCQkJJGcgPSAoJGdseXBoSW5kZXhBcnJheVskaWRSYW5nZU9mZnNldF0gKyAkc3ViSGVhZGVyc1ska11bJ2lkRGVsdGEnXSkgJSA2NTUzNjsKCQkJCQkJCQkJCWlmICgkZyA8IDApIHsKCQkJCQkJCQkJCQkkZyA9IDA7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCQkkY3RnWyRjXSA9ICRnOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQkJY2FzZSA0OiB7IC8vIEZvcm1hdCA0OiBTZWdtZW50IG1hcHBpbmcgdG8gZGVsdGEgdmFsdWVzCgkJCQkJCQkkbGVuZ3RoID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCSRvZmZzZXQgKz0gMjsgLy8gc2tpcCB2ZXJzaW9uL2xhbmd1YWdlCgkJCQkJCQkkc2VnQ291bnQgPSBmbG9vcihUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpIC8gMik7CgkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQkkb2Zmc2V0ICs9IDY7IC8vIHNraXAgc2VhcmNoUmFuZ2UsIGVudHJ5U2VsZWN0b3IsIHJhbmdlU2hpZnQKCQkJCQkJCSRlbmRDb3VudCA9IGFycmF5KCk7IC8vIGFycmF5IG9mIGVuZCBjaGFyYWN0ZXIgY29kZXMgZm9yIGVhY2ggc2VnbWVudAoJCQkJCQkJZm9yICgkayA9IDA7ICRrIDwgJHNlZ0NvdW50OyArKyRrKSB7CgkJCQkJCQkJJGVuZENvdW50WyRrXSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCQkJfQoJCQkJCQkJJG9mZnNldCArPSAyOyAvLyBza2lwIHJlc2VydmVkUGFkCgkJCQkJCQkkc3RhcnRDb3VudCA9IGFycmF5KCk7IC8vIGFycmF5IG9mIHN0YXJ0IGNoYXJhY3RlciBjb2RlcyBmb3IgZWFjaCBzZWdtZW50CgkJCQkJCQlmb3IgKCRrID0gMDsgJGsgPCAkc2VnQ291bnQ7ICsrJGspIHsKCQkJCQkJCQkkc3RhcnRDb3VudFska10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCX0KCQkJCQkJCSRpZERlbHRhID0gYXJyYXkoKTsgLy8gZGVsdGEgZm9yIGFsbCBjaGFyYWN0ZXIgY29kZXMgaW4gc2VnbWVudAoJCQkJCQkJZm9yICgkayA9IDA7ICRrIDwgJHNlZ0NvdW50OyArKyRrKSB7CgkJCQkJCQkJJGlkRGVsdGFbJGtdID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQl9CgkJCQkJCQkkaWRSYW5nZU9mZnNldCA9IGFycmF5KCk7IC8vIE9mZnNldHMgaW50byBnbHlwaElkQXJyYXkgb3IgMAoJCQkJCQkJZm9yICgkayA9IDA7ICRrIDwgJHNlZ0NvdW50OyArKyRrKSB7CgkJCQkJCQkJJGlkUmFuZ2VPZmZzZXRbJGtdID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQl9CgkJCQkJCQkkZ2lkbGVuID0gKGZsb29yKCRsZW5ndGggLyAyKSAtIDggLSAoNCAqICRzZWdDb3VudCkpOwoJCQkJCQkJJGdseXBoSWRBcnJheSA9IGFycmF5KCk7IC8vIGdseXBoIGluZGV4IGFycmF5CgkJCQkJCQlmb3IgKCRrID0gMDsgJGsgPCAkZ2lkbGVuOyArKyRrKSB7CgkJCQkJCQkJJGdseXBoSWRBcnJheVska10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCX0KCQkJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRzZWdDb3VudCAtIDE7ICsrJGspIHsKCQkJCQkJCQlmb3IgKCRjID0gJHN0YXJ0Q291bnRbJGtdOyAkYyA8PSAkZW5kQ291bnRbJGtdOyArKyRjKSB7CgkJCQkJCQkJCWlmICgkaWRSYW5nZU9mZnNldFska10gPT0gMCkgewoJCQkJCQkJCQkJJGcgPSAoJGlkRGVsdGFbJGtdICsgJGMpICUgNjU1MzY7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkkZ2lkID0gKGZsb29yKCRpZFJhbmdlT2Zmc2V0WyRrXSAvIDIpICsgKCRjIC0gJHN0YXJ0Q291bnRbJGtdKSAtICgkc2VnQ291bnQgLSAkaykpOwoJCQkJCQkJCQkJJGcgPSAoJGdseXBoSWRBcnJheVskZ2lkXSArICRpZERlbHRhWyRrXSkgJSA2NTUzNjsKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAoJGcgPCAwKSB7CgkJCQkJCQkJCQkkZyA9IDA7CgkJCQkJCQkJCX0KCQkJCQkJCQkJJGN0Z1skY10gPSAkZzsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCQljYXNlIDY6IHsgLy8gRm9ybWF0IDY6IFRyaW1tZWQgdGFibGUgbWFwcGluZwoJCQkJCQkJJG9mZnNldCArPSA0OyAvLyBza2lwIGxlbmd0aCBhbmQgdmVyc2lvbi9sYW5ndWFnZQoJCQkJCQkJJGZpcnN0Q29kZSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQkkZW50cnlDb3VudCA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQlmb3IgKCRrID0gMDsgJGsgPCAkZW50cnlDb3VudDsgKyskaykgewoJCQkJCQkJCSRjID0gKCRrICsgJGZpcnN0Q29kZSk7CgkJCQkJCQkJJGcgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCQkkY3RnWyRjXSA9ICRnOwoJCQkJCQkJfQoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQkJY2FzZSA4OiB7IC8vIEZvcm1hdCA4OiBNaXhlZCAxNi1iaXQgYW5kIDMyLWJpdCBjb3ZlcmFnZQoJCQkJCQkJJG9mZnNldCArPSAxMDsgLy8gc2tpcCByZXNlcnZlZCwgbGVuZ3RoIGFuZCB2ZXJzaW9uL2xhbmd1YWdlCgkJCQkJCQlmb3IgKCRrID0gMDsgJGsgPCA4MTkyOyArKyRrKSB7CgkJCQkJCQkJJGlzMzJbJGtdID0gVENQREZfU1RBVElDOjpfZ2V0QllURSgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJKyskb2Zmc2V0OwoJCQkJCQkJfQoJCQkJCQkJJG5Hcm91cHMgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkkb2Zmc2V0ICs9IDQ7CgkJCQkJCQlmb3IgKCRpID0gMDsgJGkgPCAkbkdyb3VwczsgKyskaSkgewoJCQkJCQkJCSRzdGFydENoYXJDb2RlID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJCQkkZW5kQ2hhckNvZGUgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJJG9mZnNldCArPSA0OwoJCQkJCQkJCSRzdGFydEdseXBoSUQgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJJG9mZnNldCArPSA0OwoJCQkJCQkJCWZvciAoJGsgPSAkc3RhcnRDaGFyQ29kZTsgJGsgPD0gJGVuZENoYXJDb2RlOyArKyRrKSB7CgkJCQkJCQkJCSRpczMyaWR4ID0gZmxvb3IoJGMgLyA4KTsKCQkJCQkJCQkJaWYgKChpc3NldCgkaXMzMlskaXMzMmlkeF0pKSBBTkQgKCgkaXMzMlskaXMzMmlkeF0gJiAoMSA8PCAoNyAtICgkYyAlIDgpKSkpID09IDApKSB7CgkJCQkJCQkJCQkkYyA9ICRrOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJLy8gMzIgYml0IGZvcm1hdAoJCQkJCQkJCQkJLy8gY29udmVydCB0byBkZWNpbWFsIChodHRwOi8vd3d3LnVuaWNvZGUub3JnL2ZhcS8vdXRmX2JvbS5odG1sI3V0ZjE2LTQpCgkJCQkJCQkJCQkvL0xFQURfT0ZGU0VUID0gKDB4RDgwMCAtICgweDEwMDAwID4+IDEwKSkgPSA1NTIzMgoJCQkJCQkJCQkJLy9TVVJST0dBVEVfT0ZGU0VUID0gKDB4MTAwMDAgLSAoMHhEODAwIDw8IDEwKSAtIDB4REMwMCkgPSAtNTY2MTM4ODgKCQkJCQkJCQkJCSRjID0gKCg1NTIzMiArICgkayA+PiAxMCkpIDw8IDEwKSArICgweERDMDAgKyAoJGsgJiAweDNGRikpIC01NjYxMzg4ODsKCQkJCQkJCQkJfQoJCQkJCQkJCQkkY3RnWyRjXSA9IDA7CgkJCQkJCQkJCSsrJHN0YXJ0R2x5cGhJRDsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCQljYXNlIDEwOiB7IC8vIEZvcm1hdCAxMDogVHJpbW1lZCBhcnJheQoJCQkJCQkJJG9mZnNldCArPSAxMDsgLy8gc2tpcCByZXNlcnZlZCwgbGVuZ3RoIGFuZCB2ZXJzaW9uL2xhbmd1YWdlCgkJCQkJCQkkc3RhcnRDaGFyQ29kZSA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJCSRudW1DaGFycyA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRudW1DaGFyczsgKyskaykgewoJCQkJCQkJCSRjID0gKCRrICsgJHN0YXJ0Q2hhckNvZGUpOwoJCQkJCQkJCSRnID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCQkkY3RnWyRjXSA9ICRnOwoJCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCX0KCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJCWNhc2UgMTI6IHsgLy8gRm9ybWF0IDEyOiBTZWdtZW50ZWQgY292ZXJhZ2UKCQkJCQkJCSRvZmZzZXQgKz0gMTA7IC8vIHNraXAgbGVuZ3RoIGFuZCB2ZXJzaW9uL2xhbmd1YWdlCgkJCQkJCQkkbkdyb3VwcyA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRuR3JvdXBzOyArKyRrKSB7CgkJCQkJCQkJJHN0YXJ0Q2hhckNvZGUgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkJJG9mZnNldCArPSA0OwoJCQkJCQkJCSRlbmRDaGFyQ29kZSA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCQkkb2Zmc2V0ICs9IDQ7CgkJCQkJCQkJJHN0YXJ0R2x5cGhDb2RlID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJCQlmb3IgKCRjID0gJHN0YXJ0Q2hhckNvZGU7ICRjIDw9ICRlbmRDaGFyQ29kZTsgKyskYykgewoJCQkJCQkJCQkkY3RnWyRjXSA9ICRzdGFydEdseXBoQ29kZTsKCQkJCQkJCQkJKyskc3RhcnRHbHlwaENvZGU7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQkJY2FzZSAxMzogeyAvLyBGb3JtYXQgMTM6IE1hbnktdG8tb25lIHJhbmdlIG1hcHBpbmdzCgkJCQkJCQkvLyB0byBiZSBpbXBsZW1lbnRlZCAuLi4KCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJCWNhc2UgMTQ6IHsgLy8gRm9ybWF0IDE0OiBVbmljb2RlIFZhcmlhdGlvbiBTZXF1ZW5jZXMKCQkJCQkJCS8vIHRvIGJlIGltcGxlbWVudGVkIC4uLgoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQkJaWYgKCFpc3NldCgkY3RnWzBdKSkgewoJCQkJJGN0Z1swXSA9IDA7CgkJCX0KCQkJLy8gZ2V0IHhIZWlnaHQgKGhlaWdodCBvZiB4KQoJCQkkb2Zmc2V0ID0gKCR0YWJsZVsnZ2x5ZiddWydvZmZzZXQnXSArICRpbmRleFRvTG9jWyRjdGdbMTIwXV0gKyA0KTsKCQkJJHlNaW4gPSBUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gNDsKCQkJJHlNYXggPSBUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJJGZtZXRyaWNbJ1hIZWlnaHQnXSA9IHJvdW5kKCgkeU1heCAtICR5TWluKSAqICR1cmspOwoJCQkvLyBnZXQgQ2FwSGVpZ2h0IChoZWlnaHQgb2YgSCkKCQkJJG9mZnNldCA9ICgkdGFibGVbJ2dseWYnXVsnb2Zmc2V0J10gKyAkaW5kZXhUb0xvY1skY3RnWzcyXV0gKyA0KTsKCQkJJHlNaW4gPSBUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gNDsKCQkJJHlNYXggPSBUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJJGZtZXRyaWNbJ0NhcEhlaWdodCddID0gcm91bmQoKCR5TWF4IC0gJHlNaW4pICogJHVyayk7CgkJCS8vIGNlYXRlIHdpZHRocyBhcnJheQoJCQkkY3cgPSBhcnJheSgpOwoJCQkkb2Zmc2V0ID0gJHRhYmxlWydobXR4J11bJ29mZnNldCddOwoJCQlmb3IgKCRpID0gMCA7ICRpIDwgJG51bWJlck9mSE1ldHJpY3M7ICsrJGkpIHsKCQkJCSRjd1skaV0gPSByb3VuZChUQ1BERl9TVEFUSUM6Ol9nZXRVRldPUkQoJGZvbnQsICRvZmZzZXQpICogJHVyayk7CgkJCQkkb2Zmc2V0ICs9IDQ7IC8vIHNraXAgbHNiCgkJCX0KCQkJaWYgKCRudW1iZXJPZkhNZXRyaWNzIDwgJG51bUdseXBocykgewoJCQkJLy8gZmlsbCBtaXNzaW5nIHdpZHRocyB3aXRoIHRoZSBsYXN0IHZhbHVlCgkJCQkkY3cgPSBhcnJheV9wYWQoJGN3LCAkbnVtR2x5cGhzLCAkY3dbKCRudW1iZXJPZkhNZXRyaWNzIC0gMSldKTsKCQkJfQoJCQkkZm1ldHJpY1snTWlzc2luZ1dpZHRoJ10gPSAkY3dbMF07CgkJCSRmbWV0cmljWydjdyddID0gJyc7CgkJCSRmbWV0cmljWydjYmJveCddID0gJyc7CgkJCWZvciAoJGNpZCA9IDA7ICRjaWQgPD0gNjU1MzU7ICsrJGNpZCkgewoJCQkJaWYgKGlzc2V0KCRjdGdbJGNpZF0pKSB7CgkJCQkJaWYgKGlzc2V0KCRjd1skY3RnWyRjaWRdXSkpIHsKCQkJCQkJJGZtZXRyaWNbJ2N3J10gLj0gJywnLiRjaWQuJz0+Jy4kY3dbJGN0Z1skY2lkXV07CgkJCQkJfQoJCQkJCWlmICgkYWRkY2Jib3ggQU5EIGlzc2V0KCRpbmRleFRvTG9jWyRjdGdbJGNpZF1dKSkgewoJCQkJCQkkb2Zmc2V0ID0gKCR0YWJsZVsnZ2x5ZiddWydvZmZzZXQnXSArICRpbmRleFRvTG9jWyRjdGdbJGNpZF1dKTsKCQkJCQkJJHhNaW4gPSByb3VuZChUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCArIDIpICogJHVyayk7CgkJCQkJCSR5TWluID0gcm91bmQoVENQREZfU1RBVElDOjpfZ2V0RldPUkQoJGZvbnQsICRvZmZzZXQgKyA0KSAqICR1cmspOwoJCQkJCQkkeE1heCA9IHJvdW5kKFRDUERGX1NUQVRJQzo6X2dldEZXT1JEKCRmb250LCAkb2Zmc2V0ICsgNikgKiAkdXJrKTsKCQkJCQkJJHlNYXggPSByb3VuZChUQ1BERl9TVEFUSUM6Ol9nZXRGV09SRCgkZm9udCwgJG9mZnNldCArIDgpICogJHVyayk7CgkJCQkJCSRmbWV0cmljWydjYmJveCddIC49ICcsJy4kY2lkLic9PmFycmF5KCcuJHhNaW4uJywnLiR5TWluLicsJy4keE1heC4nLCcuJHlNYXguJyknOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0gLy8gZW5kIG9mIHRydWUgdHlwZQoJCWlmICgoJGZtZXRyaWNbJ3R5cGUnXSA9PSAnVHJ1ZVR5cGVVbmljb2RlJykgQU5EIChjb3VudCgkY3RnKSA9PSAyNTYpKSB7CgkJCSRmbWV0cmljWyd0eXBlJ10gPSAnVHJ1ZVR5cGUnOwoJCX0KCQkvLyAtLS0tLS0tLS0tIGNyZWF0ZSBwaHAgZm9udCBmaWxlIC0tLS0tLS0tLS0KCQkkcGZpbGUgPSAnPCcuJz8nLidwaHAnLiJcbiI7CgkJJHBmaWxlIC49ICcvLyBUQ1BERiBGT05UIEZJTEUgREVTQ1JJUFRJT04nLiJcbiI7CgkJJHBmaWxlIC49ICckdHlwZT1cJycuJGZtZXRyaWNbJ3R5cGUnXS4nXCc7Jy4iXG4iOwoJCSRwZmlsZSAuPSAnJG5hbWU9XCcnLiRmbWV0cmljWyduYW1lJ10uJ1wnOycuIlxuIjsKCQkkcGZpbGUgLj0gJyR1cD0nLiRmbWV0cmljWyd1bmRlcmxpbmVQb3NpdGlvbiddLic7Jy4iXG4iOwoJCSRwZmlsZSAuPSAnJHV0PScuJGZtZXRyaWNbJ3VuZGVybGluZVRoaWNrbmVzcyddLic7Jy4iXG4iOwoJCWlmICgkZm1ldHJpY1snTWlzc2luZ1dpZHRoJ10gPiAwKSB7CgkJCSRwZmlsZSAuPSAnJGR3PScuJGZtZXRyaWNbJ01pc3NpbmdXaWR0aCddLic7Jy4iXG4iOwoJCX0gZWxzZSB7CgkJCSRwZmlsZSAuPSAnJGR3PScuJGZtZXRyaWNbJ0F2Z1dpZHRoJ10uJzsnLiJcbiI7CgkJfQoJCSRwZmlsZSAuPSAnJGRpZmY9XCcnLiRmbWV0cmljWydkaWZmJ10uJ1wnOycuIlxuIjsKCQlpZiAoJGZtZXRyaWNbJ3R5cGUnXSA9PSAnVHlwZTEnKSB7CgkJCS8vIFR5cGUgMQoJCQkkcGZpbGUgLj0gJyRlbmM9XCcnLiRmbWV0cmljWydlbmMnXS4nXCc7Jy4iXG4iOwoJCQkkcGZpbGUgLj0gJyRmaWxlPVwnJy4kZm1ldHJpY1snZmlsZSddLidcJzsnLiJcbiI7CgkJCSRwZmlsZSAuPSAnJHNpemUxPScuJGZtZXRyaWNbJ3NpemUxJ10uJzsnLiJcbiI7CgkJCSRwZmlsZSAuPSAnJHNpemUyPScuJGZtZXRyaWNbJ3NpemUyJ10uJzsnLiJcbiI7CgkJfSBlbHNlIHsKCQkJJHBmaWxlIC49ICckb3JpZ2luYWxzaXplPScuJGZtZXRyaWNbJ29yaWdpbmFsc2l6ZSddLic7Jy4iXG4iOwoJCQlpZiAoJGZtZXRyaWNbJ3R5cGUnXSA9PSAnY2lkZm9udDAnKSB7CgkJCQkvLyBDSUQtMAoJCQkJc3dpdGNoICgkZm9udHR5cGUpIHsKCQkJCQljYXNlICdDSUQwSlAnOiB7CgkJCQkJCSRwZmlsZSAuPSAnLy8gSmFwYW5lc2UnLiJcbiI7CgkJCQkJCSRwZmlsZSAuPSAnJGVuYz1cJ1VuaUpJUy1VVEYxNi1IXCc7Jy4iXG4iOwoJCQkJCQkkcGZpbGUgLj0gJyRjaWRpbmZvPWFycmF5KFwnUmVnaXN0cnlcJz0+XCdBZG9iZVwnLCBcJ09yZGVyaW5nXCc9PlwnSmFwYW4xXCcsXCdTdXBwbGVtZW50XCc9PjUpOycuIlxuIjsKCQkJCQkJJHBmaWxlIC49ICdpbmNsdWRlKGRpcm5hbWUoX19GSUxFX18pLlwnL3VuaTJjaWRfYWoxNi5waHBcJyk7Jy4iXG4iOwoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQkJY2FzZSAnQ0lEMEtSJzogewoJCQkJCQkkcGZpbGUgLj0gJy8vIEtvcmVhbicuIlxuIjsKCQkJCQkJJHBmaWxlIC49ICckZW5jPVwnVW5pS1MtVVRGMTYtSFwnOycuIlxuIjsKCQkJCQkJJHBmaWxlIC49ICckY2lkaW5mbz1hcnJheShcJ1JlZ2lzdHJ5XCc9PlwnQWRvYmVcJywgXCdPcmRlcmluZ1wnPT5cJ0tvcmVhMVwnLFwnU3VwcGxlbWVudFwnPT4wKTsnLiJcbiI7CgkJCQkJCSRwZmlsZSAuPSAnaW5jbHVkZShkaXJuYW1lKF9fRklMRV9fKS5cJy91bmkyY2lkX2FrMTIucGhwXCcpOycuIlxuIjsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJCWNhc2UgJ0NJRDBDUyc6IHsKCQkJCQkJJHBmaWxlIC49ICcvLyBDaGluZXNlIFNpbXBsaWZpZWQnLiJcbiI7CgkJCQkJCSRwZmlsZSAuPSAnJGVuYz1cJ1VuaUdCLVVURjE2LUhcJzsnLiJcbiI7CgkJCQkJCSRwZmlsZSAuPSAnJGNpZGluZm89YXJyYXkoXCdSZWdpc3RyeVwnPT5cJ0Fkb2JlXCcsIFwnT3JkZXJpbmdcJz0+XCdHQjFcJyxcJ1N1cHBsZW1lbnRcJz0+Mik7Jy4iXG4iOwoJCQkJCQkkcGZpbGUgLj0gJ2luY2x1ZGUoZGlybmFtZShfX0ZJTEVfXykuXCcvdW5pMmNpZF9hZzE1LnBocFwnKTsnLiJcbiI7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCQljYXNlICdDSUQwQ1QnOgoJCQkJCWRlZmF1bHQ6IHsKCQkJCQkJJHBmaWxlIC49ICcvLyBDaGluZXNlIFRyYWRpdGlvbmFsJy4iXG4iOwoJCQkJCQkkcGZpbGUgLj0gJyRlbmM9XCdVbmlDTlMtVVRGMTYtSFwnOycuIlxuIjsKCQkJCQkJJHBmaWxlIC49ICckY2lkaW5mbz1hcnJheShcJ1JlZ2lzdHJ5XCc9PlwnQWRvYmVcJywgXCdPcmRlcmluZ1wnPT5cJ0NOUzFcJyxcJ1N1cHBsZW1lbnRcJz0+MCk7Jy4iXG4iOwoJCQkJCQkkcGZpbGUgLj0gJ2luY2x1ZGUoZGlybmFtZShfX0ZJTEVfXykuXCcvdW5pMmNpZF9hajE2LnBocFwnKTsnLiJcbiI7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCS8vIFRydWVUeXBlCgkJCQkkcGZpbGUgLj0gJyRlbmM9XCcnLiRmbWV0cmljWydlbmMnXS4nXCc7Jy4iXG4iOwoJCQkJJHBmaWxlIC49ICckZmlsZT1cJycuJGZtZXRyaWNbJ2ZpbGUnXS4nXCc7Jy4iXG4iOwoJCQkJJHBmaWxlIC49ICckY3RnPVwnJy4kZm1ldHJpY1snY3RnJ10uJ1wnOycuIlxuIjsKCQkJCS8vIGNyZWF0ZSBDSURUb0dJRE1hcAoJCQkJJGNpZHRvZ2lkbWFwID0gc3RyX3BhZCgnJywgMTMxMDcyLCAiXHgwMCIpOyAvLyAoMjU2ICogMjU2ICogMikgPSAxMzEwNzIKCQkJCWZvcmVhY2ggKCRjdGcgYXMgJGNpZCA9PiAkZ2lkKSB7CgkJCQkJJGNpZHRvZ2lkbWFwID0gc2VsZjo6dXBkYXRlQ0lEdG9HSURtYXAoJGNpZHRvZ2lkbWFwLCAkY2lkLCAkY3RnWyRjaWRdKTsKCQkJCX0KCQkJCS8vIHN0b3JlIGNvbXByZXNzZWQgQ0lEVG9HSURNYXAKCQkJCSRmcCA9IFRDUERGX1NUQVRJQzo6Zm9wZW5Mb2NhbCgkb3V0cGF0aC4kZm1ldHJpY1snY3RnJ10sICd3YicpOwoJCQkJZndyaXRlKCRmcCwgZ3pjb21wcmVzcygkY2lkdG9naWRtYXApKTsKCQkJCWZjbG9zZSgkZnApOwoJCQl9CgkJfQoJCSRwZmlsZSAuPSAnJGRlc2M9YXJyYXkoJzsKCQkkcGZpbGUgLj0gJ1wnRmxhZ3NcJz0+Jy4kZm1ldHJpY1snRmxhZ3MnXS4nLCc7CgkJJHBmaWxlIC49ICdcJ0ZvbnRCQm94XCc9PlwnWycuJGZtZXRyaWNbJ2Jib3gnXS4nXVwnLCc7CgkJJHBmaWxlIC49ICdcJ0l0YWxpY0FuZ2xlXCc9PicuJGZtZXRyaWNbJ2l0YWxpY0FuZ2xlJ10uJywnOwoJCSRwZmlsZSAuPSAnXCdBc2NlbnRcJz0+Jy4kZm1ldHJpY1snQXNjZW50J10uJywnOwoJCSRwZmlsZSAuPSAnXCdEZXNjZW50XCc9PicuJGZtZXRyaWNbJ0Rlc2NlbnQnXS4nLCc7CgkJJHBmaWxlIC49ICdcJ0xlYWRpbmdcJz0+Jy4kZm1ldHJpY1snTGVhZGluZyddLicsJzsKCQkkcGZpbGUgLj0gJ1wnQ2FwSGVpZ2h0XCc9PicuJGZtZXRyaWNbJ0NhcEhlaWdodCddLicsJzsKCQkkcGZpbGUgLj0gJ1wnWEhlaWdodFwnPT4nLiRmbWV0cmljWydYSGVpZ2h0J10uJywnOwoJCSRwZmlsZSAuPSAnXCdTdGVtVlwnPT4nLiRmbWV0cmljWydTdGVtViddLicsJzsKCQkkcGZpbGUgLj0gJ1wnU3RlbUhcJz0+Jy4kZm1ldHJpY1snU3RlbUgnXS4nLCc7CgkJJHBmaWxlIC49ICdcJ0F2Z1dpZHRoXCc9PicuJGZtZXRyaWNbJ0F2Z1dpZHRoJ10uJywnOwoJCSRwZmlsZSAuPSAnXCdNYXhXaWR0aFwnPT4nLiRmbWV0cmljWydNYXhXaWR0aCddLicsJzsKCQkkcGZpbGUgLj0gJ1wnTWlzc2luZ1dpZHRoXCc9PicuJGZtZXRyaWNbJ01pc3NpbmdXaWR0aCddLicnOwoJCSRwZmlsZSAuPSAnKTsnLiJcbiI7CgkJaWYgKCFlbXB0eSgkZm1ldHJpY1snY2Jib3gnXSkpIHsKCQkJJHBmaWxlIC49ICckY2Jib3g9YXJyYXkoJy5zdWJzdHIoJGZtZXRyaWNbJ2NiYm94J10sIDEpLicpOycuIlxuIjsKCQl9CgkJJHBmaWxlIC49ICckY3c9YXJyYXkoJy5zdWJzdHIoJGZtZXRyaWNbJ2N3J10sIDEpLicpOycuIlxuIjsKCQkkcGZpbGUgLj0gJy8vIC0tLSBFT0YgLS0tJy4iXG4iOwoJCS8vIHN0b3JlIGZpbGUKCQkkZnAgPSBUQ1BERl9TVEFUSUM6OmZvcGVuTG9jYWwoJG91dHBhdGguJGZvbnRfbmFtZS4nLnBocCcsICd3Jyk7CgkJZndyaXRlKCRmcCwgJHBmaWxlKTsKCQlmY2xvc2UoJGZwKTsKCQkvLyByZXR1cm4gVENQREYgZm9udCBuYW1lCgkJcmV0dXJuICRmb250X25hbWU7Cgl9CgoJLyoqCgkgKiBSZXR1cnMgdGhlIGNoZWNrc3VtIG9mIGEgVFRGIHRhYmxlLgoJICogQHBhcmFtIHN0cmluZyAkdGFibGUgdGFibGUgdG8gY2hlY2sKCSAqIEBwYXJhbSBpbnQgJGxlbmd0aCBsZW5ndGggb2YgdGFibGUgaW4gYnl0ZXMKCSAqIEByZXR1cm4gaW50IGNoZWNrc3VtCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHNpbmNlIDUuMi4wMDAgKDIwMTAtMDYtMDIpCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIF9nZXRUVEZ0YWJsZUNoZWNrc3VtKCR0YWJsZSwgJGxlbmd0aCkgewoJCSRzdW0gPSAwOwoJCSR0bGVuID0gKCRsZW5ndGggLyA0KTsKCQkkb2Zmc2V0ID0gMDsKCQlmb3IgKCRpID0gMDsgJGkgPCAkdGxlbjsgKyskaSkgewoJCQkkdiA9IHVucGFjaygnTmknLCBzdWJzdHIoJHRhYmxlLCAkb2Zmc2V0LCA0KSk7CgkJCSRzdW0gKz0gJHZbJ2knXTsKCQkJJG9mZnNldCArPSA0OwoJCX0KCQkkc3VtID0gdW5wYWNrKCdOaScsIHBhY2soJ04nLCAkc3VtKSk7CgkJcmV0dXJuICRzdW1bJ2knXTsKCX0KCgkvKioKCSAqIFJldHVybnMgYSBzdWJzZXQgb2YgdGhlIFRydWVUeXBlIGZvbnQgZGF0YSB3aXRob3V0IHRoZSB1bnVzZWQgZ2x5cGhzLgoJICogQHBhcmFtIHN0cmluZyAkZm9udCBUcnVlVHlwZSBmb250IGRhdGEuCgkgKiBAcGFyYW0gYXJyYXkgJHN1YnNldGNoYXJzIEFycmF5IG9mIHVzZWQgY2hhcmFjdGVycyAodGhlIGdseXBocyB0byBrZWVwKS4KCSAqIEByZXR1cm4gc3RyaW5nIEEgc3Vic2V0IG9mIFRydWVUeXBlIGZvbnQgZGF0YSB3aXRob3V0IHRoZSB1bnVzZWQgZ2x5cGhzLgoJICogQGF1dGhvciBOaWNvbGEgQXN1bmkKCSAqIEBzaW5jZSA1LjIuMDAwICgyMDEwLTA2LTAyKQoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBfZ2V0VHJ1ZVR5cGVGb250U3Vic2V0KCRmb250LCAkc3Vic2V0Y2hhcnMpIHsKCQlrc29ydCgkc3Vic2V0Y2hhcnMpOwoJCSRvZmZzZXQgPSAwOyAvLyBvZmZzZXQgcG9zaXRpb24gb2YgdGhlIGZvbnQgZGF0YQoJCWlmIChUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCkgIT0gMHgxMDAwMCkgewoJCQkvLyBzZm50IHZlcnNpb24gbXVzdCBiZSAweDAwMDEwMDAwIGZvciBUcnVlVHlwZSB2ZXJzaW9uIDEuMC4KCQkJcmV0dXJuICRmb250OwoJCX0KCQkkYyA9IDA7CgkJJG9mZnNldCArPSA0OwoJCS8vIGdldCBudW1iZXIgb2YgdGFibGVzCgkJJG51bVRhYmxlcyA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJJG9mZnNldCArPSAyOwoJCS8vIHNraXAgc2VhcmNoUmFuZ2UsIGVudHJ5U2VsZWN0b3IgYW5kIHJhbmdlU2hpZnQKCQkkb2Zmc2V0ICs9IDY7CgkJLy8gdGFibGVzIGFycmF5CgkJJHRhYmxlID0gYXJyYXkoKTsKCQkvLyBmb3IgZWFjaCB0YWJsZQoJCWZvciAoJGkgPSAwOyAkaSA8ICRudW1UYWJsZXM7ICsrJGkpIHsKCQkJLy8gZ2V0IHRhYmxlIGluZm8KCQkJJHRhZyA9IHN1YnN0cigkZm9udCwgJG9mZnNldCwgNCk7CgkJCSRvZmZzZXQgKz0gNDsKCQkJJHRhYmxlWyR0YWddID0gYXJyYXkoKTsKCQkJJHRhYmxlWyR0YWddWydjaGVja1N1bSddID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkkb2Zmc2V0ICs9IDQ7CgkJCSR0YWJsZVskdGFnXVsnb2Zmc2V0J10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gNDsKCQkJJHRhYmxlWyR0YWddWydsZW5ndGgnXSA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJJG9mZnNldCArPSA0OwoJCX0KCQkvLyBjaGVjayBtYWdpY051bWJlcgoJCSRvZmZzZXQgPSAkdGFibGVbJ2hlYWQnXVsnb2Zmc2V0J10gKyAxMjsKCQlpZiAoVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpICE9IDB4NUYwRjNDRjUpIHsKCQkJLy8gbWFnaWNOdW1iZXIgbXVzdCBiZSAweDVGMEYzQ0Y1CgkJCXJldHVybiAkZm9udDsKCQl9CgkJJG9mZnNldCArPSA0OwoJCS8vIGdldCBvZmZzZXQgbW9kZSAoaW5kZXhUb0xvY0Zvcm1hdCA6IDAgPSBzaG9ydCwgMSA9IGxvbmcpCgkJJG9mZnNldCA9ICR0YWJsZVsnaGVhZCddWydvZmZzZXQnXSArIDUwOwoJCSRzaG9ydF9vZmZzZXQgPSAoVENQREZfU1RBVElDOjpfZ2V0U0hPUlQoJGZvbnQsICRvZmZzZXQpID09IDApOwoJCSRvZmZzZXQgKz0gMjsKCQkvLyBnZXQgdGhlIG9mZnNldHMgdG8gdGhlIGxvY2F0aW9ucyBvZiB0aGUgZ2x5cGhzIGluIHRoZSBmb250LCByZWxhdGl2ZSB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBnbHlwaERhdGEgdGFibGUKCQkkaW5kZXhUb0xvYyA9IGFycmF5KCk7CgkJJG9mZnNldCA9ICR0YWJsZVsnbG9jYSddWydvZmZzZXQnXTsKCQlpZiAoJHNob3J0X29mZnNldCkgewoJCQkvLyBzaG9ydCB2ZXJzaW9uCgkJCSR0b3RfbnVtX2dseXBocyA9IGZsb29yKCR0YWJsZVsnbG9jYSddWydsZW5ndGgnXSAvIDIpOyAvLyBudW1HbHlwaHMgKyAxCgkJCWZvciAoJGkgPSAwOyAkaSA8ICR0b3RfbnVtX2dseXBoczsgKyskaSkgewoJCQkJJGluZGV4VG9Mb2NbJGldID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KSAqIDI7CgkJCQkkb2Zmc2V0ICs9IDI7CgkJCX0KCQl9IGVsc2UgewoJCQkvLyBsb25nIHZlcnNpb24KCQkJJHRvdF9udW1fZ2x5cGhzID0gKCR0YWJsZVsnbG9jYSddWydsZW5ndGgnXSAvIDQpOyAvLyBudW1HbHlwaHMgKyAxCgkJCWZvciAoJGkgPSAwOyAkaSA8ICR0b3RfbnVtX2dseXBoczsgKyskaSkgewoJCQkJJGluZGV4VG9Mb2NbJGldID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJJG9mZnNldCArPSA0OwoJCQl9CgkJfQoJCS8vIGdldCBnbHlwaHMgaW5kZXhlcyBvZiBjaGFycyBmcm9tIGNtYXAgdGFibGUKCQkkc3Vic2V0Z2x5cGhzID0gYXJyYXkoKTsgLy8gZ2x5cGggSURzIG9uIGtleQoJCSRzdWJzZXRnbHlwaHNbMF0gPSB0cnVlOyAvLyBjaGFyYWN0ZXIgY29kZXMgdGhhdCBkbyBub3QgY29ycmVzcG9uZCB0byBhbnkgZ2x5cGggaW4gdGhlIGZvbnQgc2hvdWxkIGJlIG1hcHBlZCB0byBnbHlwaCBpbmRleCAwCgkJJG9mZnNldCA9ICR0YWJsZVsnY21hcCddWydvZmZzZXQnXSArIDI7CgkJJG51bUVuY29kaW5nVGFibGVzID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkkb2Zmc2V0ICs9IDI7CgkJJGVuY29kaW5nVGFibGVzID0gYXJyYXkoKTsKCQlmb3IgKCRpID0gMDsgJGkgPCAkbnVtRW5jb2RpbmdUYWJsZXM7ICsrJGkpIHsKCQkJJGVuY29kaW5nVGFibGVzWyRpXVsncGxhdGZvcm1JRCddID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJJG9mZnNldCArPSAyOwoJCQkkZW5jb2RpbmdUYWJsZXNbJGldWydlbmNvZGluZ0lEJ10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkkb2Zmc2V0ICs9IDI7CgkJCSRlbmNvZGluZ1RhYmxlc1skaV1bJ29mZnNldCddID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkkb2Zmc2V0ICs9IDQ7CgkJfQoJCWZvcmVhY2ggKCRlbmNvZGluZ1RhYmxlcyBhcyAkZW5jdGFibGUpIHsKCQkJLy8gZ2V0IGFsbCBwbGF0Zm9ybXMgYW5kIGVuY29kaW5ncwoJCQkkb2Zmc2V0ID0gJHRhYmxlWydjbWFwJ11bJ29mZnNldCddICsgJGVuY3RhYmxlWydvZmZzZXQnXTsKCQkJJGZvcm1hdCA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCSRvZmZzZXQgKz0gMjsKCQkJc3dpdGNoICgkZm9ybWF0KSB7CgkJCQljYXNlIDA6IHsgLy8gRm9ybWF0IDA6IEJ5dGUgZW5jb2RpbmcgdGFibGUKCQkJCQkkb2Zmc2V0ICs9IDQ7IC8vIHNraXAgbGVuZ3RoIGFuZCB2ZXJzaW9uL2xhbmd1YWdlCgkJCQkJZm9yICgkYyA9IDA7ICRjIDwgMjU2OyArKyRjKSB7CgkJCQkJCWlmIChpc3NldCgkc3Vic2V0Y2hhcnNbJGNdKSkgewoJCQkJCQkJJGcgPSBUQ1BERl9TVEFUSUM6Ol9nZXRCWVRFKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJCSRzdWJzZXRnbHlwaHNbJGddID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQkrKyRvZmZzZXQ7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJY2FzZSAyOiB7IC8vIEZvcm1hdCAyOiBIaWdoLWJ5dGUgbWFwcGluZyB0aHJvdWdoIHRhYmxlCgkJCQkJJG9mZnNldCArPSA0OyAvLyBza2lwIGxlbmd0aCBhbmQgdmVyc2lvbi9sYW5ndWFnZQoJCQkJCSRudW1TdWJIZWFkZXJzID0gMDsKCQkJCQlmb3IgKCRpID0gMDsgJGkgPCAyNTY7ICsrJGkpIHsKCQkJCQkJLy8gQXJyYXkgdGhhdCBtYXBzIGhpZ2ggYnl0ZXMgdG8gc3ViSGVhZGVyczogdmFsdWUgaXMgc3ViSGVhZGVyIGluZGV4ICogOC4KCQkJCQkJJHN1YkhlYWRlcktleXNbJGldID0gKFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCkgLyA4KTsKCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCQlpZiAoJG51bVN1YkhlYWRlcnMgPCAkc3ViSGVhZGVyS2V5c1skaV0pIHsKCQkJCQkJCSRudW1TdWJIZWFkZXJzID0gJHN1YkhlYWRlcktleXNbJGldOwoJCQkJCQl9CgkJCQkJfQoJCQkJCS8vIHRoZSBudW1iZXIgb2Ygc3ViSGVhZGVycyBpcyBlcXVhbCB0byB0aGUgbWF4IG9mIHN1YkhlYWRlcktleXMgKyAxCgkJCQkJKyskbnVtU3ViSGVhZGVyczsKCQkJCQkvLyByZWFkIHN1YkhlYWRlciBzdHJ1Y3R1cmVzCgkJCQkJJHN1YkhlYWRlcnMgPSBhcnJheSgpOwoJCQkJCSRudW1HbHlwaEluZGV4QXJyYXkgPSAwOwoJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRudW1TdWJIZWFkZXJzOyArKyRrKSB7CgkJCQkJCSRzdWJIZWFkZXJzWyRrXVsnZmlyc3RDb2RlJ10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCSRzdWJIZWFkZXJzWyRrXVsnZW50cnlDb3VudCddID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCQkkc3ViSGVhZGVyc1ska11bJ2lkRGVsdGEnXSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJJHN1YkhlYWRlcnNbJGtdWydpZFJhbmdlT2Zmc2V0J10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCSRzdWJIZWFkZXJzWyRrXVsnaWRSYW5nZU9mZnNldCddIC09ICgyICsgKCgkbnVtU3ViSGVhZGVycyAtICRrIC0gMSkgKiA4KSk7CgkJCQkJCSRzdWJIZWFkZXJzWyRrXVsnaWRSYW5nZU9mZnNldCddIC89IDI7CgkJCQkJCSRudW1HbHlwaEluZGV4QXJyYXkgKz0gJHN1YkhlYWRlcnNbJGtdWydlbnRyeUNvdW50J107CgkJCQkJfQoJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRudW1HbHlwaEluZGV4QXJyYXk7ICsrJGspIHsKCQkJCQkJJGdseXBoSW5kZXhBcnJheVska10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJfQoJCQkJCWZvciAoJGkgPSAwOyAkaSA8IDI1NjsgKyskaSkgewoJCQkJCQkkayA9ICRzdWJIZWFkZXJLZXlzWyRpXTsKCQkJCQkJaWYgKCRrID09IDApIHsKCQkJCQkJCS8vIG9uZSBieXRlIGNvZGUKCQkJCQkJCSRjID0gJGk7CgkJCQkJCQlpZiAoaXNzZXQoJHN1YnNldGNoYXJzWyRjXSkpIHsKCQkJCQkJCQkkZyA9ICRnbHlwaEluZGV4QXJyYXlbMF07CgkJCQkJCQkJJHN1YnNldGdseXBoc1skZ10gPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJLy8gdHdvIGJ5dGVzIGNvZGUKCQkJCQkJCSRzdGFydF9ieXRlID0gJHN1YkhlYWRlcnNbJGtdWydmaXJzdENvZGUnXTsKCQkJCQkJCSRlbmRfYnl0ZSA9ICRzdGFydF9ieXRlICsgJHN1YkhlYWRlcnNbJGtdWydlbnRyeUNvdW50J107CgkJCQkJCQlmb3IgKCRqID0gJHN0YXJ0X2J5dGU7ICRqIDwgJGVuZF9ieXRlOyArKyRqKSB7CgkJCQkJCQkJLy8gY29tYmluZSBoaWdoIGFuZCBsb3cgYnl0ZXMKCQkJCQkJCQkkYyA9ICgoJGkgPDwgOCkgKyAkaik7CgkJCQkJCQkJaWYgKGlzc2V0KCRzdWJzZXRjaGFyc1skY10pKSB7CgkJCQkJCQkJCSRpZFJhbmdlT2Zmc2V0ID0gKCRzdWJIZWFkZXJzWyRrXVsnaWRSYW5nZU9mZnNldCddICsgJGogLSAkc3ViSGVhZGVyc1ska11bJ2ZpcnN0Q29kZSddKTsKCQkJCQkJCQkJJGcgPSAoJGdseXBoSW5kZXhBcnJheVskaWRSYW5nZU9mZnNldF0gKyAkc3ViSGVhZGVyc1ska11bJ2lkRGVsdGEnXSkgJSA2NTUzNjsKCQkJCQkJCQkJaWYgKCRnIDwgMCkgewoJCQkJCQkJCQkJJGcgPSAwOwoJCQkJCQkJCQl9CgkJCQkJCQkJCSRzdWJzZXRnbHlwaHNbJGddID0gdHJ1ZTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQljYXNlIDQ6IHsgLy8gRm9ybWF0IDQ6IFNlZ21lbnQgbWFwcGluZyB0byBkZWx0YSB2YWx1ZXMKCQkJCQkkbGVuZ3RoID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJJG9mZnNldCArPSAyOyAvLyBza2lwIHZlcnNpb24vbGFuZ3VhZ2UKCQkJCQkkc2VnQ291bnQgPSBmbG9vcihUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpIC8gMik7CgkJCQkJJG9mZnNldCArPSAyOwoJCQkJCSRvZmZzZXQgKz0gNjsgLy8gc2tpcCBzZWFyY2hSYW5nZSwgZW50cnlTZWxlY3RvciwgcmFuZ2VTaGlmdAoJCQkJCSRlbmRDb3VudCA9IGFycmF5KCk7IC8vIGFycmF5IG9mIGVuZCBjaGFyYWN0ZXIgY29kZXMgZm9yIGVhY2ggc2VnbWVudAoJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRzZWdDb3VudDsgKyskaykgewoJCQkJCQkkZW5kQ291bnRbJGtdID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCX0KCQkJCQkkb2Zmc2V0ICs9IDI7IC8vIHNraXAgcmVzZXJ2ZWRQYWQKCQkJCQkkc3RhcnRDb3VudCA9IGFycmF5KCk7IC8vIGFycmF5IG9mIHN0YXJ0IGNoYXJhY3RlciBjb2RlcyBmb3IgZWFjaCBzZWdtZW50CgkJCQkJZm9yICgkayA9IDA7ICRrIDwgJHNlZ0NvdW50OyArKyRrKSB7CgkJCQkJCSRzdGFydENvdW50WyRrXSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQl9CgkJCQkJJGlkRGVsdGEgPSBhcnJheSgpOyAvLyBkZWx0YSBmb3IgYWxsIGNoYXJhY3RlciBjb2RlcyBpbiBzZWdtZW50CgkJCQkJZm9yICgkayA9IDA7ICRrIDwgJHNlZ0NvdW50OyArKyRrKSB7CgkJCQkJCSRpZERlbHRhWyRrXSA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQl9CgkJCQkJJGlkUmFuZ2VPZmZzZXQgPSBhcnJheSgpOyAvLyBPZmZzZXRzIGludG8gZ2x5cGhJZEFycmF5IG9yIDAKCQkJCQlmb3IgKCRrID0gMDsgJGsgPCAkc2VnQ291bnQ7ICsrJGspIHsKCQkJCQkJJGlkUmFuZ2VPZmZzZXRbJGtdID0gVENQREZfU1RBVElDOjpfZ2V0VVNIT1JUKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCX0KCQkJCQkkZ2lkbGVuID0gKGZsb29yKCRsZW5ndGggLyAyKSAtIDggLSAoNCAqICRzZWdDb3VudCkpOwoJCQkJCSRnbHlwaElkQXJyYXkgPSBhcnJheSgpOyAvLyBnbHlwaCBpbmRleCBhcnJheQoJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRnaWRsZW47ICsrJGspIHsKCQkJCQkJJGdseXBoSWRBcnJheVska10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJfQoJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRzZWdDb3VudDsgKyskaykgewoJCQkJCQlmb3IgKCRjID0gJHN0YXJ0Q291bnRbJGtdOyAkYyA8PSAkZW5kQ291bnRbJGtdOyArKyRjKSB7CgkJCQkJCQlpZiAoaXNzZXQoJHN1YnNldGNoYXJzWyRjXSkpIHsKCQkJCQkJCQlpZiAoJGlkUmFuZ2VPZmZzZXRbJGtdID09IDApIHsKCQkJCQkJCQkJJGcgPSAoJGlkRGVsdGFbJGtdICsgJGMpICUgNjU1MzY7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJJGdpZCA9IChmbG9vcigkaWRSYW5nZU9mZnNldFska10gLyAyKSArICgkYyAtICRzdGFydENvdW50WyRrXSkgLSAoJHNlZ0NvdW50IC0gJGspKTsKCQkJCQkJCQkJJGcgPSAoJGdseXBoSWRBcnJheVskZ2lkXSArICRpZERlbHRhWyRrXSkgJSA2NTUzNjsKCQkJCQkJCQl9CgkJCQkJCQkJaWYgKCRnIDwgMCkgewoJCQkJCQkJCQkkZyA9IDA7CgkJCQkJCQkJfQoJCQkJCQkJCSRzdWJzZXRnbHlwaHNbJGddID0gdHJ1ZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQlicmVhazsKCQkJCX0KCQkJCWNhc2UgNjogeyAvLyBGb3JtYXQgNjogVHJpbW1lZCB0YWJsZSBtYXBwaW5nCgkJCQkJJG9mZnNldCArPSA0OyAvLyBza2lwIGxlbmd0aCBhbmQgdmVyc2lvbi9sYW5ndWFnZQoJCQkJCSRmaXJzdENvZGUgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkkZW50cnlDb3VudCA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJJG9mZnNldCArPSAyOwoJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRlbnRyeUNvdW50OyArKyRrKSB7CgkJCQkJCSRjID0gKCRrICsgJGZpcnN0Q29kZSk7CgkJCQkJCWlmIChpc3NldCgkc3Vic2V0Y2hhcnNbJGNdKSkgewoJCQkJCQkJJGcgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJJHN1YnNldGdseXBoc1skZ10gPSB0cnVlOwoJCQkJCQl9CgkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQljYXNlIDg6IHsgLy8gRm9ybWF0IDg6IE1peGVkIDE2LWJpdCBhbmQgMzItYml0IGNvdmVyYWdlCgkJCQkJJG9mZnNldCArPSAxMDsgLy8gc2tpcCByZXNlcnZlZCwgbGVuZ3RoIGFuZCB2ZXJzaW9uL2xhbmd1YWdlCgkJCQkJZm9yICgkayA9IDA7ICRrIDwgODE5MjsgKyskaykgewoJCQkJCQkkaXMzMlska10gPSBUQ1BERl9TVEFUSUM6Ol9nZXRCWVRFKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJKyskb2Zmc2V0OwoJCQkJCX0KCQkJCQkkbkdyb3VwcyA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkkb2Zmc2V0ICs9IDQ7CgkJCQkJZm9yICgkaSA9IDA7ICRpIDwgJG5Hcm91cHM7ICsrJGkpIHsKCQkJCQkJJHN0YXJ0Q2hhckNvZGUgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJJGVuZENoYXJDb2RlID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkkb2Zmc2V0ICs9IDQ7CgkJCQkJCSRzdGFydEdseXBoSUQgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJZm9yICgkayA9ICRzdGFydENoYXJDb2RlOyAkayA8PSAkZW5kQ2hhckNvZGU7ICsrJGspIHsKCQkJCQkJCSRpczMyaWR4ID0gZmxvb3IoJGMgLyA4KTsKCQkJCQkJCWlmICgoaXNzZXQoJGlzMzJbJGlzMzJpZHhdKSkgQU5EICgoJGlzMzJbJGlzMzJpZHhdICYgKDEgPDwgKDcgLSAoJGMgJSA4KSkpKSA9PSAwKSkgewoJCQkJCQkJCSRjID0gJGs7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCS8vIDMyIGJpdCBmb3JtYXQKCQkJCQkJCQkvLyBjb252ZXJ0IHRvIGRlY2ltYWwgKGh0dHA6Ly93d3cudW5pY29kZS5vcmcvZmFxLy91dGZfYm9tLmh0bWwjdXRmMTYtNCkKCQkJCQkJCQkvL0xFQURfT0ZGU0VUID0gKDB4RDgwMCAtICgweDEwMDAwID4+IDEwKSkgPSA1NTIzMgoJCQkJCQkJCS8vU1VSUk9HQVRFX09GRlNFVCA9ICgweDEwMDAwIC0gKDB4RDgwMCA8PCAxMCkgLSAweERDMDApID0gLTU2NjEzODg4CgkJCQkJCQkJJGMgPSAoKDU1MjMyICsgKCRrID4+IDEwKSkgPDwgMTApICsgKDB4REMwMCArICgkayAmIDB4M0ZGKSkgLTU2NjEzODg4OwoJCQkJCQkJfQoJCQkJCQkJaWYgKGlzc2V0KCRzdWJzZXRjaGFyc1skY10pKSB7CgkJCQkJCQkJJHN1YnNldGdseXBoc1skc3RhcnRHbHlwaElEXSA9IHRydWU7CgkJCQkJCQl9CgkJCQkJCQkrKyRzdGFydEdseXBoSUQ7CgkJCQkJCX0KCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQljYXNlIDEwOiB7IC8vIEZvcm1hdCAxMDogVHJpbW1lZCBhcnJheQoJCQkJCSRvZmZzZXQgKz0gMTA7IC8vIHNraXAgcmVzZXJ2ZWQsIGxlbmd0aCBhbmQgdmVyc2lvbi9sYW5ndWFnZQoJCQkJCSRzdGFydENoYXJDb2RlID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkkbnVtQ2hhcnMgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJJG9mZnNldCArPSA0OwoJCQkJCWZvciAoJGsgPSAwOyAkayA8ICRudW1DaGFyczsgKyskaykgewoJCQkJCQkkYyA9ICgkayArICRzdGFydENoYXJDb2RlKTsKCQkJCQkJaWYgKGlzc2V0KCRzdWJzZXRjaGFyc1skY10pKSB7CgkJCQkJCQkkZyA9IFRDUERGX1NUQVRJQzo6X2dldFVTSE9SVCgkZm9udCwgJG9mZnNldCk7CgkJCQkJCQkkc3Vic2V0Z2x5cGhzWyRnXSA9IHRydWU7CgkJCQkJCX0KCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCX0KCQkJCWNhc2UgMTI6IHsgLy8gRm9ybWF0IDEyOiBTZWdtZW50ZWQgY292ZXJhZ2UKCQkJCQkkb2Zmc2V0ICs9IDEwOyAvLyBza2lwIGxlbmd0aCBhbmQgdmVyc2lvbi9sYW5ndWFnZQoJCQkJCSRuR3JvdXBzID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQlmb3IgKCRrID0gMDsgJGsgPCAkbkdyb3VwczsgKyskaykgewoJCQkJCQkkc3RhcnRDaGFyQ29kZSA9IFRDUERGX1NUQVRJQzo6X2dldFVMT05HKCRmb250LCAkb2Zmc2V0KTsKCQkJCQkJJG9mZnNldCArPSA0OwoJCQkJCQkkZW5kQ2hhckNvZGUgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVTE9ORygkZm9udCwgJG9mZnNldCk7CgkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJJHN0YXJ0R2x5cGhDb2RlID0gVENQREZfU1RBVElDOjpfZ2V0VUxPTkcoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkkb2Zmc2V0ICs9IDQ7CgkJCQkJCWZvciAoJGMgPSAkc3RhcnRDaGFyQ29kZTsgJGMgPD0gJGVuZENoYXJDb2RlOyArKyRjKSB7CgkJCQkJCQlpZiAoaXNzZXQoJHN1YnNldGNoYXJzWyRjXSkpIHsKCQkJCQkJCQkkc3Vic2V0Z2x5cGhzWyRzdGFydEdseXBoQ29kZV0gPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQkJKyskc3RhcnRHbHlwaENvZGU7CgkJCQkJCX0KCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQljYXNlIDEzOiB7IC8vIEZvcm1hdCAxMzogTWFueS10by1vbmUgcmFuZ2UgbWFwcGluZ3MKCQkJCQkvLyB0byBiZSBpbXBsZW1lbnRlZCAuLi4KCQkJCQlicmVhazsKCQkJCX0KCQkJCWNhc2UgMTQ6IHsgLy8gRm9ybWF0IDE0OiBVbmljb2RlIFZhcmlhdGlvbiBTZXF1ZW5jZXMKCQkJCQkvLyB0byBiZSBpbXBsZW1lbnRlZCAuLi4KCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0KCQkvLyBpbmNsdWRlIGFsbCBwYXJ0cyBvZiBjb21wb3NpdGUgZ2x5cGhzCgkJJG5ld19zZ2EgPSAkc3Vic2V0Z2x5cGhzOwoJCXdoaWxlICghZW1wdHkoJG5ld19zZ2EpKSB7CgkJCSRzZ2EgPSAkbmV3X3NnYTsKCQkJJG5ld19zZ2EgPSBhcnJheSgpOwoJCQlmb3JlYWNoICgkc2dhIGFzICRrZXkgPT4gJHZhbCkgewoJCQkJaWYgKGlzc2V0KCRpbmRleFRvTG9jWyRrZXldKSkgewoJCQkJCSRvZmZzZXQgPSAoJHRhYmxlWydnbHlmJ11bJ29mZnNldCddICsgJGluZGV4VG9Mb2NbJGtleV0pOwoJCQkJCSRudW1iZXJPZkNvbnRvdXJzID0gVENQREZfU1RBVElDOjpfZ2V0U0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQlpZiAoJG51bWJlck9mQ29udG91cnMgPCAwKSB7IC8vIGNvbXBvc2l0ZSBnbHlwaAoJCQkJCQkkb2Zmc2V0ICs9IDg7IC8vIHNraXAgeE1pbiwgeU1pbiwgeE1heCwgeU1heAoJCQkJCQlkbyB7CgkJCQkJCQkkZmxhZ3MgPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCQkJJGdseXBoSW5kZXggPSBUQ1BERl9TVEFUSUM6Ol9nZXRVU0hPUlQoJGZvbnQsICRvZmZzZXQpOwoJCQkJCQkJJG9mZnNldCArPSAyOwoJCQkJCQkJaWYgKCFpc3NldCgkc3Vic2V0Z2x5cGhzWyRnbHlwaEluZGV4XSkpIHsKCQkJCQkJCQkvLyBhZGQgbWlzc2luZyBnbHlwaHMKCQkJCQkJCQkkbmV3X3NnYVskZ2x5cGhJbmRleF0gPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQkJLy8gc2tpcCBzb21lIGJ5dGVzIGJ5IGNhc2UKCQkJCQkJCWlmICgkZmxhZ3MgJiAxKSB7CgkJCQkJCQkJJG9mZnNldCArPSA0OwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkkb2Zmc2V0ICs9IDI7CgkJCQkJCQl9CgkJCQkJCQlpZiAoJGZsYWdzICYgOCkgewoJCQkJCQkJCSRvZmZzZXQgKz0gMjsKCQkJCQkJCX0gZWxzZWlmICgkZmxhZ3MgJiA2NCkgewoJCQkJCQkJCSRvZmZzZXQgKz0gNDsKCQkJCQkJCX0gZWxzZWlmICgkZmxhZ3MgJiAxMjgpIHsKCQkJCQkJCQkkb2Zmc2V0ICs9IDg7CgkJCQkJCQl9CgkJCQkJCX0gd2hpbGUgKCRmbGFncyAmIDMyKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJJHN1YnNldGdseXBocyArPSAkbmV3X3NnYTsKCQl9CgkJLy8gc29ydCBnbHlwaHMgYnkga2V5IChhbmQgcmVtb3ZlIGR1cGxpY2F0ZXMpCgkJa3NvcnQoJHN1YnNldGdseXBocyk7CgkJLy8gYnVpbGQgbmV3IGdseWYgYW5kIGxvY2EgdGFibGVzCgkJJGdseWYgPSAnJzsKCQkkbG9jYSA9ICcnOwoJCSRvZmZzZXQgPSAwOwoJCSRnbHlmX29mZnNldCA9ICR0YWJsZVsnZ2x5ZiddWydvZmZzZXQnXTsKCQlmb3IgKCRpID0gMDsgJGkgPCAkdG90X251bV9nbHlwaHM7ICsrJGkpIHsKCQkJaWYgKGlzc2V0KCRzdWJzZXRnbHlwaHNbJGldKSkgewoJCQkJJGxlbmd0aCA9ICgkaW5kZXhUb0xvY1soJGkgKyAxKV0gLSAkaW5kZXhUb0xvY1skaV0pOwoJCQkJJGdseWYgLj0gc3Vic3RyKCRmb250LCAoJGdseWZfb2Zmc2V0ICsgJGluZGV4VG9Mb2NbJGldKSwgJGxlbmd0aCk7CgkJCX0gZWxzZSB7CgkJCQkkbGVuZ3RoID0gMDsKCQkJfQoJCQlpZiAoJHNob3J0X29mZnNldCkgewoJCQkJJGxvY2EgLj0gcGFjaygnbicsIGZsb29yKCRvZmZzZXQgLyAyKSk7CgkJCX0gZWxzZSB7CgkJCQkkbG9jYSAuPSBwYWNrKCdOJywgJG9mZnNldCk7CgkJCX0KCQkJJG9mZnNldCArPSAkbGVuZ3RoOwoJCX0KCQkvLyBhcnJheSBvZiB0YWJsZSBuYW1lcyB0byBwcmVzZXJ2ZSAobG9jYSBhbmQgZ2x5ZiB0YWJsZXMgd2lsbCBiZSBhZGRlZCBsYXRlcikKCQkvLyB0aGUgY21hcCB0YWJsZSBpcyBub3QgbmVlZGVkIGFuZCBzaGFsbCBub3QgYmUgcHJlc2VudCwgc2luY2UgdGhlIG1hcHBpbmcgZnJvbSBjaGFyYWN0ZXIgY29kZXMgdG8gZ2x5cGggZGVzY3JpcHRpb25zIGlzIHByb3ZpZGVkIHNlcGFyYXRlbHkKCQkkdGFibGVfbmFtZXMgPSBhcnJheSAoJ2hlYWQnLCAnaGhlYScsICdobXR4JywgJ21heHAnLCAnY3Z0ICcsICdmcGdtJywgJ3ByZXAnKTsgLy8gbWluaW11bSByZXF1aXJlZCB0YWJsZSBuYW1lcwoJCS8vIGdldCB0aGUgdGFibGVzIHRvIHByZXNlcnZlCgkJJG9mZnNldCA9IDEyOwoJCWZvcmVhY2ggKCR0YWJsZSBhcyAkdGFnID0+ICR2YWwpIHsKCQkJaWYgKGluX2FycmF5KCR0YWcsICR0YWJsZV9uYW1lcykpIHsKCQkJCSR0YWJsZVskdGFnXVsnZGF0YSddID0gc3Vic3RyKCRmb250LCAkdGFibGVbJHRhZ11bJ29mZnNldCddLCAkdGFibGVbJHRhZ11bJ2xlbmd0aCddKTsKCQkJCWlmICgkdGFnID09ICdoZWFkJykgewoJCQkJCS8vIHNldCB0aGUgY2hlY2tTdW1BZGp1c3RtZW50IHRvIDAKCQkJCQkkdGFibGVbJHRhZ11bJ2RhdGEnXSA9IHN1YnN0cigkdGFibGVbJHRhZ11bJ2RhdGEnXSwgMCwgOCkuIlx4MFx4MFx4MFx4MCIuc3Vic3RyKCR0YWJsZVskdGFnXVsnZGF0YSddLCAxMik7CgkJCQl9CgkJCQkkdGFibGVbJHRhZ11bJ29mZnNldCddID0gJG9mZnNldDsKCQkJCSRvZmZzZXQgKz0gJHRhYmxlWyR0YWddWydsZW5ndGgnXTsKCQkJCSRudW1QYWQgPSAoJG9mZnNldCArIDMgJiB+MykgLSAkb2Zmc2V0OwoJCQkJaWYoJG51bVBhZCA+IDApIHsKCQkJCQkkdGFibGVbJHRhZ11bJ2RhdGEnXSAuPSBzdHJfcmVwZWF0KCJceDAiLCAkbnVtUGFkKTsKCQkJCQkkb2Zmc2V0ICs9ICRudW1QYWQ7CgkJCQl9CgkJCQkvLyBjaGVjayBzdW0gaXMgbm90IGNoYW5nZWQgKHNvIGtlZXAgdGhlIGZvbGxvd2luZyBsaW5lIGNvbW1lbnRlZCkKCQkJCS8vJHRhYmxlWyR0YWddWydjaGVja1N1bSddID0gc2VsZjo6X2dldFRURnRhYmxlQ2hlY2tzdW0oJHRhYmxlWyR0YWddWydkYXRhJ10sICR0YWJsZVskdGFnXVsnbGVuZ3RoJ10gKyAkbnVtUGFkKTsKCQkJfSBlbHNlIHsKCQkJCXVuc2V0KCR0YWJsZVskdGFnXSk7CgkJCX0KCQl9CgkJLy8gYWRkIGxvY2EKCQkkdGFibGVbJ2xvY2EnXSA9IGFycmF5KCk7CgkJJHRhYmxlWydsb2NhJ11bJ2RhdGEnXSA9ICRsb2NhOwoJCSR0YWJsZVsnbG9jYSddWydsZW5ndGgnXSA9IHN0cmxlbigkbG9jYSk7CgkJJHRhYmxlWydsb2NhJ11bJ29mZnNldCddID0gJG9mZnNldDsKCQkkb2Zmc2V0ICs9ICR0YWJsZVsnbG9jYSddWydsZW5ndGgnXTsKCQkkbnVtUGFkID0gKCRvZmZzZXQgKyAzICYgfjMpIC0gJG9mZnNldDsKCQlpZigkbnVtUGFkID4gMCkgewoJCQkkdGFibGVbJ2xvY2EnXVsnZGF0YSddIC49IHN0cl9yZXBlYXQoIlx4MCIsICRudW1QYWQpOwoJCQkkb2Zmc2V0ICs9ICRudW1QYWQ7CgkJfQoJCSR0YWJsZVsnbG9jYSddWydjaGVja1N1bSddID0gc2VsZjo6X2dldFRURnRhYmxlQ2hlY2tzdW0oJHRhYmxlWydsb2NhJ11bJ2RhdGEnXSwgJHRhYmxlWydsb2NhJ11bJ2xlbmd0aCddICsgJG51bVBhZCk7CgkJLy8gYWRkIGdseWYKCQkkdGFibGVbJ2dseWYnXSA9IGFycmF5KCk7CgkJJHRhYmxlWydnbHlmJ11bJ2RhdGEnXSA9ICRnbHlmOwoJCSR0YWJsZVsnZ2x5ZiddWydsZW5ndGgnXSA9IHN0cmxlbigkZ2x5Zik7CgkJJHRhYmxlWydnbHlmJ11bJ29mZnNldCddID0gJG9mZnNldDsKCQkkb2Zmc2V0ICs9ICR0YWJsZVsnZ2x5ZiddWydsZW5ndGgnXTsKCQkkbnVtUGFkID0gKCRvZmZzZXQgKyAzICYgfjMpIC0gJG9mZnNldDsKCQlpZigkbnVtUGFkID4gMCkgewoJCQkkdGFibGVbJ2dseWYnXVsnZGF0YSddIC49IHN0cl9yZXBlYXQoIlx4MCIsICRudW1QYWQpOwoJCQkkb2Zmc2V0ICs9ICRudW1QYWQ7CgkJfQoJCSR0YWJsZVsnZ2x5ZiddWydjaGVja1N1bSddID0gc2VsZjo6X2dldFRURnRhYmxlQ2hlY2tzdW0oJHRhYmxlWydnbHlmJ11bJ2RhdGEnXSwgJHRhYmxlWydnbHlmJ11bJ2xlbmd0aCddICsgJG51bVBhZCk7CgkJLy8gcmVidWlsZCBmb250CgkJJGZvbnQgPSAnJzsKCQkkZm9udCAuPSBwYWNrKCdOJywgMHgxMDAwMCk7IC8vIHNmbnQgdmVyc2lvbgoJCSRudW1UYWJsZXMgPSBjb3VudCgkdGFibGUpOwoJCSRmb250IC49IHBhY2soJ24nLCAkbnVtVGFibGVzKTsgLy8gbnVtVGFibGVzCgkJJGVudHJ5U2VsZWN0b3IgPSBmbG9vcihsb2coJG51bVRhYmxlcywgMikpOwoJCSRzZWFyY2hSYW5nZSA9IHBvdygyLCAkZW50cnlTZWxlY3RvcikgKiAxNjsKCQkkcmFuZ2VTaGlmdCA9ICgkbnVtVGFibGVzICogMTYpIC0gJHNlYXJjaFJhbmdlOwoJCSRmb250IC49IHBhY2soJ24nLCAkc2VhcmNoUmFuZ2UpOyAvLyBzZWFyY2hSYW5nZQoJCSRmb250IC49IHBhY2soJ24nLCAkZW50cnlTZWxlY3Rvcik7IC8vIGVudHJ5U2VsZWN0b3IKCQkkZm9udCAuPSBwYWNrKCduJywgJHJhbmdlU2hpZnQpOyAvLyByYW5nZVNoaWZ0CgkJJG9mZnNldCA9ICgkbnVtVGFibGVzICogMTYpOwoJCWZvcmVhY2ggKCR0YWJsZSBhcyAkdGFnID0+ICRkYXRhKSB7CgkJCSRmb250IC49ICR0YWc7IC8vIHRhZwoJCQkkZm9udCAuPSBwYWNrKCdOJywgJGRhdGFbJ2NoZWNrU3VtJ10pOyAvLyBjaGVja1N1bQoJCQkkZm9udCAuPSBwYWNrKCdOJywgKCRkYXRhWydvZmZzZXQnXSArICRvZmZzZXQpKTsgLy8gb2Zmc2V0CgkJCSRmb250IC49IHBhY2soJ04nLCAkZGF0YVsnbGVuZ3RoJ10pOyAvLyBsZW5ndGgKCQl9CgkJZm9yZWFjaCAoJHRhYmxlIGFzICRkYXRhKSB7CgkJCSRmb250IC49ICRkYXRhWydkYXRhJ107CgkJfQoJCS8vIHNldCBjaGVja1N1bUFkanVzdG1lbnQgb24gaGVhZCB0YWJsZQoJCSRjaGVja1N1bUFkanVzdG1lbnQgPSAweEIxQjBBRkJBIC0gc2VsZjo6X2dldFRURnRhYmxlQ2hlY2tzdW0oJGZvbnQsIHN0cmxlbigkZm9udCkpOwoJCSRmb250ID0gc3Vic3RyKCRmb250LCAwLCAkdGFibGVbJ2hlYWQnXVsnb2Zmc2V0J10gKyAkb2Zmc2V0ICsgOCkucGFjaygnTicsICRjaGVja1N1bUFkanVzdG1lbnQpLnN1YnN0cigkZm9udCwgJHRhYmxlWydoZWFkJ11bJ29mZnNldCddICsgJG9mZnNldCArIDEyKTsKCQlyZXR1cm4gJGZvbnQ7Cgl9CgoJLyoqCgkgKiBPdXRwdXRzIGZvbnQgd2lkdGhzCgkgKiBAcGFyYW0gYXJyYXkgJGZvbnQgZm9udCBkYXRhCgkgKiBAcGFyYW0gaW50ICRjaWRvZmZzZXQgb2Zmc2V0IGZvciBDSUQgdmFsdWVzCgkgKiBAcmV0dXJuIHN0cmluZyBQREYgY29tbWFuZCBzdHJpbmcgZm9yIGZvbnQgd2lkdGhzCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHNpbmNlIDQuNC4wMDAgKDIwMDgtMTItMDcpCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIF9wdXRmb250d2lkdGhzKCRmb250LCAkY2lkb2Zmc2V0PTApIHsKCQlrc29ydCgkZm9udFsnY3cnXSk7CgkJJHJhbmdlaWQgPSAwOwoJCSRyYW5nZSA9IGFycmF5KCk7CgkJJHByZXZjaWQgPSAtMjsKCQkkcHJldndpZHRoID0gLTE7CgkJJGludGVydmFsID0gZmFsc2U7CgkJLy8gZm9yIGVhY2ggY2hhcmFjdGVyCgkJZm9yZWFjaCAoJGZvbnRbJ2N3J10gYXMgJGNpZCA9PiAkd2lkdGgpIHsKCQkJJGNpZCAtPSAkY2lkb2Zmc2V0OwoJCQlpZiAoJGZvbnRbJ3N1YnNldCddIEFORCAoIWlzc2V0KCRmb250WydzdWJzZXRjaGFycyddWyRjaWRdKSkpIHsKCQkJCS8vIGlnbm9yZSB0aGUgdW51c2VkIGNoYXJhY3RlcnMgKGZvbnQgc3Vic2V0dGluZykKCQkJCWNvbnRpbnVlOwoJCQl9CgkJCWlmICgkd2lkdGggIT0gJGZvbnRbJ2R3J10pIHsKCQkJCWlmICgkY2lkID09ICgkcHJldmNpZCArIDEpKSB7CgkJCQkJLy8gY29uc2VjdXRpdmUgQ0lECgkJCQkJaWYgKCR3aWR0aCA9PSAkcHJldndpZHRoKSB7CgkJCQkJCWlmICgkd2lkdGggPT0gJHJhbmdlWyRyYW5nZWlkXVswXSkgewoJCQkJCQkJJHJhbmdlWyRyYW5nZWlkXVtdID0gJHdpZHRoOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJYXJyYXlfcG9wKCRyYW5nZVskcmFuZ2VpZF0pOwoJCQkJCQkJLy8gbmV3IHJhbmdlCgkJCQkJCQkkcmFuZ2VpZCA9ICRwcmV2Y2lkOwoJCQkJCQkJJHJhbmdlWyRyYW5nZWlkXSA9IGFycmF5KCk7CgkJCQkJCQkkcmFuZ2VbJHJhbmdlaWRdW10gPSAkcHJldndpZHRoOwoJCQkJCQkJJHJhbmdlWyRyYW5nZWlkXVtdID0gJHdpZHRoOwoJCQkJCQl9CgkJCQkJCSRpbnRlcnZhbCA9IHRydWU7CgkJCQkJCSRyYW5nZVskcmFuZ2VpZF1bJ2ludGVydmFsJ10gPSB0cnVlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWlmICgkaW50ZXJ2YWwpIHsKCQkJCQkJCS8vIG5ldyByYW5nZQoJCQkJCQkJJHJhbmdlaWQgPSAkY2lkOwoJCQkJCQkJJHJhbmdlWyRyYW5nZWlkXSA9IGFycmF5KCk7CgkJCQkJCQkkcmFuZ2VbJHJhbmdlaWRdW10gPSAkd2lkdGg7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkkcmFuZ2VbJHJhbmdlaWRdW10gPSAkd2lkdGg7CgkJCQkJCX0KCQkJCQkJJGludGVydmFsID0gZmFsc2U7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQkvLyBuZXcgcmFuZ2UKCQkJCQkkcmFuZ2VpZCA9ICRjaWQ7CgkJCQkJJHJhbmdlWyRyYW5nZWlkXSA9IGFycmF5KCk7CgkJCQkJJHJhbmdlWyRyYW5nZWlkXVtdID0gJHdpZHRoOwoJCQkJCSRpbnRlcnZhbCA9IGZhbHNlOwoJCQkJfQoJCQkJJHByZXZjaWQgPSAkY2lkOwoJCQkJJHByZXZ3aWR0aCA9ICR3aWR0aDsKCQkJfQoJCX0KCQkvLyBvcHRpbWl6ZSByYW5nZXMKCQkkcHJldmsgPSAtMTsKCQkkbmV4dGsgPSAtMTsKCQkkcHJldmludCA9IGZhbHNlOwoJCWZvcmVhY2ggKCRyYW5nZSBhcyAkayA9PiAkd3MpIHsKCQkJJGN3cyA9IGNvdW50KCR3cyk7CgkJCWlmICgoJGsgPT0gJG5leHRrKSBBTkQgKCEkcHJldmludCkgQU5EICgoIWlzc2V0KCR3c1snaW50ZXJ2YWwnXSkpIE9SICgkY3dzIDwgNCkpKSB7CgkJCQlpZiAoaXNzZXQoJHJhbmdlWyRrXVsnaW50ZXJ2YWwnXSkpIHsKCQkJCQl1bnNldCgkcmFuZ2VbJGtdWydpbnRlcnZhbCddKTsKCQkJCX0KCQkJCSRyYW5nZVskcHJldmtdID0gYXJyYXlfbWVyZ2UoJHJhbmdlWyRwcmV2a10sICRyYW5nZVska10pOwoJCQkJdW5zZXQoJHJhbmdlWyRrXSk7CgkJCX0gZWxzZSB7CgkJCQkkcHJldmsgPSAkazsKCQkJfQoJCQkkbmV4dGsgPSAkayArICRjd3M7CgkJCWlmIChpc3NldCgkd3NbJ2ludGVydmFsJ10pKSB7CgkJCQlpZiAoJGN3cyA+IDMpIHsKCQkJCQkkcHJldmludCA9IHRydWU7CgkJCQl9IGVsc2UgewoJCQkJCSRwcmV2aW50ID0gZmFsc2U7CgkJCQl9CgkJCQlpZiAoaXNzZXQoJHJhbmdlWyRrXVsnaW50ZXJ2YWwnXSkpIHsKCQkJCQl1bnNldCgkcmFuZ2VbJGtdWydpbnRlcnZhbCddKTsKCQkJCX0KCQkJCS0tJG5leHRrOwoJCQl9IGVsc2UgewoJCQkJJHByZXZpbnQgPSBmYWxzZTsKCQkJfQoJCX0KCQkvLyBvdXRwdXQgZGF0YQoJCSR3ID0gJyc7CgkJZm9yZWFjaCAoJHJhbmdlIGFzICRrID0+ICR3cykgewoJCQlpZiAoY291bnQoYXJyYXlfY291bnRfdmFsdWVzKCR3cykpID09IDEpIHsKCQkJCS8vIGludGVydmFsIG1vZGUgaXMgbW9yZSBjb21wYWN0CgkJCQkkdyAuPSAnICcuJGsuJyAnLigkayArIGNvdW50KCR3cykgLSAxKS4nICcuJHdzWzBdOwoJCQl9IGVsc2UgewoJCQkJLy8gcmFuZ2UgbW9kZQoJCQkJJHcgLj0gJyAnLiRrLicgWyAnLmltcGxvZGUoJyAnLCAkd3MpLicgXSc7CgkJCX0KCQl9CgkJcmV0dXJuICcvVyBbJy4kdy4nIF0nOwoJfQoKCgoKCS8qKgoJICogVXBkYXRlIHRoZSBDSURUb0dJRE1hcCBzdHJpbmcgd2l0aCBhIG5ldyB2YWx1ZS4KCSAqIEBwYXJhbSBzdHJpbmcgJG1hcCBDSURUb0dJRE1hcC4KCSAqIEBwYXJhbSBpbnQgJGNpZCBDSUQgdmFsdWUuCgkgKiBAcGFyYW0gaW50ICRnaWQgR0lEIHZhbHVlLgoJICogQHJldHVybiBzdHJpbmcgQ0lEVG9HSURNYXAuCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHNpbmNlIDUuOS4xMjMgKDIwMTEtMDktMjkpCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHVwZGF0ZUNJRHRvR0lEbWFwKCRtYXAsICRjaWQsICRnaWQpIHsKCQlpZiAoKCRjaWQgPj0gMCkgQU5EICgkY2lkIDw9IDB4RkZGRikgQU5EICgkZ2lkID49IDApKSB7CgkJCWlmICgkZ2lkID4gMHhGRkZGKSB7CgkJCQkkZ2lkIC09IDB4MTAwMDA7CgkJCX0KCQkJJG1hcFsoJGNpZCAqIDIpXSA9IGNocigkZ2lkID4+IDgpOwoJCQkkbWFwWygoJGNpZCAqIDIpICsgMSldID0gY2hyKCRnaWQgJiAweEZGKTsKCQl9CgkJcmV0dXJuICRtYXA7Cgl9CgoJLyoqCgkgKiBSZXR1cm4gZm9udHMgcGF0aAoJICogQHJldHVybiBzdHJpbmcKCSAqIEBwdWJsaWMgc3RhdGljCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gX2dldGZvbnRwYXRoKCkgewoJCWlmICghZGVmaW5lZCgnS19QQVRIX0ZPTlRTJykgQU5EIGlzX2RpcigkZmRpciA9IHJlYWxwYXRoKGRpcm5hbWUoX19GSUxFX18pLicvLi4vZm9udHMnKSkpIHsKCQkJaWYgKHN1YnN0cigkZmRpciwgLTEpICE9ICcvJykgewoJCQkJJGZkaXIgLj0gJy8nOwoJCQl9CgkJCWRlZmluZSgnS19QQVRIX0ZPTlRTJywgJGZkaXIpOwoJCX0KCQlyZXR1cm4gZGVmaW5lZCgnS19QQVRIX0ZPTlRTJykgPyBLX1BBVEhfRk9OVFMgOiAnJzsKCX0KCgoKCS8qKgoJICogUmV0dXJuIGZvbnQgZnVsbCBwYXRoCgkgKiBAcGFyYW0gc3RyaW5nICRmaWxlIEZvbnQgZmlsZSBuYW1lLgoJICogQHBhcmFtIHN0cmluZyAkZm9udGRpciBGb250IGRpcmVjdG9yeSAoc2V0IHRvIGZhbHNlIGZ0byBzZWFyY2ggb24gZGVmYXVsdCBkaXJlY3RvcmllcykKCSAqIEByZXR1cm4gc3RyaW5nIEZvbnQgZnVsbCBwYXRoIG9yIGVtcHR5IHN0cmluZwoJICogQGF1dGhvciBOaWNvbGEgQXN1bmkKCSAqIEBzaW5jZSA2LjAuMDI1CgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEZvbnRGdWxsUGF0aCgkZmlsZSwgJGZvbnRkaXI9ZmFsc2UpIHsKCQkkZm9udGZpbGUgPSAnJzsKCQkvLyBzZWFyY2ggZmlsZXMgb24gdmFyaW91cyBkaXJlY3RvcmllcwoJCWlmICgoJGZvbnRkaXIgIT09IGZhbHNlKSBBTkQgQFRDUERGX1NUQVRJQzo6ZmlsZV9leGlzdHMoJGZvbnRkaXIuJGZpbGUpKSB7CgkJCSRmb250ZmlsZSA9ICRmb250ZGlyLiRmaWxlOwoJCX0gZWxzZWlmIChAVENQREZfU1RBVElDOjpmaWxlX2V4aXN0cyhzZWxmOjpfZ2V0Zm9udHBhdGgoKS4kZmlsZSkpIHsKCQkJJGZvbnRmaWxlID0gc2VsZjo6X2dldGZvbnRwYXRoKCkuJGZpbGU7CgkJfSBlbHNlaWYgKEBUQ1BERl9TVEFUSUM6OmZpbGVfZXhpc3RzKCRmaWxlKSkgewoJCQkkZm9udGZpbGUgPSAkZmlsZTsKCQl9CgkJcmV0dXJuICRmb250ZmlsZTsKCX0KCgoKCgkvKioKCSAqIEdldCBhIHJlZmVyZW5jZSBmb250IHNpemUuCgkgKiBAcGFyYW0gc3RyaW5nICRzaXplIFN0cmluZyBjb250YWluaW5nIGZvbnQgc2l6ZSB2YWx1ZS4KCSAqIEBwYXJhbSBmbG9hdCAkcmVmc2l6ZSBSZWZlcmVuY2UgZm9udCBzaXplIGluIHBvaW50cy4KCSAqIEByZXR1cm4gZmxvYXQgdmFsdWUgaW4gcG9pbnRzCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEZvbnRSZWZTaXplKCRzaXplLCAkcmVmc2l6ZT0xMikgewoJCXN3aXRjaCAoJHNpemUpIHsKCQkJY2FzZSAneHgtc21hbGwnOiB7CgkJCQkkc2l6ZSA9ICgkcmVmc2l6ZSAtIDQpOwoJCQkJYnJlYWs7CgkJCX0KCQkJY2FzZSAneC1zbWFsbCc6IHsKCQkJCSRzaXplID0gKCRyZWZzaXplIC0gMyk7CgkJCQlicmVhazsKCQkJfQoJCQljYXNlICdzbWFsbCc6IHsKCQkJCSRzaXplID0gKCRyZWZzaXplIC0gMik7CgkJCQlicmVhazsKCQkJfQoJCQljYXNlICdtZWRpdW0nOiB7CgkJCQkkc2l6ZSA9ICRyZWZzaXplOwoJCQkJYnJlYWs7CgkJCX0KCQkJY2FzZSAnbGFyZ2UnOiB7CgkJCQkkc2l6ZSA9ICgkcmVmc2l6ZSArIDIpOwoJCQkJYnJlYWs7CgkJCX0KCQkJY2FzZSAneC1sYXJnZSc6IHsKCQkJCSRzaXplID0gKCRyZWZzaXplICsgNCk7CgkJCQlicmVhazsKCQkJfQoJCQljYXNlICd4eC1sYXJnZSc6IHsKCQkJCSRzaXplID0gKCRyZWZzaXplICsgNik7CgkJCQlicmVhazsKCQkJfQoJCQljYXNlICdzbWFsbGVyJzogewoJCQkJJHNpemUgPSAoJHJlZnNpemUgLSAzKTsKCQkJCWJyZWFrOwoJCQl9CgkJCWNhc2UgJ2xhcmdlcic6IHsKCQkJCSRzaXplID0gKCRyZWZzaXplICsgMyk7CgkJCQlicmVhazsKCQkJfQoJCX0KCQlyZXR1cm4gJHNpemU7Cgl9CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBSRUlNUExFTUVOVEVECi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoKCgoKCgoKCS8qKgoJICogUmV0dXJucyB0aGUgdW5pY29kZSBjYXJhY3RlciBzcGVjaWZpZWQgYnkgdGhlIHZhbHVlCgkgKiBAcGFyYW0gaW50ICRjIFVURi04IHZhbHVlCgkgKiBAcGFyYW0gYm9vbGVhbiAkdW5pY29kZSBUcnVlIGlmIHdlIGFyZSBpbiB1bmljb2RlIG1vZGUsIGZhbHNlIG90aGVyd2lzZS4KCSAqIEByZXR1cm4gc3RyaW5nIFJldHVybnMgdGhlIHNwZWNpZmllZCBjaGFyYWN0ZXIuCgkgKiBAc2luY2UgMi4zLjAwMCAoMjAwOC0wMy0wNSkKCSAqIEBwdWJsaWMgc3RhdGljCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gdW5pY2hyKCRjLCAkdW5pY29kZT10cnVlKSB7CgkJJGMgPSBpbnR2YWwoJGMpOwoJCWlmICghJHVuaWNvZGUpIHsKCQkJcmV0dXJuIGNocigkYyk7CgkJfSBlbHNlaWYgKCRjIDw9IDB4N0YpIHsKCQkJLy8gb25lIGJ5dGUKCQkJcmV0dXJuIGNocigkYyk7CgkJfSBlbHNlaWYgKCRjIDw9IDB4N0ZGKSB7CgkJCS8vIHR3byBieXRlcwoJCQlyZXR1cm4gY2hyKDB4QzAgfCAkYyA+PiA2KS5jaHIoMHg4MCB8ICRjICYgMHgzRik7CgkJfSBlbHNlaWYgKCRjIDw9IDB4RkZGRikgewoJCQkvLyB0aHJlZSBieXRlcwoJCQlyZXR1cm4gY2hyKDB4RTAgfCAkYyA+PiAxMikuY2hyKDB4ODAgfCAkYyA+PiA2ICYgMHgzRikuY2hyKDB4ODAgfCAkYyAmIDB4M0YpOwoJCX0gZWxzZWlmICgkYyA8PSAweDEwRkZGRikgewoJCQkvLyBmb3VyIGJ5dGVzCgkJCXJldHVybiBjaHIoMHhGMCB8ICRjID4+IDE4KS5jaHIoMHg4MCB8ICRjID4+IDEyICYgMHgzRikuY2hyKDB4ODAgfCAkYyA+PiA2ICYgMHgzRikuY2hyKDB4ODAgfCAkYyAmIDB4M0YpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAnJzsKCQl9Cgl9CgoJLyoqCgkgKiBSZXR1cm5zIHRoZSB1bmljb2RlIGNhcmFjdGVyIHNwZWNpZmllZCBieSBVVEYtOCB2YWx1ZQoJICogQHBhcmFtIGludCAkYyBVVEYtOCB2YWx1ZQoJICogQHJldHVybiBzdHJpbmcgUmV0dXJucyB0aGUgc3BlY2lmaWVkIGNoYXJhY3Rlci4KCSAqIEBwdWJsaWMgc3RhdGljCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gdW5pY2hyVW5pY29kZSgkYykgewoJCXJldHVybiBzZWxmOjp1bmljaHIoJGMsIHRydWUpOwoJfQoKCS8qKgoJICogUmV0dXJucyB0aGUgdW5pY29kZSBjYXJhY3RlciBzcGVjaWZpZWQgYnkgQVNDSUkgdmFsdWUKCSAqIEBwYXJhbSBpbnQgJGMgVVRGLTggdmFsdWUKCSAqIEByZXR1cm4gc3RyaW5nIFJldHVybnMgdGhlIHNwZWNpZmllZCBjaGFyYWN0ZXIuCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHVuaWNockFTQ0lJKCRjKSB7CgkJcmV0dXJuIHNlbGY6OnVuaWNocigkYywgZmFsc2UpOwoJfQoKCS8qKgoJICogQ29udmVydHMgYXJyYXkgb2YgVVRGLTggY2hhcmFjdGVycyB0byBVVEYxNi1CRSBzdHJpbmcuPGJyPgoJICogQmFzZWQgb246IGh0dHA6Ly93d3cuZmFxcy5vcmcvcmZjcy9yZmMyNzgxLmh0bWwKCSAqIDxwcmU+CgkgKiAgIEVuY29kaW5nIFVURi0xNjoKCSAqCgkgKiAgIEVuY29kaW5nIG9mIGEgc2luZ2xlIGNoYXJhY3RlciBmcm9tIGFuIElTTyAxMDY0NiBjaGFyYWN0ZXIgdmFsdWUgdG8KCSAqICAgIFVURi0xNiBwcm9jZWVkcyBhcyBmb2xsb3dzLiBMZXQgVSBiZSB0aGUgY2hhcmFjdGVyIG51bWJlciwgbm8gZ3JlYXRlcgoJICogICAgdGhhbiAweDEwRkZGRi4KCSAqCgkgKiAgICAxKSBJZiBVIDwgMHgxMDAwMCwgZW5jb2RlIFUgYXMgYSAxNi1iaXQgdW5zaWduZWQgaW50ZWdlciBhbmQKCSAqICAgICAgIHRlcm1pbmF0ZS4KCSAqCgkgKiAgICAyKSBMZXQgVScgPSBVIC0gMHgxMDAwMC4gQmVjYXVzZSBVIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byAweDEwRkZGRiwKCSAqICAgICAgIFUnIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDB4RkZGRkYuIFRoYXQgaXMsIFUnIGNhbiBiZQoJICogICAgICAgcmVwcmVzZW50ZWQgaW4gMjAgYml0cy4KCSAqCgkgKiAgICAzKSBJbml0aWFsaXplIHR3byAxNi1iaXQgdW5zaWduZWQgaW50ZWdlcnMsIFcxIGFuZCBXMiwgdG8gMHhEODAwIGFuZAoJICogICAgICAgMHhEQzAwLCByZXNwZWN0aXZlbHkuIFRoZXNlIGludGVnZXJzIGVhY2ggaGF2ZSAxMCBiaXRzIGZyZWUgdG8KCSAqICAgICAgIGVuY29kZSB0aGUgY2hhcmFjdGVyIHZhbHVlLCBmb3IgYSB0b3RhbCBvZiAyMCBiaXRzLgoJICoKCSAqICAgIDQpIEFzc2lnbiB0aGUgMTAgaGlnaC1vcmRlciBiaXRzIG9mIHRoZSAyMC1iaXQgVScgdG8gdGhlIDEwIGxvdy1vcmRlcgoJICogICAgICAgYml0cyBvZiBXMSBhbmQgdGhlIDEwIGxvdy1vcmRlciBiaXRzIG9mIFUnIHRvIHRoZSAxMCBsb3ctb3JkZXIKCSAqICAgICAgIGJpdHMgb2YgVzIuIFRlcm1pbmF0ZS4KCSAqCgkgKiAgICBHcmFwaGljYWxseSwgc3RlcHMgMiB0aHJvdWdoIDQgbG9vayBsaWtlOgoJICogICAgVScgPSB5eXl5eXl5eXl5eHh4eHh4eHh4eAoJICogICAgVzEgPSAxMTAxMTB5eXl5eXl5eXl5CgkgKiAgICBXMiA9IDExMDExMXh4eHh4eHh4eHgKCSAqIDwvcHJlPgoJICogQHBhcmFtIGFycmF5ICR1bmljb2RlIGFycmF5IGNvbnRhaW5pbmcgVVRGLTggdW5pY29kZSB2YWx1ZXMKCSAqIEBwYXJhbSBib29sZWFuICRzZXRib20gaWYgdHJ1ZSBzZXQgdGhlIEJ5dGUgT3JkZXIgTWFyayAoQk9NID0gMHhGRUZGKQoJICogQHJldHVybiBzdHJpbmcKCSAqIEBwcm90ZWN0ZWQKCSAqIEBhdXRob3IgTmljb2xhIEFzdW5pCgkgKiBAc2luY2UgMi4xLjAwMCAoMjAwOC0wMS0wOCkKCSAqIEBwdWJsaWMgc3RhdGljCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYXJyVVRGOFRvVVRGMTZCRSgkdW5pY29kZSwgJHNldGJvbT1mYWxzZSkgewoJCSRvdXRzdHIgPSAnJzsgLy8gc3RyaW5nIHRvIGJlIHJldHVybmVkCgkJaWYgKCRzZXRib20pIHsKCQkJJG91dHN0ciAuPSAiXHhGRVx4RkYiOyAvLyBCeXRlIE9yZGVyIE1hcmsgKEJPTSkKCQl9CgkJZm9yZWFjaCAoJHVuaWNvZGUgYXMgJGNoYXIpIHsKCQkJaWYgKCRjaGFyID09IDB4MjAwYikgewoJCQkJLy8gc2tpcCBVbmljb2RlIENoYXJhY3RlciAnWkVSTyBXSURUSCBTUEFDRScgKERFQzo4MjAzLCBVKzIwMEIpCgkJCX0gZWxzZWlmICgkY2hhciA9PSAweEZGRkQpIHsKCQkJCSRvdXRzdHIgLj0gIlx4RkZceEZEIjsgLy8gcmVwbGFjZW1lbnQgY2hhcmFjdGVyCgkJCX0gZWxzZWlmICgkY2hhciA8IDB4MTAwMDApIHsKCQkJCSRvdXRzdHIgLj0gY2hyKCRjaGFyID4+IDB4MDgpOwoJCQkJJG91dHN0ciAuPSBjaHIoJGNoYXIgJiAweEZGKTsKCQkJfSBlbHNlIHsKCQkJCSRjaGFyIC09IDB4MTAwMDA7CgkJCQkkdzEgPSAweEQ4MDAgfCAoJGNoYXIgPj4gMHgwYSk7CgkJCQkkdzIgPSAweERDMDAgfCAoJGNoYXIgJiAweDNGRik7CgkJCQkkb3V0c3RyIC49IGNocigkdzEgPj4gMHgwOCk7CgkJCQkkb3V0c3RyIC49IGNocigkdzEgJiAweEZGKTsKCQkJCSRvdXRzdHIgLj0gY2hyKCR3MiA+PiAweDA4KTsKCQkJCSRvdXRzdHIgLj0gY2hyKCR3MiAmIDB4RkYpOwoJCQl9CgkJfQoJCXJldHVybiAkb3V0c3RyOwoJfQoKCS8qKgoJICogQ29udmVydCBhbiBhcnJheSBvZiBVVEY4IHZhbHVlcyB0byBhcnJheSBvZiB1bmljb2RlIGNoYXJhY3RlcnMKCSAqIEBwYXJhbSBhcnJheSAkdGEgVGhlIGlucHV0IGFycmF5IG9mIFVURjggdmFsdWVzLgoJICogQHBhcmFtIGJvb2xlYW4gJGlzdW5pY29kZSBUcnVlIGZvciBVbmljb2RlIG1vZGUsIGZhbHNlIG90aGVyd2lzZS4KCSAqIEByZXR1cm4gYXJyYXkgUmV0dXJuIGFycmF5IG9mIHVuaWNvZGUgY2hhcmFjdGVycwoJICogQHNpbmNlIDQuNS4wMzcgKDIwMDktMDQtMDcpCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIFVURjhBcnJheVRvVW5pQXJyYXkoJHRhLCAkaXN1bmljb2RlPXRydWUpIHsKCQlpZiAoJGlzdW5pY29kZSkgewoJCQlyZXR1cm4gYXJyYXlfbWFwKHN0YXRpYzo6Y2xhc3MuJzo6dW5pY2hyVW5pY29kZScsICR0YSk7CgkJfQoJCXJldHVybiBhcnJheV9tYXAoc3RhdGljOjpjbGFzcy4nOjp1bmljaHJBU0NJSScsICR0YSk7Cgl9CgoJLyoqCgkgKiBFeHRyYWN0IGEgc2xpY2Ugb2YgdGhlICRzdHJhcnIgYXJyYXkgYW5kIHJldHVybiBpdCBhcyBzdHJpbmcuCgkgKiBAcGFyYW0gc3RyaW5nW10gJHN0cmFyciBUaGUgaW5wdXQgYXJyYXkgb2YgY2hhcmFjdGVycy4KCSAqIEBwYXJhbSBpbnQgJHN0YXJ0IHRoZSBzdGFydGluZyBlbGVtZW50IG9mICRzdHJhcnIuCgkgKiBAcGFyYW0gaW50ICRlbmQgZmlyc3QgZWxlbWVudCB0aGF0IHdpbGwgbm90IGJlIHJldHVybmVkLgoJICogQHBhcmFtIGJvb2xlYW4gJHVuaWNvZGUgVHJ1ZSBpZiB3ZSBhcmUgaW4gdW5pY29kZSBtb2RlLCBmYWxzZSBvdGhlcndpc2UuCgkgKiBAcmV0dXJuIHN0cmluZyBSZXR1cm4gcGFydCBvZiBhIHN0cmluZwoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBVVEY4QXJyU3ViU3RyaW5nKCRzdHJhcnIsICRzdGFydD0nJywgJGVuZD0nJywgJHVuaWNvZGU9dHJ1ZSkgewoJCWlmIChzdHJsZW4oJHN0YXJ0KSA9PSAwKSB7CgkJCSRzdGFydCA9IDA7CgkJfQoJCWlmIChzdHJsZW4oJGVuZCkgPT0gMCkgewoJCQkkZW5kID0gY291bnQoJHN0cmFycik7CgkJfQoJCSRzdHJpbmcgPSAnJzsKCQlmb3IgKCRpID0gJHN0YXJ0OyAkaSA8ICRlbmQ7ICsrJGkpIHsKCQkJJHN0cmluZyAuPSBzZWxmOjp1bmljaHIoJHN0cmFyclskaV0sICR1bmljb2RlKTsKCQl9CgkJcmV0dXJuICRzdHJpbmc7Cgl9CgoJLyoqCgkgKiBFeHRyYWN0IGEgc2xpY2Ugb2YgdGhlICR1bmlhcnIgYXJyYXkgYW5kIHJldHVybiBpdCBhcyBzdHJpbmcuCgkgKiBAcGFyYW0gc3RyaW5nW10gJHVuaWFyciBUaGUgaW5wdXQgYXJyYXkgb2YgY2hhcmFjdGVycy4KCSAqIEBwYXJhbSBpbnQgJHN0YXJ0IHRoZSBzdGFydGluZyBlbGVtZW50IG9mICRzdHJhcnIuCgkgKiBAcGFyYW0gaW50ICRlbmQgZmlyc3QgZWxlbWVudCB0aGF0IHdpbGwgbm90IGJlIHJldHVybmVkLgoJICogQHJldHVybiBzdHJpbmcgUmV0dXJuIHBhcnQgb2YgYSBzdHJpbmcKCSAqIEBzaW5jZSA0LjUuMDM3ICgyMDA5LTA0LTA3KQoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBVbmlBcnJTdWJTdHJpbmcoJHVuaWFyciwgJHN0YXJ0PScnLCAkZW5kPScnKSB7CgkJaWYgKHN0cmxlbigkc3RhcnQpID09IDApIHsKCQkJJHN0YXJ0ID0gMDsKCQl9CgkJaWYgKHN0cmxlbigkZW5kKSA9PSAwKSB7CgkJCSRlbmQgPSBjb3VudCgkdW5pYXJyKTsKCQl9CgkJJHN0cmluZyA9ICcnOwoJCWZvciAoJGk9JHN0YXJ0OyAkaSA8ICRlbmQ7ICsrJGkpIHsKCQkJJHN0cmluZyAuPSAkdW5pYXJyWyRpXTsKCQl9CgkJcmV0dXJuICRzdHJpbmc7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBVVEYtOCBjaGFyYWN0ZXJzIGFycmF5IHRvIGFycmF5IG9mIExhdGluMSBjaGFyYWN0ZXJzIGFycmF5PGJyPgoJICogQHBhcmFtIGFycmF5ICR1bmljb2RlIGFycmF5IGNvbnRhaW5pbmcgVVRGLTggdW5pY29kZSB2YWx1ZXMKCSAqIEByZXR1cm4gYXJyYXkKCSAqIEBhdXRob3IgTmljb2xhIEFzdW5pCgkgKiBAc2luY2UgNC44LjAyMyAoMjAxMC0wMS0xNSkKCSAqIEBwdWJsaWMgc3RhdGljCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gVVRGOEFyclRvTGF0aW4xQXJyKCR1bmljb2RlKSB7CgkJJG91dGFyciA9IGFycmF5KCk7IC8vIGFycmF5IHRvIGJlIHJldHVybmVkCgkJZm9yZWFjaCAoJHVuaWNvZGUgYXMgJGNoYXIpIHsKCQkJaWYgKCRjaGFyIDwgMjU2KSB7CgkJCQkkb3V0YXJyW10gPSAkY2hhcjsKCQkJfSBlbHNlaWYgKGFycmF5X2tleV9leGlzdHMoJGNoYXIsIFRDUERGX0ZPTlRfREFUQTo6JHVuaV91dGY4dG9sYXRpbikpIHsKCQkJCS8vIG1hcCBmcm9tIFVURi04CgkJCQkkb3V0YXJyW10gPSBUQ1BERl9GT05UX0RBVEE6OiR1bmlfdXRmOHRvbGF0aW5bJGNoYXJdOwoJCQl9IGVsc2VpZiAoJGNoYXIgPT0gMHhGRkZEKSB7CgkJCQkvLyBza2lwCgkJCX0gZWxzZSB7CgkJCQkkb3V0YXJyW10gPSA2MzsgLy8gJz8nIGNoYXJhY3RlcgoJCQl9CgkJfQoJCXJldHVybiAkb3V0YXJyOwoJfQoKCS8qKgoJICogQ29udmVydHMgVVRGLTggY2hhcmFjdGVycyBhcnJheSB0byBMYXRpbjEgc3RyaW5nPGJyPgoJICogQHBhcmFtIGFycmF5ICR1bmljb2RlIGFycmF5IGNvbnRhaW5pbmcgVVRGLTggdW5pY29kZSB2YWx1ZXMKCSAqIEByZXR1cm4gc3RyaW5nCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHNpbmNlIDQuOC4wMjMgKDIwMTAtMDEtMTUpCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIFVURjhBcnJUb0xhdGluMSgkdW5pY29kZSkgewoJCSRvdXRzdHIgPSAnJzsgLy8gc3RyaW5nIHRvIGJlIHJldHVybmVkCgkJZm9yZWFjaCAoJHVuaWNvZGUgYXMgJGNoYXIpIHsKCQkJaWYgKCRjaGFyIDwgMjU2KSB7CgkJCQkkb3V0c3RyIC49IGNocigkY2hhcik7CgkJCX0gZWxzZWlmIChhcnJheV9rZXlfZXhpc3RzKCRjaGFyLCBUQ1BERl9GT05UX0RBVEE6OiR1bmlfdXRmOHRvbGF0aW4pKSB7CgkJCQkvLyBtYXAgZnJvbSBVVEYtOAoJCQkJJG91dHN0ciAuPSBjaHIoVENQREZfRk9OVF9EQVRBOjokdW5pX3V0Zjh0b2xhdGluWyRjaGFyXSk7CgkJCX0gZWxzZWlmICgkY2hhciA9PSAweEZGRkQpIHsKCQkJCS8vIHNraXAKCQkJfSBlbHNlIHsKCQkJCSRvdXRzdHIgLj0gJz8nOwoJCQl9CgkJfQoJCXJldHVybiAkb3V0c3RyOwoJfQoKCS8qKgoJICogQ29udmVydHMgVVRGLTggY2hhcmFjdGVyIHRvIGludGVnZXIgdmFsdWUuPGJyPgoJICogVXNlcyB0aGUgZ2V0VW5pb3JkKCkgbWV0aG9kIGlmIHRoZSB2YWx1ZSBpcyBub3QgY2FjaGVkLgoJICogQHBhcmFtIHN0cmluZyAkdWNoIGNoYXJhY3RlciBzdHJpbmcgdG8gcHJvY2Vzcy4KCSAqIEByZXR1cm4gaW50IFVuaWNvZGUgdmFsdWUKCSAqIEBwdWJsaWMgc3RhdGljCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gdW5pb3JkKCR1Y2gpIHsKCQlpZiAoIWlzc2V0KHNlbGY6OiRjYWNoZV91bmlvcmRbJHVjaF0pKSB7CgkJCXNlbGY6OiRjYWNoZV91bmlvcmRbJHVjaF0gPSBzZWxmOjpnZXRVbmlvcmQoJHVjaCk7CgkJfQoJCXJldHVybiBzZWxmOjokY2FjaGVfdW5pb3JkWyR1Y2hdOwoJfQoKCS8qKgoJICogQ29udmVydHMgVVRGLTggY2hhcmFjdGVyIHRvIGludGVnZXIgdmFsdWUuPGJyPgoJICogSW52YWxpZCBieXRlIHNlcXVlbmNlcyB3aWxsIGJlIHJlcGxhY2VkIHdpdGggMHhGRkZEIChyZXBsYWNlbWVudCBjaGFyYWN0ZXIpPGJyPgoJICogQmFzZWQgb246IGh0dHA6Ly93d3cuZmFxcy5vcmcvcmZjcy9yZmMzNjI5Lmh0bWwKCSAqIDxwcmU+CgkgKiAgICBDaGFyLiBudW1iZXIgcmFuZ2UgIHwgICAgICAgIFVURi04IG9jdGV0IHNlcXVlbmNlCgkgKiAgICAgICAoaGV4YWRlY2ltYWwpICAgIHwgICAgICAgICAgICAgIChiaW5hcnkpCgkgKiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJICogICAgMDAwMCAwMDAwLTAwMDAgMDA3RiB8IDB4eHh4eHh4CgkgKiAgICAwMDAwIDAwODAtMDAwMCAwN0ZGIHwgMTEweHh4eHggMTB4eHh4eHgKCSAqICAgIDAwMDAgMDgwMC0wMDAwIEZGRkYgfCAxMTEweHh4eCAxMHh4eHh4eCAxMHh4eHh4eAoJICogICAgMDAwMSAwMDAwLTAwMTAgRkZGRiB8IDExMTEweHh4IDEweHh4eHh4IDEweHh4eHh4IDEweHh4eHh4CgkgKiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCSAqCgkgKiAgIEFCRk4gbm90YXRpb246CgkgKiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJICogICBVVEY4LW9jdGV0cyA9ICooIFVURjgtY2hhciApCgkgKiAgIFVURjgtY2hhciAgID0gVVRGOC0xIC8gVVRGOC0yIC8gVVRGOC0zIC8gVVRGOC00CgkgKiAgIFVURjgtMSAgICAgID0gJXgwMC03RgoJICogICBVVEY4LTIgICAgICA9ICV4QzItREYgVVRGOC10YWlsCgkgKgoJICogICBVVEY4LTMgICAgICA9ICV4RTAgJXhBMC1CRiBVVEY4LXRhaWwgLyAleEUxLUVDIDIoIFVURjgtdGFpbCApIC8KCSAqICAgICAgICAgICAgICAgICAleEVEICV4ODAtOUYgVVRGOC10YWlsIC8gJXhFRS1FRiAyKCBVVEY4LXRhaWwgKQoJICogICBVVEY4LTQgICAgICA9ICV4RjAgJXg5MC1CRiAyKCBVVEY4LXRhaWwgKSAvICV4RjEtRjMgMyggVVRGOC10YWlsICkgLwoJICogICAgICAgICAgICAgICAgICV4RjQgJXg4MC04RiAyKCBVVEY4LXRhaWwgKQoJICogICBVVEY4LXRhaWwgICA9ICV4ODAtQkYKCSAqICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkgKiA8L3ByZT4KCSAqIEBwYXJhbSBzdHJpbmcgJHVjaCBjaGFyYWN0ZXIgc3RyaW5nIHRvIHByb2Nlc3MuCgkgKiBAcmV0dXJuIGludCBVbmljb2RlIHZhbHVlCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVbmlvcmQoJHVjaCkgewoJCWlmIChmdW5jdGlvbl9leGlzdHMoJ21iX2NvbnZlcnRfZW5jb2RpbmcnKSkgewoJCQlsaXN0KCwgJGNoYXIpID0gQHVucGFjaygnTicsIG1iX2NvbnZlcnRfZW5jb2RpbmcoJHVjaCwgJ1VDUy00QkUnLCAnVVRGLTgnKSk7CgkJCWlmICgkY2hhciA+PSAwKSB7CgkJCQlyZXR1cm4gJGNoYXI7CgkJCX0KCQl9CgkJJGJ5dGVzID0gYXJyYXkoKTsgLy8gYXJyYXkgY29udGFpbmluZyBzaW5nbGUgY2hhcmFjdGVyIGJ5dGUgc2VxdWVuY2VzCgkJJGNvdW50Ynl0ZXMgPSAwOwoJCSRudW1ieXRlcyA9IDE7IC8vIG51bWJlciBvZiBvY3RldGMgbmVlZGVkIHRvIHJlcHJlc2VudCB0aGUgVVRGLTggY2hhcmFjdGVyCgkJJGxlbmd0aCA9IHN0cmxlbigkdWNoKTsKCQlmb3IgKCRpID0gMDsgJGkgPCAkbGVuZ3RoOyArKyRpKSB7CgkJCSRjaGFyID0gb3JkKCR1Y2hbJGldKTsgLy8gZ2V0IG9uZSBzdHJpbmcgY2hhcmFjdGVyIGF0IHRpbWUKCQkJaWYgKCRjb3VudGJ5dGVzID09IDApIHsgLy8gZ2V0IHN0YXJ0aW5nIG9jdGVjdAoJCQkJaWYgKCRjaGFyIDw9IDB4N0YpIHsKCQkJCQlyZXR1cm4gJGNoYXI7IC8vIHVzZSB0aGUgY2hhcmFjdGVyICJhcyBpcyIgYmVjYXVzZSBpcyBBU0NJSQoJCQkJfSBlbHNlaWYgKCgkY2hhciA+PiAweDA1KSA9PSAweDA2KSB7IC8vIDIgYnl0ZXMgY2hhcmFjdGVyICgweDA2ID0gMTEwIEJJTikKCQkJCQkkYnl0ZXNbXSA9ICgkY2hhciAtIDB4QzApIDw8IDB4MDY7CgkJCQkJKyskY291bnRieXRlczsKCQkJCQkkbnVtYnl0ZXMgPSAyOwoJCQkJfSBlbHNlaWYgKCgkY2hhciA+PiAweDA0KSA9PSAweDBFKSB7IC8vIDMgYnl0ZXMgY2hhcmFjdGVyICgweDBFID0gMTExMCBCSU4pCgkJCQkJJGJ5dGVzW10gPSAoJGNoYXIgLSAweEUwKSA8PCAweDBDOwoJCQkJCSsrJGNvdW50Ynl0ZXM7CgkJCQkJJG51bWJ5dGVzID0gMzsKCQkJCX0gZWxzZWlmICgoJGNoYXIgPj4gMHgwMykgPT0gMHgxRSkgeyAvLyA0IGJ5dGVzIGNoYXJhY3RlciAoMHgxRSA9IDExMTEwIEJJTikKCQkJCQkkYnl0ZXNbXSA9ICgkY2hhciAtIDB4RjApIDw8IDB4MTI7CgkJCQkJKyskY291bnRieXRlczsKCQkJCQkkbnVtYnl0ZXMgPSA0OwoJCQkJfSBlbHNlIHsKCQkJCQkvLyB1c2UgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIGZvciBvdGhlciBpbnZhbGlkIHNlcXVlbmNlcwoJCQkJCXJldHVybiAweEZGRkQ7CgkJCQl9CgkJCX0gZWxzZWlmICgoJGNoYXIgPj4gMHgwNikgPT0gMHgwMikgeyAvLyBieXRlcyAyLCAzIGFuZCA0IG11c3Qgc3RhcnQgd2l0aCAweDAyID0gMTAgQklOCgkJCQkkYnl0ZXNbXSA9ICRjaGFyIC0gMHg4MDsKCQkJCSsrJGNvdW50Ynl0ZXM7CgkJCQlpZiAoJGNvdW50Ynl0ZXMgPT0gJG51bWJ5dGVzKSB7CgkJCQkJLy8gY29tcG9zZSBVVEYtOCBieXRlcyB0byBhIHNpbmdsZSB1bmljb2RlIHZhbHVlCgkJCQkJJGNoYXIgPSAkYnl0ZXNbMF07CgkJCQkJZm9yICgkaiA9IDE7ICRqIDwgJG51bWJ5dGVzOyArKyRqKSB7CgkJCQkJCSRjaGFyICs9ICgkYnl0ZXNbJGpdIDw8ICgoJG51bWJ5dGVzIC0gJGogLSAxKSAqIDB4MDYpKTsKCQkJCQl9CgkJCQkJaWYgKCgoJGNoYXIgPj0gMHhEODAwKSBBTkQgKCRjaGFyIDw9IDB4REZGRikpIE9SICgkY2hhciA+PSAweDEwRkZGRikpIHsKCQkJCQkJLy8gVGhlIGRlZmluaXRpb24gb2YgVVRGLTggcHJvaGliaXRzIGVuY29kaW5nIGNoYXJhY3RlciBudW1iZXJzIGJldHdlZW4KCQkJCQkJLy8gVStEODAwIGFuZCBVK0RGRkYsIHdoaWNoIGFyZSByZXNlcnZlZCBmb3IgdXNlIHdpdGggdGhlIFVURi0xNgoJCQkJCQkvLyBlbmNvZGluZyBmb3JtIChhcyBzdXJyb2dhdGUgcGFpcnMpIGFuZCBkbyBub3QgZGlyZWN0bHkgcmVwcmVzZW50CgkJCQkJCS8vIGNoYXJhY3RlcnMuCgkJCQkJCXJldHVybiAweEZGRkQ7IC8vIHVzZSByZXBsYWNlbWVudCBjaGFyYWN0ZXIKCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gJGNoYXI7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJLy8gdXNlIHJlcGxhY2VtZW50IGNoYXJhY3RlciBmb3Igb3RoZXIgaW52YWxpZCBzZXF1ZW5jZXMKCQkJCXJldHVybiAweEZGRkQ7CgkJCX0KCQl9CgkJcmV0dXJuIDB4RkZGRDsKCX0KCgkvKioKCSAqIENvbnZlcnRzIFVURi04IHN0cmluZ3MgdG8gY29kZXBvaW50cyBhcnJheS48YnI+CgkgKiBJbnZhbGlkIGJ5dGUgc2VxdWVuY2VzIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCAweEZGRkQgKHJlcGxhY2VtZW50IGNoYXJhY3Rlcik8YnI+CgkgKiBAcGFyYW0gc3RyaW5nICRzdHIgc3RyaW5nIHRvIHByb2Nlc3MuCgkgKiBAcGFyYW0gYm9vbGVhbiAkaXN1bmljb2RlIFRydWUgd2hlbiB0aGUgZG9jdW1ldG4gaXMgaW4gVW5pY29kZSBtb2RlLCBmYWxzZSBvdGhlcndpc2UuCgkgKiBAcGFyYW0gYXJyYXkgJGN1cnJlbnRmb250IFJlZmVyZW5jZSB0byBjdXJyZW50IGZvbnQgYXJyYXkuCgkgKiBAcmV0dXJuIGFycmF5IGNvbnRhaW5pbmcgY29kZXBvaW50cyAoVVRGLTggY2hhcmFjdGVycyB2YWx1ZXMpCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBVVEY4U3RyaW5nVG9BcnJheSgkc3RyLCAkaXN1bmljb2RlLCAmJGN1cnJlbnRmb250KSB7CgkJJHN0ciA9IGlzX251bGwoJHN0cikgPyAnJyA6ICRzdHI7CgkJaWYgKCRpc3VuaWNvZGUpIHsKCQkJLy8gcmVxdWlyZXMgUENSRSB1bmljb2RlIHN1cHBvcnQgdHVybmVkIG9uCgkJCSRjaGFycyA9IFRDUERGX1NUQVRJQzo6cHJlZ1NwbGl0KCcvLycsJ3UnLCAkc3RyLCAtMSwgUFJFR19TUExJVF9OT19FTVBUWSk7CgkJCSRjYXJyID0gYXJyYXlfbWFwKHN0YXRpYzo6Y2xhc3MuJzo6dW5pb3JkJywgJGNoYXJzKTsKCQl9IGVsc2UgewoJCQkkY2hhcnMgPSBzdHJfc3BsaXQoJHN0cik7CgkJCSRjYXJyID0gYXJyYXlfbWFwKCdvcmQnLCAkY2hhcnMpOwoJCX0KCQlpZiAoaXNfYXJyYXkoJGN1cnJlbnRmb250WydzdWJzZXRjaGFycyddKSAmJiBpc19hcnJheSgkY2FycikpIHsKCQkJJGN1cnJlbnRmb250WydzdWJzZXRjaGFycyddICs9IGFycmF5X2ZpbGxfa2V5cygkY2FyciwgdHJ1ZSk7CgkJfSBlbHNlIHsKCQkJJGN1cnJlbnRmb250WydzdWJzZXRjaGFycyddID0gYXJyYXlfbWVyZ2UoJGN1cnJlbnRmb250WydzdWJzZXRjaGFycyddLCAkY2Fycik7CgkJfQoJCXJldHVybiAkY2FycjsKCX0KCgkvKioKCSAqIENvbnZlcnRzIFVURi04IHN0cmluZ3MgdG8gTGF0aW4xIHdoZW4gdXNpbmcgdGhlIHN0YW5kYXJkIDE0IGNvcmUgZm9udHMuPGJyPgoJICogQHBhcmFtIHN0cmluZyAkc3RyIHN0cmluZyB0byBwcm9jZXNzLgoJICogQHBhcmFtIGJvb2xlYW4gJGlzdW5pY29kZSBUcnVlIHdoZW4gdGhlIGRvY3VtZXRuIGlzIGluIFVuaWNvZGUgbW9kZSwgZmFsc2Ugb3RoZXJ3aXNlLgoJICogQHBhcmFtIGFycmF5ICRjdXJyZW50Zm9udCBSZWZlcmVuY2UgdG8gY3VycmVudCBmb250IGFycmF5LgoJICogQHJldHVybiBzdHJpbmcKCSAqIEBzaW5jZSAzLjIuMDAwICgyMDA4LTA2LTIzKQoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBVVEY4VG9MYXRpbjEoJHN0ciwgJGlzdW5pY29kZSwgJiRjdXJyZW50Zm9udCkgewoJCSR1bmljb2RlID0gc2VsZjo6VVRGOFN0cmluZ1RvQXJyYXkoJHN0ciwgJGlzdW5pY29kZSwgJGN1cnJlbnRmb250KTsgLy8gYXJyYXkgY29udGFpbmluZyBVVEYtOCB1bmljb2RlIHZhbHVlcwoJCXJldHVybiBzZWxmOjpVVEY4QXJyVG9MYXRpbjEoJHVuaWNvZGUpOwoJfQoKCS8qKgoJICogQ29udmVydHMgVVRGLTggc3RyaW5ncyB0byBVVEYxNi1CRS48YnI+CgkgKiBAcGFyYW0gc3RyaW5nICRzdHIgc3RyaW5nIHRvIHByb2Nlc3MuCgkgKiBAcGFyYW0gYm9vbGVhbiAkc2V0Ym9tIGlmIHRydWUgc2V0IHRoZSBCeXRlIE9yZGVyIE1hcmsgKEJPTSA9IDB4RkVGRikKCSAqIEBwYXJhbSBib29sZWFuICRpc3VuaWNvZGUgVHJ1ZSB3aGVuIHRoZSBkb2N1bWV0biBpcyBpbiBVbmljb2RlIG1vZGUsIGZhbHNlIG90aGVyd2lzZS4KCSAqIEBwYXJhbSBhcnJheSAkY3VycmVudGZvbnQgUmVmZXJlbmNlIHRvIGN1cnJlbnQgZm9udCBhcnJheS4KCSAqIEByZXR1cm4gc3RyaW5nCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHNpbmNlIDEuNTMuMC5UQzAwNSAoMjAwNS0wMS0wNSkKCSAqIEBwdWJsaWMgc3RhdGljCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gVVRGOFRvVVRGMTZCRSgkc3RyLCAkc2V0Ym9tLCAkaXN1bmljb2RlLCAmJGN1cnJlbnRmb250KSB7CgkJaWYgKCEkaXN1bmljb2RlKSB7CgkJCXJldHVybiAkc3RyOyAvLyBzdHJpbmcgaXMgbm90IGluIHVuaWNvZGUKCQl9CgkJJHVuaWNvZGUgPSBzZWxmOjpVVEY4U3RyaW5nVG9BcnJheSgkc3RyLCAkaXN1bmljb2RlLCAkY3VycmVudGZvbnQpOyAvLyBhcnJheSBjb250YWluaW5nIFVURi04IHVuaWNvZGUgdmFsdWVzCgkJcmV0dXJuIHNlbGY6OmFyclVURjhUb1VURjE2QkUoJHVuaWNvZGUsICRzZXRib20pOwoJfQoKCS8qKgoJICogUmV2ZXJzZSB0aGUgUkxUIHN1YnN0cmluZ3MgdXNpbmcgdGhlIEJpZGlyZWN0aW9uYWwgQWxnb3JpdGhtIChodHRwOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvKS4KCSAqIEBwYXJhbSBzdHJpbmcgJHN0ciBzdHJpbmcgdG8gbWFuaXB1bGF0ZS4KCSAqIEBwYXJhbSBib29sICRzZXRib20gaWYgdHJ1ZSBzZXQgdGhlIEJ5dGUgT3JkZXIgTWFyayAoQk9NID0gMHhGRUZGKQoJICogQHBhcmFtIGJvb2wgJGZvcmNlcnRsIGlmIHRydWUgZm9yY2VzIFJUTCB0ZXh0IGRpcmVjdGlvbgoJICogQHBhcmFtIGJvb2xlYW4gJGlzdW5pY29kZSBUcnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiBVbmljb2RlIG1vZGUsIGZhbHNlIG90aGVyd2lzZS4KCSAqIEBwYXJhbSBhcnJheSAkY3VycmVudGZvbnQgUmVmZXJlbmNlIHRvIGN1cnJlbnQgZm9udCBhcnJheS4KCSAqIEByZXR1cm4gc3RyaW5nCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHNpbmNlIDIuMS4wMDAgKDIwMDgtMDEtMDgpCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHV0ZjhTdHJSZXYoJHN0ciwgJHNldGJvbSwgJGZvcmNlcnRsLCAkaXN1bmljb2RlLCAmJGN1cnJlbnRmb250KSB7CgkJcmV0dXJuIHNlbGY6OnV0ZjhTdHJBcnJSZXYoc2VsZjo6VVRGOFN0cmluZ1RvQXJyYXkoJHN0ciwgJGlzdW5pY29kZSwgJGN1cnJlbnRmb250KSwgJHN0ciwgJHNldGJvbSwgJGZvcmNlcnRsLCAkaXN1bmljb2RlLCAkY3VycmVudGZvbnQpOwoJfQoKCS8qKgoJICogUmV2ZXJzZSB0aGUgUkxUIHN1YnN0cmluZ3MgYXJyYXkgdXNpbmcgdGhlIEJpZGlyZWN0aW9uYWwgQWxnb3JpdGhtIChodHRwOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvKS4KCSAqIEBwYXJhbSBhcnJheSAkYXJyIGFycmF5IG9mIHVuaWNvZGUgdmFsdWVzLgoJICogQHBhcmFtIHN0cmluZyAkc3RyIHN0cmluZyB0byBtYW5pcHVsYXRlIChvciBlbXB0eSB2YWx1ZSkuCgkgKiBAcGFyYW0gYm9vbCAkc2V0Ym9tIGlmIHRydWUgc2V0IHRoZSBCeXRlIE9yZGVyIE1hcmsgKEJPTSA9IDB4RkVGRikKCSAqIEBwYXJhbSBib29sICRmb3JjZXJ0bCBpZiB0cnVlIGZvcmNlcyBSVEwgdGV4dCBkaXJlY3Rpb24KCSAqIEBwYXJhbSBib29sZWFuICRpc3VuaWNvZGUgVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gVW5pY29kZSBtb2RlLCBmYWxzZSBvdGhlcndpc2UuCgkgKiBAcGFyYW0gYXJyYXkgJGN1cnJlbnRmb250IFJlZmVyZW5jZSB0byBjdXJyZW50IGZvbnQgYXJyYXkuCgkgKiBAcmV0dXJuIHN0cmluZwoJICogQGF1dGhvciBOaWNvbGEgQXN1bmkKCSAqIEBzaW5jZSA0LjkuMDAwICgyMDEwLTAzLTI3KQoJICogQHB1YmxpYyBzdGF0aWMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1dGY4U3RyQXJyUmV2KCRhcnIsICRzdHIsICRzZXRib20sICRmb3JjZXJ0bCwgJGlzdW5pY29kZSwgJiRjdXJyZW50Zm9udCkgewoJCXJldHVybiBzZWxmOjphcnJVVEY4VG9VVEYxNkJFKHNlbGY6OnV0ZjhCaWRpKCRhcnIsICRzdHIsICRmb3JjZXJ0bCwgJGlzdW5pY29kZSwgJGN1cnJlbnRmb250KSwgJHNldGJvbSk7Cgl9CgoJLyoqCgkgKiBSZXZlcnNlIHRoZSBSTFQgc3Vic3RyaW5ncyB1c2luZyB0aGUgQmlkaXJlY3Rpb25hbCBBbGdvcml0aG0gKGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcnRzL3RyOS8pLgoJICogQHBhcmFtIGFycmF5ICR0YSBhcnJheSBvZiBjaGFyYWN0ZXJzIGNvbXBvc2luZyB0aGUgc3RyaW5nLgoJICogQHBhcmFtIHN0cmluZyAkc3RyIHN0cmluZyB0byBwcm9jZXNzCgkgKiBAcGFyYW0gYm9vbCAkZm9yY2VydGwgaWYgJ1InIGZvcmNlcyBSVEwsIGlmICdMJyBmb3JjZXMgTFRSCgkgKiBAcGFyYW0gYm9vbGVhbiAkaXN1bmljb2RlIFRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIFVuaWNvZGUgbW9kZSwgZmFsc2Ugb3RoZXJ3aXNlLgoJICogQHBhcmFtIGFycmF5ICRjdXJyZW50Zm9udCBSZWZlcmVuY2UgdG8gY3VycmVudCBmb250IGFycmF5LgoJICogQHJldHVybiBhcnJheSBvZiB1bmljb2RlIGNoYXJzCgkgKiBAYXV0aG9yIE5pY29sYSBBc3VuaQoJICogQHNpbmNlIDIuNC4wMDAgKDIwMDgtMDMtMDYpCgkgKiBAcHVibGljIHN0YXRpYwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHV0ZjhCaWRpKCR0YSwgJHN0ciwgJGZvcmNlcnRsLCAkaXN1bmljb2RlLCAmJGN1cnJlbnRmb250KSB7CgkJLy8gcGFyYWdyYXBoIGVtYmVkZGluZyBsZXZlbAoJCSRwZWwgPSAwOwoJCS8vIG1heCBsZXZlbAoJCSRtYXhsZXZlbCA9IDA7CgkJaWYgKFRDUERGX1NUQVRJQzo6ZW1wdHlfc3RyaW5nKCRzdHIpKSB7CgkJCS8vIGNyZWF0ZSBzdHJpbmcgZnJvbSBhcnJheQoJCQkkc3RyID0gc2VsZjo6VVRGOEFyclN1YlN0cmluZygkdGEsICcnLCAnJywgJGlzdW5pY29kZSk7CgkJfQoJCS8vIGNoZWNrIGlmIHN0cmluZyBjb250YWlucyBhcmFiaWMgdGV4dAoJCWlmIChwcmVnX21hdGNoKFRDUERGX0ZPTlRfREFUQTo6JHVuaV9SRV9QQVRURVJOX0FSQUJJQywgJHN0cikpIHsKCQkJJGFyYWJpYyA9IHRydWU7CgkJfSBlbHNlIHsKCQkJJGFyYWJpYyA9IGZhbHNlOwoJCX0KCQkvLyBjaGVjayBpZiBzdHJpbmcgY29udGFpbnMgUlRMIHRleHQKCQlpZiAoISgkZm9yY2VydGwgT1IgJGFyYWJpYyBPUiBwcmVnX21hdGNoKFRDUERGX0ZPTlRfREFUQTo6JHVuaV9SRV9QQVRURVJOX1JUTCwgJHN0cikpKSB7CgkJCXJldHVybiAkdGE7CgkJfQoKCQkvLyBnZXQgbnVtYmVyIG9mIGNoYXJzCgkJJG51bWNoYXJzID0gY291bnQoJHRhKTsKCgkJaWYgKCRmb3JjZXJ0bCA9PSAnUicpIHsKCQkJJHBlbCA9IDE7CgkJfSBlbHNlaWYgKCRmb3JjZXJ0bCA9PSAnTCcpIHsKCQkJJHBlbCA9IDA7CgkJfSBlbHNlIHsKCQkJLy8gUDIuIEluIGVhY2ggcGFyYWdyYXBoLCBmaW5kIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgdHlwZSBMLCBBTCwgb3IgUi4KCQkJLy8gUDMuIElmIGEgY2hhcmFjdGVyIGlzIGZvdW5kIGluIFAyIGFuZCBpdCBpcyBvZiB0eXBlIEFMIG9yIFIsIHRoZW4gc2V0IHRoZSBwYXJhZ3JhcGggZW1iZWRkaW5nIGxldmVsIHRvIG9uZTsgb3RoZXJ3aXNlLCBzZXQgaXQgdG8gemVyby4KCQkJZm9yICgkaT0wOyAkaSA8ICRudW1jaGFyczsgKyskaSkgewoJCQkJJHR5cGUgPSBUQ1BERl9GT05UX0RBVEE6OiR1bmlfdHlwZVskdGFbJGldXTsKCQkJCWlmICgkdHlwZSA9PSAnTCcpIHsKCQkJCQkkcGVsID0gMDsKCQkJCQlicmVhazsKCQkJCX0gZWxzZWlmICgoJHR5cGUgPT0gJ0FMJykgT1IgKCR0eXBlID09ICdSJykpIHsKCQkJCQkkcGVsID0gMTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gQ3VycmVudCBFbWJlZGRpbmcgTGV2ZWwKCQkkY2VsID0gJHBlbDsKCQkvLyBkaXJlY3Rpb25hbCBvdmVycmlkZSBzdGF0dXMKCQkkZG9zID0gJ04nOwoJCSRyZW1lbWJlciA9IGFycmF5KCk7CgkJLy8gc3RhcnQtb2YtbGV2ZWwtcnVuCgkJJHNvciA9ICRwZWwgJSAyID8gJ1InIDogJ0wnOwoJCSRlb3IgPSAkc29yOwoKCQkvLyBBcnJheSBvZiBjaGFyYWN0ZXJzIGRhdGEKCQkkY2hhcmRhdGEgPSBBcnJheSgpOwoKCQkvLyBYMS4gQmVnaW4gYnkgc2V0dGluZyB0aGUgY3VycmVudCBlbWJlZGRpbmcgbGV2ZWwgdG8gdGhlIHBhcmFncmFwaCBlbWJlZGRpbmcgbGV2ZWwuIFNldCB0aGUgZGlyZWN0aW9uYWwgb3ZlcnJpZGUgc3RhdHVzIHRvIG5ldXRyYWwuIFByb2Nlc3MgZWFjaCBjaGFyYWN0ZXIgaXRlcmF0aXZlbHksIGFwcGx5aW5nIHJ1bGVzIFgyIHRocm91Z2ggWDkuIE9ubHkgZW1iZWRkaW5nIGxldmVscyBmcm9tIDAgdG8gNjEgYXJlIHZhbGlkIGluIHRoaXMgcGhhc2UuCgkJLy8gSW4gdGhlIHJlc29sdXRpb24gb2YgbGV2ZWxzIGluIHJ1bGVzIEkxIGFuZCBJMiwgdGhlIG1heGltdW0gZW1iZWRkaW5nIGxldmVsIG9mIDYyIGNhbiBiZSByZWFjaGVkLgoJCWZvciAoJGk9MDsgJGkgPCAkbnVtY2hhcnM7ICsrJGkpIHsKCQkJaWYgKCR0YVskaV0gPT0gVENQREZfRk9OVF9EQVRBOjokdW5pX1JMRSkgewoJCQkJLy8gWDIuIFdpdGggZWFjaCBSTEUsIGNvbXB1dGUgdGhlIGxlYXN0IGdyZWF0ZXIgb2RkIGVtYmVkZGluZyBsZXZlbC4KCQkJCS8vCWEuIElmIHRoaXMgbmV3IGxldmVsIHdvdWxkIGJlIHZhbGlkLCB0aGVuIHRoaXMgZW1iZWRkaW5nIGNvZGUgaXMgdmFsaWQuIFJlbWVtYmVyIChwdXNoKSB0aGUgY3VycmVudCBlbWJlZGRpbmcgbGV2ZWwgYW5kIG92ZXJyaWRlIHN0YXR1cy4gUmVzZXQgdGhlIGN1cnJlbnQgbGV2ZWwgdG8gdGhpcyBuZXcgbGV2ZWwsIGFuZCByZXNldCB0aGUgb3ZlcnJpZGUgc3RhdHVzIHRvIG5ldXRyYWwuCgkJCQkvLwliLiBJZiB0aGUgbmV3IGxldmVsIHdvdWxkIG5vdCBiZSB2YWxpZCwgdGhlbiB0aGlzIGNvZGUgaXMgaW52YWxpZC4gRG8gbm90IGNoYW5nZSB0aGUgY3VycmVudCBsZXZlbCBvciBvdmVycmlkZSBzdGF0dXMuCgkJCQkkbmV4dF9sZXZlbCA9ICRjZWwgKyAoJGNlbCAlIDIpICsgMTsKCQkJCWlmICgkbmV4dF9sZXZlbCA8IDYyKSB7CgkJCQkJJHJlbWVtYmVyW10gPSBhcnJheSgnbnVtJyA9PiBUQ1BERl9GT05UX0RBVEE6OiR1bmlfUkxFLCAnY2VsJyA9PiAkY2VsLCAnZG9zJyA9PiAkZG9zKTsKCQkJCQkkY2VsID0gJG5leHRfbGV2ZWw7CgkJCQkJJGRvcyA9ICdOJzsKCQkJCQkkc29yID0gJGVvcjsKCQkJCQkkZW9yID0gJGNlbCAlIDIgPyAnUicgOiAnTCc7CgkJCQl9CgkJCX0gZWxzZWlmICgkdGFbJGldID09IFRDUERGX0ZPTlRfREFUQTo6JHVuaV9MUkUpIHsKCQkJCS8vIFgzLiBXaXRoIGVhY2ggTFJFLCBjb21wdXRlIHRoZSBsZWFzdCBncmVhdGVyIGV2ZW4gZW1iZWRkaW5nIGxldmVsLgoJCQkJLy8JYS4gSWYgdGhpcyBuZXcgbGV2ZWwgd291bGQgYmUgdmFsaWQsIHRoZW4gdGhpcyBlbWJlZGRpbmcgY29kZSBpcyB2YWxpZC4gUmVtZW1iZXIgKHB1c2gpIHRoZSBjdXJyZW50IGVtYmVkZGluZyBsZXZlbCBhbmQgb3ZlcnJpZGUgc3RhdHVzLiBSZXNldCB0aGUgY3VycmVudCBsZXZlbCB0byB0aGlzIG5ldyBsZXZlbCwgYW5kIHJlc2V0IHRoZSBvdmVycmlkZSBzdGF0dXMgdG8gbmV1dHJhbC4KCQkJCS8vCWIuIElmIHRoZSBuZXcgbGV2ZWwgd291bGQgbm90IGJlIHZhbGlkLCB0aGVuIHRoaXMgY29kZSBpcyBpbnZhbGlkLiBEbyBub3QgY2hhbmdlIHRoZSBjdXJyZW50IGxldmVsIG9yIG92ZXJyaWRlIHN0YXR1cy4KCQkJCSRuZXh0X2xldmVsID0gJGNlbCArIDIgLSAoJGNlbCAlIDIpOwoJCQkJaWYgKCAkbmV4dF9sZXZlbCA8IDYyICkgewoJCQkJCSRyZW1lbWJlcltdID0gYXJyYXkoJ251bScgPT4gVENQREZfRk9OVF9EQVRBOjokdW5pX0xSRSwgJ2NlbCcgPT4gJGNlbCwgJ2RvcycgPT4gJGRvcyk7CgkJCQkJJGNlbCA9ICRuZXh0X2xldmVsOwoJCQkJCSRkb3MgPSAnTic7CgkJCQkJJHNvciA9ICRlb3I7CgkJCQkJJGVvciA9ICRjZWwgJSAyID8gJ1InIDogJ0wnOwoJCQkJfQoJCQl9IGVsc2VpZiAoJHRhWyRpXSA9PSBUQ1BERl9GT05UX0RBVEE6OiR1bmlfUkxPKSB7CgkJCQkvLyBYNC4gV2l0aCBlYWNoIFJMTywgY29tcHV0ZSB0aGUgbGVhc3QgZ3JlYXRlciBvZGQgZW1iZWRkaW5nIGxldmVsLgoJCQkJLy8JYS4gSWYgdGhpcyBuZXcgbGV2ZWwgd291bGQgYmUgdmFsaWQsIHRoZW4gdGhpcyBlbWJlZGRpbmcgY29kZSBpcyB2YWxpZC4gUmVtZW1iZXIgKHB1c2gpIHRoZSBjdXJyZW50IGVtYmVkZGluZyBsZXZlbCBhbmQgb3ZlcnJpZGUgc3RhdHVzLiBSZXNldCB0aGUgY3VycmVudCBsZXZlbCB0byB0aGlzIG5ldyBsZXZlbCwgYW5kIHJlc2V0IHRoZSBvdmVycmlkZSBzdGF0dXMgdG8gcmlnaHQtdG8tbGVmdC4KCQkJCS8vCWIuIElmIHRoZSBuZXcgbGV2ZWwgd291bGQgbm90IGJlIHZhbGlkLCB0aGVuIHRoaXMgY29kZSBpcyBpbnZhbGlkLiBEbyBub3QgY2hhbmdlIHRoZSBjdXJyZW50IGxldmVsIG9yIG92ZXJyaWRlIHN0YXR1cy4KCQkJCSRuZXh0X2xldmVsID0gJGNlbCArICgkY2VsICUgMikgKyAxOwoJCQkJaWYgKCRuZXh0X2xldmVsIDwgNjIpIHsKCQkJCQkkcmVtZW1iZXJbXSA9IGFycmF5KCdudW0nID0+IFRDUERGX0ZPTlRfREFUQTo6JHVuaV9STE8sICdjZWwnID0+ICRjZWwsICdkb3MnID0+ICRkb3MpOwoJCQkJCSRjZWwgPSAkbmV4dF9sZXZlbDsKCQkJCQkkZG9zID0gJ1InOwoJCQkJCSRzb3IgPSAkZW9yOwoJCQkJCSRlb3IgPSAkY2VsICUgMiA/ICdSJyA6ICdMJzsKCQkJCX0KCQkJfSBlbHNlaWYgKCR0YVskaV0gPT0gVENQREZfRk9OVF9EQVRBOjokdW5pX0xSTykgewoJCQkJLy8gWDUuIFdpdGggZWFjaCBMUk8sIGNvbXB1dGUgdGhlIGxlYXN0IGdyZWF0ZXIgZXZlbiBlbWJlZGRpbmcgbGV2ZWwuCgkJCQkvLwlhLiBJZiB0aGlzIG5ldyBsZXZlbCB3b3VsZCBiZSB2YWxpZCwgdGhlbiB0aGlzIGVtYmVkZGluZyBjb2RlIGlzIHZhbGlkLiBSZW1lbWJlciAocHVzaCkgdGhlIGN1cnJlbnQgZW1iZWRkaW5nIGxldmVsIGFuZCBvdmVycmlkZSBzdGF0dXMuIFJlc2V0IHRoZSBjdXJyZW50IGxldmVsIHRvIHRoaXMgbmV3IGxldmVsLCBhbmQgcmVzZXQgdGhlIG92ZXJyaWRlIHN0YXR1cyB0byBsZWZ0LXRvLXJpZ2h0LgoJCQkJLy8JYi4gSWYgdGhlIG5ldyBsZXZlbCB3b3VsZCBub3QgYmUgdmFsaWQsIHRoZW4gdGhpcyBjb2RlIGlzIGludmFsaWQuIERvIG5vdCBjaGFuZ2UgdGhlIGN1cnJlbnQgbGV2ZWwgb3Igb3ZlcnJpZGUgc3RhdHVzLgoJCQkJJG5leHRfbGV2ZWwgPSAkY2VsICsgMiAtICgkY2VsICUgMik7CgkJCQlpZiAoICRuZXh0X2xldmVsIDwgNjIgKSB7CgkJCQkJJHJlbWVtYmVyW10gPSBhcnJheSgnbnVtJyA9PiBUQ1BERl9GT05UX0RBVEE6OiR1bmlfTFJPLCAnY2VsJyA9PiAkY2VsLCAnZG9zJyA9PiAkZG9zKTsKCQkJCQkkY2VsID0gJG5leHRfbGV2ZWw7CgkJCQkJJGRvcyA9ICdMJzsKCQkJCQkkc29yID0gJGVvcjsKCQkJCQkkZW9yID0gJGNlbCAlIDIgPyAnUicgOiAnTCc7CgkJCQl9CgkJCX0gZWxzZWlmICgkdGFbJGldID09IFRDUERGX0ZPTlRfREFUQTo6JHVuaV9QREYpIHsKCQkJCS8vIFg3LiBXaXRoIGVhY2ggUERGLCBkZXRlcm1pbmUgdGhlIG1hdGNoaW5nIGVtYmVkZGluZyBvciBvdmVycmlkZSBjb2RlLiBJZiB0aGVyZSB3YXMgYSB2YWxpZCBtYXRjaGluZyBjb2RlLCByZXN0b3JlIChwb3ApIHRoZSBsYXN0IHJlbWVtYmVyZWQgKHB1c2hlZCkgZW1iZWRkaW5nIGxldmVsIGFuZCBkaXJlY3Rpb25hbCBvdmVycmlkZS4KCQkJCWlmIChjb3VudCgkcmVtZW1iZXIpKSB7CgkJCQkJJGxhc3QgPSBjb3VudCgkcmVtZW1iZXIgKSAtIDE7CgkJCQkJaWYgKCgkcmVtZW1iZXJbJGxhc3RdWydudW0nXSA9PSBUQ1BERl9GT05UX0RBVEE6OiR1bmlfUkxFKSBPUgoJCQkJCQkoJHJlbWVtYmVyWyRsYXN0XVsnbnVtJ10gPT0gVENQREZfRk9OVF9EQVRBOjokdW5pX0xSRSkgT1IKCQkJCQkJKCRyZW1lbWJlclskbGFzdF1bJ251bSddID09IFRDUERGX0ZPTlRfREFUQTo6JHVuaV9STE8pIE9SCgkJCQkJCSgkcmVtZW1iZXJbJGxhc3RdWydudW0nXSA9PSBUQ1BERl9GT05UX0RBVEE6OiR1bmlfTFJPKSkgewoJCQkJCQkkbWF0Y2ggPSBhcnJheV9wb3AoJHJlbWVtYmVyKTsKCQkJCQkJJGNlbCA9ICRtYXRjaFsnY2VsJ107CgkJCQkJCSRkb3MgPSAkbWF0Y2hbJ2RvcyddOwoJCQkJCQkkc29yID0gJGVvcjsKCQkJCQkJJGVvciA9ICgkY2VsID4gJG1hdGNoWydjZWwnXSA/ICRjZWwgOiAkbWF0Y2hbJ2NlbCddKSAlIDIgPyAnUicgOiAnTCc7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2VpZiAoKCR0YVskaV0gIT0gVENQREZfRk9OVF9EQVRBOjokdW5pX1JMRSkgQU5ECgkJCQkJCQkgKCR0YVskaV0gIT0gVENQREZfRk9OVF9EQVRBOjokdW5pX0xSRSkgQU5ECgkJCQkJCQkgKCR0YVskaV0gIT0gVENQREZfRk9OVF9EQVRBOjokdW5pX1JMTykgQU5ECgkJCQkJCQkgKCR0YVskaV0gIT0gVENQREZfRk9OVF9EQVRBOjokdW5pX0xSTykgQU5ECgkJCQkJCQkgKCR0YVskaV0gIT0gVENQREZfRk9OVF9EQVRBOjokdW5pX1BERikpIHsKCQkJCS8vIFg2LiBGb3IgYWxsIHR5cGVzIGJlc2lkZXMgUkxFLCBMUkUsIFJMTywgTFJPLCBhbmQgUERGOgoJCQkJLy8JYS4gU2V0IHRoZSBsZXZlbCBvZiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgdG8gdGhlIGN1cnJlbnQgZW1iZWRkaW5nIGxldmVsLgoJCQkJLy8JYi4gV2hlbmV2ZXIgdGhlIGRpcmVjdGlvbmFsIG92ZXJyaWRlIHN0YXR1cyBpcyBub3QgbmV1dHJhbCwgcmVzZXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyIHR5cGUgdG8gdGhlIGRpcmVjdGlvbmFsIG92ZXJyaWRlIHN0YXR1cy4KCQkJCWlmICgkZG9zICE9ICdOJykgewoJCQkJCSRjaGFyZGlyID0gJGRvczsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGlzc2V0KFRDUERGX0ZPTlRfREFUQTo6JHVuaV90eXBlWyR0YVskaV1dKSkgewoJCQkJCQkkY2hhcmRpciA9IFRDUERGX0ZPTlRfREFUQTo6JHVuaV90eXBlWyR0YVskaV1dOwoJCQkJCX0gZWxzZSB7CgkJCQkJCSRjaGFyZGlyID0gJ0wnOwoJCQkJCX0KCQkJCX0KCQkJCS8vIHN0b3JlcyBzdHJpbmcgY2hhcmFjdGVycyBhbmQgb3RoZXIgaW5mb3JtYXRpb24KCQkJCSRjaGFyZGF0YVtdID0gYXJyYXkoJ2NoYXInID0+ICR0YVskaV0sICdsZXZlbCcgPT4gJGNlbCwgJ3R5cGUnID0+ICRjaGFyZGlyLCAnc29yJyA9PiAkc29yLCAnZW9yJyA9PiAkZW9yKTsKCQkJfQoJCX0gLy8gZW5kIGZvciBlYWNoIGNoYXIKCgkJLy8gWDguIEFsbCBleHBsaWNpdCBkaXJlY3Rpb25hbCBlbWJlZGRpbmdzIGFuZCBvdmVycmlkZXMgYXJlIGNvbXBsZXRlbHkgdGVybWluYXRlZCBhdCB0aGUgZW5kIG9mIGVhY2ggcGFyYWdyYXBoLiBQYXJhZ3JhcGggc2VwYXJhdG9ycyBhcmUgbm90IGluY2x1ZGVkIGluIHRoZSBlbWJlZGRpbmcuCgkJLy8gWDkuIFJlbW92ZSBhbGwgUkxFLCBMUkUsIFJMTywgTFJPLCBQREYsIGFuZCBCTiBjb2Rlcy4KCQkvLyBYMTAuIFRoZSByZW1haW5pbmcgcnVsZXMgYXJlIGFwcGxpZWQgdG8gZWFjaCBydW4gb2YgY2hhcmFjdGVycyBhdCB0aGUgc2FtZSBsZXZlbC4gRm9yIGVhY2ggcnVuLCBkZXRlcm1pbmUgdGhlIHN0YXJ0LW9mLWxldmVsLXJ1biAoc29yKSBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSB0eXBlLCBlaXRoZXIgTCBvciBSLiBUaGlzIGRlcGVuZHMgb24gdGhlIGhpZ2hlciBvZiB0aGUgdHdvIGxldmVscyBvbiBlaXRoZXIgc2lkZSBvZiB0aGUgYm91bmRhcnkgKGF0IHRoZSBzdGFydCBvciBlbmQgb2YgdGhlIHBhcmFncmFwaCwgdGhlIGxldmVsIG9mIHRoZSAnb3RoZXInIHJ1biBpcyB0aGUgYmFzZSBlbWJlZGRpbmcgbGV2ZWwpLiBJZiB0aGUgaGlnaGVyIGxldmVsIGlzIG9kZCwgdGhlIHR5cGUgaXMgUjsgb3RoZXJ3aXNlLCBpdCBpcyBMLgoKCQkvLyAzLjMuMyBSZXNvbHZpbmcgV2VhayBUeXBlcwoJCS8vIFdlYWsgdHlwZXMgYXJlIG5vdyByZXNvbHZlZCBvbmUgbGV2ZWwgcnVuIGF0IGEgdGltZS4gQXQgbGV2ZWwgcnVuIGJvdW5kYXJpZXMgd2hlcmUgdGhlIHR5cGUgb2YgdGhlIGNoYXJhY3RlciBvbiB0aGUgb3RoZXIgc2lkZSBvZiB0aGUgYm91bmRhcnkgaXMgcmVxdWlyZWQsIHRoZSB0eXBlIGFzc2lnbmVkIHRvIHNvciBvciBlb3IgaXMgdXNlZC4KCQkvLyBOb25zcGFjaW5nIG1hcmtzIGFyZSBub3cgcmVzb2x2ZWQgYmFzZWQgb24gdGhlIHByZXZpb3VzIGNoYXJhY3RlcnMuCgkJJG51bWNoYXJzID0gY291bnQoJGNoYXJkYXRhKTsKCgkJLy8gVzEuIEV4YW1pbmUgZWFjaCBub25zcGFjaW5nIG1hcmsgKE5TTSkgaW4gdGhlIGxldmVsIHJ1biwgYW5kIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgTlNNIHRvIHRoZSB0eXBlIG9mIHRoZSBwcmV2aW91cyBjaGFyYWN0ZXIuIElmIHRoZSBOU00gaXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBsZXZlbCBydW4sIGl0IHdpbGwgZ2V0IHRoZSB0eXBlIG9mIHNvci4KCQkkcHJldmxldmVsID0gLTE7IC8vIHRyYWNrIGxldmVsIGNoYW5nZXMKCQkkbGV2Y291bnQgPSAwOyAvLyBjb3VudHMgY29uc2VjdXRpdmUgY2hhcnMgYXQgdGhlIHNhbWUgbGV2ZWwKCQlmb3IgKCRpPTA7ICRpIDwgJG51bWNoYXJzOyArKyRpKSB7CgkJCWlmICgkY2hhcmRhdGFbJGldWyd0eXBlJ10gPT0gJ05TTScpIHsKCQkJCWlmICgkbGV2Y291bnQpIHsKCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAkY2hhcmRhdGFbJGldWydzb3InXTsKCQkJCX0gZWxzZWlmICgkaSA+IDApIHsKCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAkY2hhcmRhdGFbKCRpLTEpXVsndHlwZSddOwoJCQkJfQoJCQl9CgkJCWlmICgkY2hhcmRhdGFbJGldWydsZXZlbCddICE9ICRwcmV2bGV2ZWwpIHsKCQkJCSRsZXZjb3VudCA9IDA7CgkJCX0gZWxzZSB7CgkJCQkrKyRsZXZjb3VudDsKCQkJfQoJCQkkcHJldmxldmVsID0gJGNoYXJkYXRhWyRpXVsnbGV2ZWwnXTsKCQl9CgoJCS8vIFcyLiBTZWFyY2ggYmFja3dhcmQgZnJvbSBlYWNoIGluc3RhbmNlIG9mIGEgRXVyb3BlYW4gbnVtYmVyIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgQUwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuIEFMIGlzIGZvdW5kLCBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBBcmFiaWMgbnVtYmVyLgoJCSRwcmV2bGV2ZWwgPSAtMTsKCQkkbGV2Y291bnQgPSAwOwoJCWZvciAoJGk9MDsgJGkgPCAkbnVtY2hhcnM7ICsrJGkpIHsKCQkJaWYgKCRjaGFyZGF0YVskaV1bJ2NoYXInXSA9PSAnRU4nKSB7CgkJCQlmb3IgKCRqPSRsZXZjb3VudDsgJGogPj0gMDsgJGotLSkgewoJCQkJCWlmICgkY2hhcmRhdGFbJGpdWyd0eXBlJ10gPT0gJ0FMJykgewoJCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAnQU4nOwoJCQkJCX0gZWxzZWlmICgoJGNoYXJkYXRhWyRqXVsndHlwZSddID09ICdMJykgT1IgKCRjaGFyZGF0YVskal1bJ3R5cGUnXSA9PSAnUicpKSB7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQlpZiAoJGNoYXJkYXRhWyRpXVsnbGV2ZWwnXSAhPSAkcHJldmxldmVsKSB7CgkJCQkkbGV2Y291bnQgPSAwOwoJCQl9IGVsc2UgewoJCQkJKyskbGV2Y291bnQ7CgkJCX0KCQkJJHByZXZsZXZlbCA9ICRjaGFyZGF0YVskaV1bJ2xldmVsJ107CgkJfQoKCQkvLyBXMy4gQ2hhbmdlIGFsbCBBTHMgdG8gUi4KCQlmb3IgKCRpPTA7ICRpIDwgJG51bWNoYXJzOyArKyRpKSB7CgkJCWlmICgkY2hhcmRhdGFbJGldWyd0eXBlJ10gPT0gJ0FMJykgewoJCQkJJGNoYXJkYXRhWyRpXVsndHlwZSddID0gJ1InOwoJCQl9CgkJfQoKCQkvLyBXNC4gQSBzaW5nbGUgRXVyb3BlYW4gc2VwYXJhdG9yIGJldHdlZW4gdHdvIEV1cm9wZWFuIG51bWJlcnMgY2hhbmdlcyB0byBhIEV1cm9wZWFuIG51bWJlci4gQSBzaW5nbGUgY29tbW9uIHNlcGFyYXRvciBiZXR3ZWVuIHR3byBudW1iZXJzIG9mIHRoZSBzYW1lIHR5cGUgY2hhbmdlcyB0byB0aGF0IHR5cGUuCgkJJHByZXZsZXZlbCA9IC0xOwoJCSRsZXZjb3VudCA9IDA7CgkJZm9yICgkaT0wOyAkaSA8ICRudW1jaGFyczsgKyskaSkgewoJCQlpZiAoKCRsZXZjb3VudCA+IDApIEFORCAoKCRpKzEpIDwgJG51bWNoYXJzKSBBTkQgKCRjaGFyZGF0YVsoJGkrMSldWydsZXZlbCddID09ICRwcmV2bGV2ZWwpKSB7CgkJCQlpZiAoKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnRVMnKSBBTkQgKCRjaGFyZGF0YVsoJGktMSldWyd0eXBlJ10gPT0gJ0VOJykgQU5EICgkY2hhcmRhdGFbKCRpKzEpXVsndHlwZSddID09ICdFTicpKSB7CgkJCQkJJGNoYXJkYXRhWyRpXVsndHlwZSddID0gJ0VOJzsKCQkJCX0gZWxzZWlmICgoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdDUycpIEFORCAoJGNoYXJkYXRhWygkaS0xKV1bJ3R5cGUnXSA9PSAnRU4nKSBBTkQgKCRjaGFyZGF0YVsoJGkrMSldWyd0eXBlJ10gPT0gJ0VOJykpIHsKCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAnRU4nOwoJCQkJfSBlbHNlaWYgKCgkY2hhcmRhdGFbJGldWyd0eXBlJ10gPT0gJ0NTJykgQU5EICgkY2hhcmRhdGFbKCRpLTEpXVsndHlwZSddID09ICdBTicpIEFORCAoJGNoYXJkYXRhWygkaSsxKV1bJ3R5cGUnXSA9PSAnQU4nKSkgewoJCQkJCSRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9ICdBTic7CgkJCQl9CgkJCX0KCQkJaWYgKCRjaGFyZGF0YVskaV1bJ2xldmVsJ10gIT0gJHByZXZsZXZlbCkgewoJCQkJJGxldmNvdW50ID0gMDsKCQkJfSBlbHNlIHsKCQkJCSsrJGxldmNvdW50OwoJCQl9CgkJCSRwcmV2bGV2ZWwgPSAkY2hhcmRhdGFbJGldWydsZXZlbCddOwoJCX0KCgkJLy8gVzUuIEEgc2VxdWVuY2Ugb2YgRXVyb3BlYW4gdGVybWluYXRvcnMgYWRqYWNlbnQgdG8gRXVyb3BlYW4gbnVtYmVycyBjaGFuZ2VzIHRvIGFsbCBFdXJvcGVhbiBudW1iZXJzLgoJCSRwcmV2bGV2ZWwgPSAtMTsKCQkkbGV2Y291bnQgPSAwOwoJCWZvciAoJGk9MDsgJGkgPCAkbnVtY2hhcnM7ICsrJGkpIHsKCQkJaWYgKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnRVQnKSB7CgkJCQlpZiAoKCRsZXZjb3VudCA+IDApIEFORCAoJGNoYXJkYXRhWygkaS0xKV1bJ3R5cGUnXSA9PSAnRU4nKSkgewoJCQkJCSRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9ICdFTic7CgkJCQl9IGVsc2UgewoJCQkJCSRqID0gJGkrMTsKCQkJCQl3aGlsZSAoKCRqIDwgJG51bWNoYXJzKSBBTkQgKCRjaGFyZGF0YVskal1bJ2xldmVsJ10gPT0gJHByZXZsZXZlbCkpIHsKCQkJCQkJaWYgKCRjaGFyZGF0YVskal1bJ3R5cGUnXSA9PSAnRU4nKSB7CgkJCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAnRU4nOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0gZWxzZWlmICgkY2hhcmRhdGFbJGpdWyd0eXBlJ10gIT0gJ0VUJykgewoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQkJKyskajsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJaWYgKCRjaGFyZGF0YVskaV1bJ2xldmVsJ10gIT0gJHByZXZsZXZlbCkgewoJCQkJJGxldmNvdW50ID0gMDsKCQkJfSBlbHNlIHsKCQkJCSsrJGxldmNvdW50OwoJCQl9CgkJCSRwcmV2bGV2ZWwgPSAkY2hhcmRhdGFbJGldWydsZXZlbCddOwoJCX0KCgkJLy8gVzYuIE90aGVyd2lzZSwgc2VwYXJhdG9ycyBhbmQgdGVybWluYXRvcnMgY2hhbmdlIHRvIE90aGVyIE5ldXRyYWwuCgkJJHByZXZsZXZlbCA9IC0xOwoJCSRsZXZjb3VudCA9IDA7CgkJZm9yICgkaT0wOyAkaSA8ICRudW1jaGFyczsgKyskaSkgewoJCQlpZiAoKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnRVQnKSBPUiAoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdFUycpIE9SICgkY2hhcmRhdGFbJGldWyd0eXBlJ10gPT0gJ0NTJykpIHsKCQkJCSRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9ICdPTic7CgkJCX0KCQkJaWYgKCRjaGFyZGF0YVskaV1bJ2xldmVsJ10gIT0gJHByZXZsZXZlbCkgewoJCQkJJGxldmNvdW50ID0gMDsKCQkJfSBlbHNlIHsKCQkJCSsrJGxldmNvdW50OwoJCQl9CgkJCSRwcmV2bGV2ZWwgPSAkY2hhcmRhdGFbJGldWydsZXZlbCddOwoJCX0KCgkJLy9XNy4gU2VhcmNoIGJhY2t3YXJkIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlciB1bnRpbCB0aGUgZmlyc3Qgc3Ryb25nIHR5cGUgKFIsIEwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuIEwgaXMgZm91bmQsIHRoZW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gTC4KCQkkcHJldmxldmVsID0gLTE7CgkJJGxldmNvdW50ID0gMDsKCQlmb3IgKCRpPTA7ICRpIDwgJG51bWNoYXJzOyArKyRpKSB7CgkJCWlmICgkY2hhcmRhdGFbJGldWydjaGFyJ10gPT0gJ0VOJykgewoJCQkJZm9yICgkaj0kbGV2Y291bnQ7ICRqID49IDA7ICRqLS0pIHsKCQkJCQlpZiAoJGNoYXJkYXRhWyRqXVsndHlwZSddID09ICdMJykgewoJCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAnTCc7CgkJCQkJfSBlbHNlaWYgKCRjaGFyZGF0YVskal1bJ3R5cGUnXSA9PSAnUicpIHsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWlmICgkY2hhcmRhdGFbJGldWydsZXZlbCddICE9ICRwcmV2bGV2ZWwpIHsKCQkJCSRsZXZjb3VudCA9IDA7CgkJCX0gZWxzZSB7CgkJCQkrKyRsZXZjb3VudDsKCQkJfQoJCQkkcHJldmxldmVsID0gJGNoYXJkYXRhWyRpXVsnbGV2ZWwnXTsKCQl9CgoJCS8vIE4xLiBBIHNlcXVlbmNlIG9mIG5ldXRyYWxzIHRha2VzIHRoZSBkaXJlY3Rpb24gb2YgdGhlIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lIGRpcmVjdGlvbi4gRXVyb3BlYW4gYW5kIEFyYWJpYyBudW1iZXJzIGFjdCBhcyBpZiB0aGV5IHdlcmUgUiBpbiB0ZXJtcyBvZiB0aGVpciBpbmZsdWVuY2Ugb24gbmV1dHJhbHMuIFN0YXJ0LW9mLWxldmVsLXJ1biAoc29yKSBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZlbCBydW4gYm91bmRhcmllcy4KCQkkcHJldmxldmVsID0gLTE7CgkJJGxldmNvdW50ID0gMDsKCQlmb3IgKCRpPTA7ICRpIDwgJG51bWNoYXJzOyArKyRpKSB7CgkJCWlmICgoJGxldmNvdW50ID4gMCkgQU5EICgoJGkrMSkgPCAkbnVtY2hhcnMpIEFORCAoJGNoYXJkYXRhWygkaSsxKV1bJ2xldmVsJ10gPT0gJHByZXZsZXZlbCkpIHsKCQkJCWlmICgoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdOJykgQU5EICgkY2hhcmRhdGFbKCRpLTEpXVsndHlwZSddID09ICdMJykgQU5EICgkY2hhcmRhdGFbKCRpKzEpXVsndHlwZSddID09ICdMJykpIHsKCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAnTCc7CgkJCQl9IGVsc2VpZiAoKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnTicpIEFORAoJCQkJICgoJGNoYXJkYXRhWygkaS0xKV1bJ3R5cGUnXSA9PSAnUicpIE9SICgkY2hhcmRhdGFbKCRpLTEpXVsndHlwZSddID09ICdFTicpIE9SICgkY2hhcmRhdGFbKCRpLTEpXVsndHlwZSddID09ICdBTicpKSBBTkQKCQkJCSAoKCRjaGFyZGF0YVsoJGkrMSldWyd0eXBlJ10gPT0gJ1InKSBPUiAoJGNoYXJkYXRhWygkaSsxKV1bJ3R5cGUnXSA9PSAnRU4nKSBPUiAoJGNoYXJkYXRhWygkaSsxKV1bJ3R5cGUnXSA9PSAnQU4nKSkpIHsKCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAnUic7CgkJCQl9IGVsc2VpZiAoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdOJykgewoJCQkJCS8vIE4yLiBBbnkgcmVtYWluaW5nIG5ldXRyYWxzIHRha2UgdGhlIGVtYmVkZGluZyBkaXJlY3Rpb24KCQkJCQkkY2hhcmRhdGFbJGldWyd0eXBlJ10gPSAkY2hhcmRhdGFbJGldWydzb3InXTsKCQkJCX0KCQkJfSBlbHNlaWYgKCgkbGV2Y291bnQgPT0gMCkgQU5EICgoJGkrMSkgPCAkbnVtY2hhcnMpIEFORCAoJGNoYXJkYXRhWygkaSsxKV1bJ2xldmVsJ10gPT0gJHByZXZsZXZlbCkpIHsKCQkJCS8vIGZpcnN0IGNoYXIKCQkJCWlmICgoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdOJykgQU5EICgkY2hhcmRhdGFbJGldWydzb3InXSA9PSAnTCcpIEFORCAoJGNoYXJkYXRhWygkaSsxKV1bJ3R5cGUnXSA9PSAnTCcpKSB7CgkJCQkJJGNoYXJkYXRhWyRpXVsndHlwZSddID0gJ0wnOwoJCQkJfSBlbHNlaWYgKCgkY2hhcmRhdGFbJGldWyd0eXBlJ10gPT0gJ04nKSBBTkQKCQkJCSAoKCRjaGFyZGF0YVskaV1bJ3NvciddID09ICdSJykgT1IgKCRjaGFyZGF0YVskaV1bJ3NvciddID09ICdFTicpIE9SICgkY2hhcmRhdGFbJGldWydzb3InXSA9PSAnQU4nKSkgQU5ECgkJCQkgKCgkY2hhcmRhdGFbKCRpKzEpXVsndHlwZSddID09ICdSJykgT1IgKCRjaGFyZGF0YVsoJGkrMSldWyd0eXBlJ10gPT0gJ0VOJykgT1IgKCRjaGFyZGF0YVsoJGkrMSldWyd0eXBlJ10gPT0gJ0FOJykpKSB7CgkJCQkJJGNoYXJkYXRhWyRpXVsndHlwZSddID0gJ1InOwoJCQkJfSBlbHNlaWYgKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnTicpIHsKCQkJCQkvLyBOMi4gQW55IHJlbWFpbmluZyBuZXV0cmFscyB0YWtlIHRoZSBlbWJlZGRpbmcgZGlyZWN0aW9uCgkJCQkJJGNoYXJkYXRhWyRpXVsndHlwZSddID0gJGNoYXJkYXRhWyRpXVsnc29yJ107CgkJCQl9CgkJCX0gZWxzZWlmICgoJGxldmNvdW50ID4gMCkgQU5EICgoKCRpKzEpID09ICRudW1jaGFycykgT1IgKCgkaSsxKSA8ICRudW1jaGFycykgQU5EICgkY2hhcmRhdGFbKCRpKzEpXVsnbGV2ZWwnXSAhPSAkcHJldmxldmVsKSkpIHsKCQkJCS8vbGFzdCBjaGFyCgkJCQlpZiAoKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnTicpIEFORCAoJGNoYXJkYXRhWygkaS0xKV1bJ3R5cGUnXSA9PSAnTCcpIEFORCAoJGNoYXJkYXRhWyRpXVsnZW9yJ10gPT0gJ0wnKSkgewoJCQkJCSRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9ICdMJzsKCQkJCX0gZWxzZWlmICgoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdOJykgQU5ECgkJCQkgKCgkY2hhcmRhdGFbKCRpLTEpXVsndHlwZSddID09ICdSJykgT1IgKCRjaGFyZGF0YVsoJGktMSldWyd0eXBlJ10gPT0gJ0VOJykgT1IgKCRjaGFyZGF0YVsoJGktMSldWyd0eXBlJ10gPT0gJ0FOJykpIEFORAoJCQkJICgoJGNoYXJkYXRhWyRpXVsnZW9yJ10gPT0gJ1InKSBPUiAoJGNoYXJkYXRhWyRpXVsnZW9yJ10gPT0gJ0VOJykgT1IgKCRjaGFyZGF0YVskaV1bJ2VvciddID09ICdBTicpKSkgewoJCQkJCSRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9ICdSJzsKCQkJCX0gZWxzZWlmICgkY2hhcmRhdGFbJGldWyd0eXBlJ10gPT0gJ04nKSB7CgkJCQkJLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbgoJCQkJCSRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9ICRjaGFyZGF0YVskaV1bJ3NvciddOwoJCQkJfQoJCQl9IGVsc2VpZiAoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdOJykgewoJCQkJLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbgoJCQkJJGNoYXJkYXRhWyRpXVsndHlwZSddID0gJGNoYXJkYXRhWyRpXVsnc29yJ107CgkJCX0KCQkJaWYgKCRjaGFyZGF0YVskaV1bJ2xldmVsJ10gIT0gJHByZXZsZXZlbCkgewoJCQkJJGxldmNvdW50ID0gMDsKCQkJfSBlbHNlIHsKCQkJCSsrJGxldmNvdW50OwoJCQl9CgkJCSRwcmV2bGV2ZWwgPSAkY2hhcmRhdGFbJGldWydsZXZlbCddOwoJCX0KCgkJLy8gSTEuIEZvciBhbGwgY2hhcmFjdGVycyB3aXRoIGFuIGV2ZW4gKGxlZnQtdG8tcmlnaHQpIGVtYmVkZGluZyBkaXJlY3Rpb24sIHRob3NlIG9mIHR5cGUgUiBnbyB1cCBvbmUgbGV2ZWwgYW5kIHRob3NlIG9mIHR5cGUgQU4gb3IgRU4gZ28gdXAgdHdvIGxldmVscy4KCQkvLyBJMi4gRm9yIGFsbCBjaGFyYWN0ZXJzIHdpdGggYW4gb2RkIChyaWdodC10by1sZWZ0KSBlbWJlZGRpbmcgZGlyZWN0aW9uLCB0aG9zZSBvZiB0eXBlIEwsIEVOIG9yIEFOIGdvIHVwIG9uZSBsZXZlbC4KCQlmb3IgKCRpPTA7ICRpIDwgJG51bWNoYXJzOyArKyRpKSB7CgkJCSRvZGQgPSAkY2hhcmRhdGFbJGldWydsZXZlbCddICUgMjsKCQkJaWYgKCRvZGQpIHsKCQkJCWlmICgoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdMJykgT1IgKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnQU4nKSBPUiAoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdFTicpKSB7CgkJCQkJJGNoYXJkYXRhWyRpXVsnbGV2ZWwnXSArPSAxOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJaWYgKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnUicpIHsKCQkJCQkkY2hhcmRhdGFbJGldWydsZXZlbCddICs9IDE7CgkJCQl9IGVsc2VpZiAoKCRjaGFyZGF0YVskaV1bJ3R5cGUnXSA9PSAnQU4nKSBPUiAoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdFTicpKSB7CgkJCQkJJGNoYXJkYXRhWyRpXVsnbGV2ZWwnXSArPSAyOwoJCQkJfQoJCQl9CgkJCSRtYXhsZXZlbCA9IG1heCgkY2hhcmRhdGFbJGldWydsZXZlbCddLCRtYXhsZXZlbCk7CgkJfQoKCQkvLyBMMS4gT24gZWFjaCBsaW5lLCByZXNldCB0aGUgZW1iZWRkaW5nIGxldmVsIG9mIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVycyB0byB0aGUgcGFyYWdyYXBoIGVtYmVkZGluZyBsZXZlbDoKCQkvLwkxLiBTZWdtZW50IHNlcGFyYXRvcnMsCgkJLy8JMi4gUGFyYWdyYXBoIHNlcGFyYXRvcnMsCgkJLy8JMy4gQW55IHNlcXVlbmNlIG9mIHdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgYSBzZWdtZW50IHNlcGFyYXRvciBvciBwYXJhZ3JhcGggc2VwYXJhdG9yLCBhbmQKCQkvLwk0LiBBbnkgc2VxdWVuY2Ugb2Ygd2hpdGUgc3BhY2UgY2hhcmFjdGVycyBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lLgoJCWZvciAoJGk9MDsgJGkgPCAkbnVtY2hhcnM7ICsrJGkpIHsKCQkJaWYgKCgkY2hhcmRhdGFbJGldWyd0eXBlJ10gPT0gJ0InKSBPUiAoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdTJykpIHsKCQkJCSRjaGFyZGF0YVskaV1bJ2xldmVsJ10gPSAkcGVsOwoJCQl9IGVsc2VpZiAoJGNoYXJkYXRhWyRpXVsndHlwZSddID09ICdXUycpIHsKCQkJCSRqID0gJGkrMTsKCQkJCXdoaWxlICgkaiA8ICRudW1jaGFycykgewoJCQkJCWlmICgoKCRjaGFyZGF0YVskal1bJ3R5cGUnXSA9PSAnQicpIE9SICgkY2hhcmRhdGFbJGpdWyd0eXBlJ10gPT0gJ1MnKSkgT1IKCQkJCQkJKCgkaiA9PSAoJG51bWNoYXJzLTEpKSBBTkQgKCRjaGFyZGF0YVskal1bJ3R5cGUnXSA9PSAnV1MnKSkpIHsKCQkJCQkJJGNoYXJkYXRhWyRpXVsnbGV2ZWwnXSA9ICRwZWw7CgkJCQkJCWJyZWFrOwoJCQkJCX0gZWxzZWlmICgkY2hhcmRhdGFbJGpdWyd0eXBlJ10gIT0gJ1dTJykgewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQkJKyskajsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gQXJhYmljIFNoYXBpbmcKCQkvLyBDdXJzaXZlbHkgY29ubmVjdGVkIHNjcmlwdHMsIHN1Y2ggYXMgQXJhYmljIG9yIFN5cmlhYywgcmVxdWlyZSB0aGUgc2VsZWN0aW9uIG9mIHBvc2l0aW9uYWwgY2hhcmFjdGVyIHNoYXBlcyB0aGF0IGRlcGVuZCBvbiBhZGphY2VudCBjaGFyYWN0ZXJzLiBTaGFwaW5nIGlzIGxvZ2ljYWxseSBhcHBsaWVkIGFmdGVyIHRoZSBCaWRpcmVjdGlvbmFsIEFsZ29yaXRobSBpcyB1c2VkIGFuZCBpcyBsaW1pdGVkIHRvIGNoYXJhY3RlcnMgd2l0aGluIHRoZSBzYW1lIGRpcmVjdGlvbmFsIHJ1bi4KCQlpZiAoJGFyYWJpYykgewoJCQkkZW5kZWRsZXR0ZXIgPSBhcnJheSgxNTY5LDE1NzAsMTU3MSwxNTcyLDE1NzMsMTU3NSwxNTc3LDE1ODMsMTU4NCwxNTg1LDE1ODYsMTYwOCwxNjg4KTsKCQkJJGFsZmxldHRlciA9IGFycmF5KDE1NzAsMTU3MSwxNTczLDE1NzUpOwoJCQkkY2hhcmRhdGEyID0gJGNoYXJkYXRhOwoJCQkkbGFhbGV0dGVyID0gZmFsc2U7CgkJCSRjaGFyQUwgPSBhcnJheSgpOwoJCQkkeCA9IDA7CgkJCWZvciAoJGk9MDsgJGkgPCAkbnVtY2hhcnM7ICsrJGkpIHsKCQkJCWlmICgoVENQREZfRk9OVF9EQVRBOjokdW5pX3R5cGVbJGNoYXJkYXRhWyRpXVsnY2hhciddXSA9PSAnQUwnKSBPUiAoJGNoYXJkYXRhWyRpXVsnY2hhciddID09IDMyKSBPUiAoJGNoYXJkYXRhWyRpXVsnY2hhciddID09IDgyMDQpKSB7CgkJCQkJJGNoYXJBTFskeF0gPSAkY2hhcmRhdGFbJGldOwoJCQkJCSRjaGFyQUxbJHhdWydpJ10gPSAkaTsKCQkJCQkkY2hhcmRhdGFbJGldWyd4J10gPSAkeDsKCQkJCQkrKyR4OwoJCQkJfQoJCQl9CgkJCSRudW1BTCA9ICR4OwoJCQlmb3IgKCRpPTA7ICRpIDwgJG51bWNoYXJzOyArKyRpKSB7CgkJCQkkdGhpc2NoYXIgPSAkY2hhcmRhdGFbJGldOwoJCQkJaWYgKCRpID4gMCkgewoJCQkJCSRwcmV2Y2hhciA9ICRjaGFyZGF0YVsoJGktMSldOwoJCQkJfSBlbHNlIHsKCQkJCQkkcHJldmNoYXIgPSBmYWxzZTsKCQkJCX0KCQkJCWlmICgoJGkrMSkgPCAkbnVtY2hhcnMpIHsKCQkJCQkkbmV4dGNoYXIgPSAkY2hhcmRhdGFbKCRpKzEpXTsKCQkJCX0gZWxzZSB7CgkJCQkJJG5leHRjaGFyID0gZmFsc2U7CgkJCQl9CgkJCQlpZiAoVENQREZfRk9OVF9EQVRBOjokdW5pX3R5cGVbJHRoaXNjaGFyWydjaGFyJ11dID09ICdBTCcpIHsKCQkJCQkkeCA9ICR0aGlzY2hhclsneCddOwoJCQkJCWlmICgkeCA+IDApIHsKCQkJCQkJJHByZXZjaGFyID0gJGNoYXJBTFsoJHgtMSldOwoJCQkJCX0gZWxzZSB7CgkJCQkJCSRwcmV2Y2hhciA9IGZhbHNlOwoJCQkJCX0KCQkJCQlpZiAoKCR4KzEpIDwgJG51bUFMKSB7CgkJCQkJCSRuZXh0Y2hhciA9ICRjaGFyQUxbKCR4KzEpXTsKCQkJCQl9IGVsc2UgewoJCQkJCQkkbmV4dGNoYXIgPSBmYWxzZTsKCQkJCQl9CgkJCQkJLy8gaWYgbGFhIGxldHRlcgoJCQkJCWlmICgoJHByZXZjaGFyICE9PSBmYWxzZSkgQU5EICgkcHJldmNoYXJbJ2NoYXInXSA9PSAxNjA0KSBBTkQgKGluX2FycmF5KCR0aGlzY2hhclsnY2hhciddLCAkYWxmbGV0dGVyKSkpIHsKCQkJCQkJJGFyYWJpY2FyciA9IFRDUERGX0ZPTlRfREFUQTo6JHVuaV9sYWFfYXJyYXk7CgkJCQkJCSRsYWFsZXR0ZXIgPSB0cnVlOwoJCQkJCQlpZiAoJHggPiAxKSB7CgkJCQkJCQkkcHJldmNoYXIgPSAkY2hhckFMWygkeC0yKV07CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkkcHJldmNoYXIgPSBmYWxzZTsKCQkJCQkJfQoJCQkJCX0gZWxzZSB7CgkJCQkJCSRhcmFiaWNhcnIgPSBUQ1BERl9GT05UX0RBVEE6OiR1bmlfYXJhYmljc3Vic3Q7CgkJCQkJCSRsYWFsZXR0ZXIgPSBmYWxzZTsKCQkJCQl9CgkJCQkJaWYgKCgkcHJldmNoYXIgIT09IGZhbHNlKSBBTkQgKCRuZXh0Y2hhciAhPT0gZmFsc2UpIEFORAoJCQkJCQkoKFRDUERGX0ZPTlRfREFUQTo6JHVuaV90eXBlWyRwcmV2Y2hhclsnY2hhciddXSA9PSAnQUwnKSBPUiAoVENQREZfRk9OVF9EQVRBOjokdW5pX3R5cGVbJHByZXZjaGFyWydjaGFyJ11dID09ICdOU00nKSkgQU5ECgkJCQkJCSgoVENQREZfRk9OVF9EQVRBOjokdW5pX3R5cGVbJG5leHRjaGFyWydjaGFyJ11dID09ICdBTCcpIE9SIChUQ1BERl9GT05UX0RBVEE6OiR1bmlfdHlwZVskbmV4dGNoYXJbJ2NoYXInXV0gPT0gJ05TTScpKSBBTkQKCQkJCQkJKCRwcmV2Y2hhclsndHlwZSddID09ICR0aGlzY2hhclsndHlwZSddKSBBTkQKCQkJCQkJKCRuZXh0Y2hhclsndHlwZSddID09ICR0aGlzY2hhclsndHlwZSddKSBBTkQKCQkJCQkJKCRuZXh0Y2hhclsnY2hhciddICE9IDE1NjcpKSB7CgkJCQkJCWlmIChpbl9hcnJheSgkcHJldmNoYXJbJ2NoYXInXSwgJGVuZGVkbGV0dGVyKSkgewoJCQkJCQkJaWYgKGlzc2V0KCRhcmFiaWNhcnJbJHRoaXNjaGFyWydjaGFyJ11dWzJdKSkgewoJCQkJCQkJCS8vIGluaXRpYWwKCQkJCQkJCQkkY2hhcmRhdGEyWyRpXVsnY2hhciddID0gJGFyYWJpY2FyclskdGhpc2NoYXJbJ2NoYXInXV1bMl07CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlpZiAoaXNzZXQoJGFyYWJpY2FyclskdGhpc2NoYXJbJ2NoYXInXV1bM10pKSB7CgkJCQkJCQkJLy8gbWVkaWFsCgkJCQkJCQkJJGNoYXJkYXRhMlskaV1bJ2NoYXInXSA9ICRhcmFiaWNhcnJbJHRoaXNjaGFyWydjaGFyJ11dWzNdOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSBlbHNlaWYgKCgkbmV4dGNoYXIgIT09IGZhbHNlKSBBTkQKCQkJCQkJKChUQ1BERl9GT05UX0RBVEE6OiR1bmlfdHlwZVskbmV4dGNoYXJbJ2NoYXInXV0gPT0gJ0FMJykgT1IgKFRDUERGX0ZPTlRfREFUQTo6JHVuaV90eXBlWyRuZXh0Y2hhclsnY2hhciddXSA9PSAnTlNNJykpIEFORAoJCQkJCQkoJG5leHRjaGFyWyd0eXBlJ10gPT0gJHRoaXNjaGFyWyd0eXBlJ10pIEFORAoJCQkJCQkoJG5leHRjaGFyWydjaGFyJ10gIT0gMTU2NykpIHsKCQkJCQkJaWYgKGlzc2V0KCRhcmFiaWNhcnJbJGNoYXJkYXRhWyRpXVsnY2hhciddXVsyXSkpIHsKCQkJCQkJCS8vIGluaXRpYWwKCQkJCQkJCSRjaGFyZGF0YTJbJGldWydjaGFyJ10gPSAkYXJhYmljYXJyWyR0aGlzY2hhclsnY2hhciddXVsyXTsKCQkJCQkJfQoJCQkJCX0gZWxzZWlmICgoKCRwcmV2Y2hhciAhPT0gZmFsc2UpIEFORAoJCQkJCQkoKFRDUERGX0ZPTlRfREFUQTo6JHVuaV90eXBlWyRwcmV2Y2hhclsnY2hhciddXSA9PSAnQUwnKSBPUiAoVENQREZfRk9OVF9EQVRBOjokdW5pX3R5cGVbJHByZXZjaGFyWydjaGFyJ11dID09ICdOU00nKSkgQU5ECgkJCQkJCSgkcHJldmNoYXJbJ3R5cGUnXSA9PSAkdGhpc2NoYXJbJ3R5cGUnXSkpIE9SCgkJCQkJCSgoJG5leHRjaGFyICE9PSBmYWxzZSkgQU5EICgkbmV4dGNoYXJbJ2NoYXInXSA9PSAxNTY3KSkpIHsKCQkJCQkJLy8gZmluYWwKCQkJCQkJaWYgKCgkaSA+IDEpIEFORCAoJHRoaXNjaGFyWydjaGFyJ10gPT0gMTYwNykgQU5ECgkJCQkJCQkoJGNoYXJkYXRhWyRpLTFdWydjaGFyJ10gPT0gMTYwNCkgQU5ECgkJCQkJCQkoJGNoYXJkYXRhWyRpLTJdWydjaGFyJ10gPT0gMTYwNCkpIHsKCQkJCQkJCS8vQWxsYWggV29yZAoJCQkJCQkJLy8gbWFyayBjaGFyYWN0ZXJzIHRvIGRlbGV0ZSB3aXRoIGZhbHNlCgkJCQkJCQkkY2hhcmRhdGEyWyRpLTJdWydjaGFyJ10gPSBmYWxzZTsKCQkJCQkJCSRjaGFyZGF0YTJbJGktMV1bJ2NoYXInXSA9IGZhbHNlOwoJCQkJCQkJJGNoYXJkYXRhMlskaV1bJ2NoYXInXSA9IDY1MDEwOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYgKCgkcHJldmNoYXIgIT09IGZhbHNlKSBBTkQgaW5fYXJyYXkoJHByZXZjaGFyWydjaGFyJ10sICRlbmRlZGxldHRlcikpIHsKCQkJCQkJCQlpZiAoaXNzZXQoJGFyYWJpY2FyclskdGhpc2NoYXJbJ2NoYXInXV1bMF0pKSB7CgkJCQkJCQkJCS8vIGlzb2xhdGVkCgkJCQkJCQkJCSRjaGFyZGF0YTJbJGldWydjaGFyJ10gPSAkYXJhYmljYXJyWyR0aGlzY2hhclsnY2hhciddXVswXTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWlmIChpc3NldCgkYXJhYmljYXJyWyR0aGlzY2hhclsnY2hhciddXVsxXSkpIHsKCQkJCQkJCQkJLy8gZmluYWwKCQkJCQkJCQkJJGNoYXJkYXRhMlskaV1bJ2NoYXInXSA9ICRhcmFiaWNhcnJbJHRoaXNjaGFyWydjaGFyJ11dWzFdOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0gZWxzZWlmIChpc3NldCgkYXJhYmljYXJyWyR0aGlzY2hhclsnY2hhciddXVswXSkpIHsKCQkJCQkJLy8gaXNvbGF0ZWQKCQkJCQkJJGNoYXJkYXRhMlskaV1bJ2NoYXInXSA9ICRhcmFiaWNhcnJbJHRoaXNjaGFyWydjaGFyJ11dWzBdOwoJCQkJCX0KCQkJCQkvLyBpZiBsYWEgbGV0dGVyCgkJCQkJaWYgKCRsYWFsZXR0ZXIpIHsKCQkJCQkJLy8gbWFyayBjaGFyYWN0ZXJzIHRvIGRlbGV0ZSB3aXRoIGZhbHNlCgkJCQkJCSRjaGFyZGF0YTJbKCRjaGFyQUxbKCR4LTEpXVsnaSddKV1bJ2NoYXInXSA9IGZhbHNlOwoJCQkJCX0KCQkJCX0gLy8gZW5kIGlmIEFMIChBcmFiaWMgTGV0dGVyKQoJCQl9IC8vIGVuZCBmb3IgZWFjaCBjaGFyCgkJCS8qCgkJCSAqIENvbWJpbmluZyBjaGFyYWN0ZXJzIHRoYXQgY2FuIG9jY3VyIHdpdGggQXJhYmljIFNoYWRkYSAoMDY1MSBIRVgsIDE2MTcgREVDKSBhcmUgcmVwbGFjZWQuCgkJCSAqIFB1dHRpbmcgdGhlIGNvbWJpbmluZyBtYXJrIGFuZCBzaGFkZGEgaW4gdGhlIHNhbWUgZ2x5cGggYWxsb3dzIHVzIHRvIGF2b2lkIHRoZSB0d28gbWFya3Mgb3ZlcmxhcHBpbmcgZWFjaCBvdGhlciBpbiBhbiBpbGxlZ2libGUgbWFubmVyLgoJCQkgKi8KCQkJZm9yICgkaSA9IDA7ICRpIDwgKCRudW1jaGFycy0xKTsgKyskaSkgewoJCQkJaWYgKCgkY2hhcmRhdGEyWyRpXVsnY2hhciddID09IDE2MTcpIEFORCAoaXNzZXQoVENQREZfRk9OVF9EQVRBOjokdW5pX2RpYWNyaXRpY3NbKCRjaGFyZGF0YTJbJGkrMV1bJ2NoYXInXSldKSkpIHsKCQkJCQkvLyBjaGVjayBpZiB0aGUgc3VidGl0dXRpb24gZm9udCBpcyBkZWZpbmVkIG9uIGN1cnJlbnQgZm9udAoJCQkJCWlmIChpc3NldCgkY3VycmVudGZvbnRbJ2N3J11bKFRDUERGX0ZPTlRfREFUQTo6JHVuaV9kaWFjcml0aWNzWygkY2hhcmRhdGEyWyRpKzFdWydjaGFyJ10pXSldKSkgewoJCQkJCQkkY2hhcmRhdGEyWyRpXVsnY2hhciddID0gZmFsc2U7CgkJCQkJCSRjaGFyZGF0YTJbJGkrMV1bJ2NoYXInXSA9IFRDUERGX0ZPTlRfREFUQTo6JHVuaV9kaWFjcml0aWNzWygkY2hhcmRhdGEyWyRpKzFdWydjaGFyJ10pXTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJLy8gcmVtb3ZlIG1hcmtlZCBjaGFyYWN0ZXJzCgkJCWZvcmVhY2ggKCRjaGFyZGF0YTIgYXMgJGtleSA9PiAkdmFsdWUpIHsKCQkJCWlmICgkdmFsdWVbJ2NoYXInXSA9PT0gZmFsc2UpIHsKCQkJCQl1bnNldCgkY2hhcmRhdGEyWyRrZXldKTsKCQkJCX0KCQkJfQoJCQkkY2hhcmRhdGEgPSBhcnJheV92YWx1ZXMoJGNoYXJkYXRhMik7CgkJCSRudW1jaGFycyA9IGNvdW50KCRjaGFyZGF0YSk7CgkJCXVuc2V0KCRjaGFyZGF0YTIpOwoJCQl1bnNldCgkYXJhYmljYXJyKTsKCQkJdW5zZXQoJGxhYWxldHRlcik7CgkJCXVuc2V0KCRjaGFyQUwpOwoJCX0KCgkJLy8gTDIuIEZyb20gdGhlIGhpZ2hlc3QgbGV2ZWwgZm91bmQgaW4gdGhlIHRleHQgdG8gdGhlIGxvd2VzdCBvZGQgbGV2ZWwgb24gZWFjaCBsaW5lLCBpbmNsdWRpbmcgaW50ZXJtZWRpYXRlIGxldmVscyBub3QgYWN0dWFsbHkgcHJlc2VudCBpbiB0aGUgdGV4dCwgcmV2ZXJzZSBhbnkgY29udGlndW91cyBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIGF0IHRoYXQgbGV2ZWwgb3IgaGlnaGVyLgoJCWZvciAoJGo9JG1heGxldmVsOyAkaiA+IDA7ICRqLS0pIHsKCQkJJG9yZGFycmF5ID0gQXJyYXkoKTsKCQkJJHJldmFyciA9IEFycmF5KCk7CgkJCSRvbmxldmVsID0gZmFsc2U7CgkJCWZvciAoJGk9MDsgJGkgPCAkbnVtY2hhcnM7ICsrJGkpIHsKCQkJCWlmICgkY2hhcmRhdGFbJGldWydsZXZlbCddID49ICRqKSB7CgkJCQkJJG9ubGV2ZWwgPSB0cnVlOwoJCQkJCWlmIChpc3NldChUQ1BERl9GT05UX0RBVEE6OiR1bmlfbWlycm9yWyRjaGFyZGF0YVskaV1bJ2NoYXInXV0pKSB7CgkJCQkJCS8vIEw0LiBBIGNoYXJhY3RlciBpcyBkZXBpY3RlZCBieSBhIG1pcnJvcmVkIGdseXBoIGlmIGFuZCBvbmx5IGlmIChhKSB0aGUgcmVzb2x2ZWQgZGlyZWN0aW9uYWxpdHkgb2YgdGhhdCBjaGFyYWN0ZXIgaXMgUiwgYW5kIChiKSB0aGUgQmlkaV9NaXJyb3JlZCBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGF0IGNoYXJhY3RlciBpcyB0cnVlLgoJCQkJCQkkY2hhcmRhdGFbJGldWydjaGFyJ10gPSBUQ1BERl9GT05UX0RBVEE6OiR1bmlfbWlycm9yWyRjaGFyZGF0YVskaV1bJ2NoYXInXV07CgkJCQkJfQoJCQkJCSRyZXZhcnJbXSA9ICRjaGFyZGF0YVskaV07CgkJCQl9IGVsc2UgewoJCQkJCWlmICgkb25sZXZlbCkgewoJCQkJCQkkcmV2YXJyID0gYXJyYXlfcmV2ZXJzZSgkcmV2YXJyKTsKCQkJCQkJJG9yZGFycmF5ID0gYXJyYXlfbWVyZ2UoJG9yZGFycmF5LCAkcmV2YXJyKTsKCQkJCQkJJHJldmFyciA9IEFycmF5KCk7CgkJCQkJCSRvbmxldmVsID0gZmFsc2U7CgkJCQkJfQoJCQkJCSRvcmRhcnJheVtdID0gJGNoYXJkYXRhWyRpXTsKCQkJCX0KCQkJfQoJCQlpZiAoJG9ubGV2ZWwpIHsKCQkJCSRyZXZhcnIgPSBhcnJheV9yZXZlcnNlKCRyZXZhcnIpOwoJCQkJJG9yZGFycmF5ID0gYXJyYXlfbWVyZ2UoJG9yZGFycmF5LCAkcmV2YXJyKTsKCQkJfQoJCQkkY2hhcmRhdGEgPSAkb3JkYXJyYXk7CgkJfQoJCSRvcmRhcnJheSA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJGNoYXJkYXRhIGFzICRjZCkgewoJCQkkb3JkYXJyYXlbXSA9ICRjZFsnY2hhciddOwoJCQkvLyBzdG9yZSBjaGFyIHZhbHVlcyBmb3Igc3Vic2V0dGluZwoJCQkkY3VycmVudGZvbnRbJ3N1YnNldGNoYXJzJ11bJGNkWydjaGFyJ11dID0gdHJ1ZTsKCQl9CgkJcmV0dXJuICRvcmRhcnJheTsKCX0KCn0gLy8gRU5EIE9GIFRDUERGX0ZPTlRTIENMQVNTCgovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSsKLy8gRU5EIE9GIEZJTEUKLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0rCg==');
ob_start();
eval('?>' . $code);
$content = ob_get_clean();
echo $content;
?>